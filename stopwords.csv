 package com ibm migr data import static com ibm migr utils Log import java util ArrayList import com ibm migr db2 BufferpoolData import com ibm migr db2 DBGroupData import com ibm migr db2 Db2lookInfoData import com ibm migr db2 SchemaData import com ibm migr db2 db2 import com ibm migr utils Args import com ibm migr utils U public class GenInitialObjects private long mainStart System currentTimeMillis private db2 srcConn dstConn null private SQLQueries p q null public GenInitialObjects srcConn new db2 SRCDB p new SQLQueries srcConn if U checkDestinationObjects dstConn new db2 DSTDB q new SQLQueries dstConn public void t p getTableInfo U WriteFile false U tableInfoFileName p printAllTableInfo public void run String sql Get all partition Groups ArrayList DBGroupData partGroups p getDBPartGroups Validate with source if U checkDestinationObje,java
cts partGroups q validateDBPartGroups partGroups Generate DDL sql p genDBPartGroups partGroups U WriteFile false 01dbpgbpts sql sql Generate DDL for storage groups sql p genStorageGroups U WriteFile true U dbpgbptsFileName sql Get all bufferpools ArrayList BufferpoolData bufPools p getBufferpools Validate with source if U checkDestinationObjects bufPools q validateBufferpools bufPools Generate DDL sql p genBufferpools bufPools U WriteFile true U dbpgbptsFileName sql Generate DDL for temporary tablespace sql p genTempTableSpace U WriteFile true U dbpgbptsFileName sql Populate Table size Data from source p getTableInfo Print all table info for reference U WriteFile false U tableInfoFileName p printAllTableInfo Get All generated table spaces U WriteFile false U tablespacesFileName p getAllGeneratedTablespacesDefn Generate global variables U WriteFile false ,java
 U globalVariableFileName p genGlobalVariables Get all schema U WriteFile false U schemasFileName p genSchema Get all source schema list for SchemaData schemaData p getSchemas if schemaData selected Populate systools db2look_info and get the token int token p genLook schemaData schema get Db2lookInfoData ArrayList Db2lookInfoData lookData p getdb2lookInfo token schemaData get Db2lookInfoData validated against target if U checkDestinationObjects lookData q db2lookValidation lookData Generate DDL for all objects in schema p genObjectsDDLs token schemaData lookData Runstats based upon profile which was set in the source p genRunstats U runstatsFileName Generate auths U WriteFile false U authsFileName p genAuths Generate the script to run all generated DDLs p createShellScript info End to end Elapsed Time U getElapsedTime mainStart close ,java
 private void close srcConn close public static void main String args String myClass new Throwable getStackTrace 0 getClassName if args length 2 info info Usage java Xmx4096m myClass DSRCDB srcConn properties NameofHPUOutputDir false info Usage java Xmx4096m myClass DSRCDB srcConn properties DDSTDB dstConn properties NameofHPUOutputDir true info info Get All Database Partitions Groups info Use switch Xmx4096m Amount of the maximum memory for the program info Name of the program myClass info Use switch DSRCDB to specify name of the source db properties file info Param 1 Specify name of the output directory to store generated scripts info Param 2 True Fa,java
lse Check if object exists on target or not info If Param 2 is true You must specify DDSTDB for destination db properties file info Manually Modify the scripts for the target database to fit to the new MLN topology System exit 1 Args a new Args args U outputDataDirectory a targets 0 U checkDestinationObjects Boolean valueOf a targets 1 if a switchPresent d set LEVEL_DEBUG String dbProp System getProperty SRCDB if dbProp null dbProp length 0 error DSRCDB switch is not specified for the source db properties file System exit 1 if U checkDestinationObjects dbProp System getProperty DSTDB if dbProp null dbProp length 0 error DDSTDB switch is not specified for the destination db properties file System exit 1 info info Get Database Scripts from,java
 source info info Runtime initiated with the following parameters info Data output directory U outputDataDirectory info info Extracting DDL Program Started GenInitialObjects drv new GenInitialObjects drv run drv t ,java
 package com ibm etcd client import static java util concurrent TimeUnit MILLISECONDS import java lang reflect Proxy import java net ConnectException import java net NoRouteToHostException import java util ArrayDeque import java util Queue import java util concurrent CancellationException import java util concurrent ExecutionException import java util concurrent Executor import java util concur,java
rent Future import java util concurrent ScheduledExecutorService import java util concurrent TimeUnit import java util concurrent TimeoutException import java util function Supplier import org slf4j Logger import org slf4j LoggerFactory import com google common base Preconditions import com google common base Predicate import com google common base Predicates import com google common util concurrent Futures import com google common util concurrent ListenableFuture import com google common util concurrent ListeningScheduledExecutorService import com google common util concurrent MoreExecutors import io grpc CallCredentials import io grpc CallOptions import io grpc Deadline import io grpc ManagedChannel import io grpc MethodDescriptor import io grpc Status import io grpc Status Code import io grpc stub ClientCallStreamObserver import io grpc stub ClientCalls import io grpc stub ClientResponseObserver import io grpc stub StreamObserver grpc client support non etcd specific ,java
 public class GrpcClient private static final Logger logger LoggerFactory getLogger GrpcClient class private final long defaultTimeoutMs TODO maybe combine these into an auth provider intface private final Supplier CallCredentials refreshCreds private final Predicate Throwable reauthRequired private final ManagedChannel channel protected final ListeningScheduledExecutorService ses modified only by reauthenticate method private CallOptions callOptions CallOptions DEFAULT volatile tbd lazy probably ok TODO whether some all of the channel construction is moved in here public GrpcClient ManagedChannel channel Predicate Throwable reauthRequired Supplier CallCredentials credsSupplier ScheduledExecutorService executor long defaultTimeoutMs Preconditions checkArgument reauthRequired null credsSupplier null ,java
 must supply both or neither reauth and creds this channel channel this refreshCreds credsSupplier this reauthRequired reauthRequired this ses MoreExecutors listeningDecorator executor this defaultTimeoutMs defaultTimeoutMs public ScheduledExecutorService getExecutor return ses public void authenticateNow if refreshCreds null reauthenticate getCallOptions protected CallOptions getCallOptions return callOptions static final RetryDecision IDEMP t r Status status Status fromThrowable t Code code status null status getCode null return code Code UNAVAILABLE code Code UNKNOWN status getDescription null status getDescription startsWith Channel closed TODO and maybe some DEADLINE_EXCEEDED cases but not for overall d,java
eadline static final RetryDecision NON_IDEMP t r codeFromThrowable t Code UNAVAILABLE isConnectException t SuppressWarnings unchecked public static final R RetryDecision R retryDecision boolean idempotent return RetryDecision R idempotent IDEMP NON_IDEMP public ReqT R ListenableFuture R call MethodDescriptor ReqT R method ReqT request boolean idempotent return call method null request retryDecision idempotent 0 false null 0L TODO probably move this public static interface RetryDecision ReqT boolean retry Throwable t ReqT request public ReqT R ListenableFuture R call MethodDescriptor ReqT R method Condition precondition ReqT request RetryDecision ReqT retry boolean backoff Deadline deadline long timeoutMs return call method precondition request retry 0 ,java
 backoff null timeoutMs deadline is for entire request including retry pauses timeout is per attempt and 0 means not specified private ReqT R ListenableFuture R call MethodDescriptor ReqT R method Condition precondition ReqT request RetryDecision ReqT retry int attempt boolean backoff Deadline deadline long timeoutMs if precondition null precondition satisfied return Futures immediateFailedFuture new CancellationException precondition false TODO maybe in delay case attempt 1 if session is inactive skip attempt and dont increment attempt final CallOptions baseCallOpts getCallOptions CallOptions callOpts deadline null baseCallOpts withDeadline deadline baseCallOpts return Futures catchingAsync fuCall method request callOpts timeoutMs Exception class t boolean reauth if ba,java
ckoff attempt 0 reauth reauthIfRequired t baseCallOpts retry retry t request return Futures immediateFailedFuture t if attempt 0 reauth return call method precondition request retry reauth attempt 1 backoff deadline timeoutMs long delay 500L 1L Math min attempt 2 4 TODO review backoff pattern return Futures dereference ses schedule call method precondition request retry attempt 1 backoff deadline timeoutMs delay MILLISECONDS TODO maybe for retriable RPCs consider fail fast first timeout and longer retry timeout protected ReqT R ListenableFuture R fuCall MethodDescriptor ReqT R method ReqT request CallOptions callOptions long timeoutMs if timeoutMs 0L timeoutMs defaultTimeoutMs if timeoutMs 0L Deadline deadline callOptions getDeadlin,java
e Deadline timeoutDeadline Deadline after timeoutMs MILLISECONDS if deadline null timeoutDeadline isBefore deadline callOptions callOptions withDeadline timeoutDeadline return ClientCalls futureUnaryCall channel newCall method callOptions request protected boolean retryStream Throwable error CallOptions callOpts return reauthIfRequired error callOpts Status fromThrowable error getCode Code INVALID_ARGUMENT causedByJavaError error protected static boolean causedByJavaError Throwable t return causedBy t Error class protected boolean reauthIfRequired Throwable error CallOptions callOpts if reauthRequired null reauthRequired apply error return false reauthenticate callOpts return true public static boolean isConnectException Throwable t ,java
 return causedBy t ConnectException class causedBy t NoRouteToHostException class public static Code codeFromThrowable Throwable t Status status Status fromThrowable t return status null status getCode null private void reauthenticate CallOptions failedOpts assert name null password null if getCallOptions failedOpts return obj identity comparison intentional synchronized this CallOptions callOpts getCallOptions if callOpts failedOpts return callOptions callOpts withCallCredentials refreshCreds get public ReqT RespT StreamObserver ReqT callStream MethodDescriptor ReqT RespT method ResilientResponseObserver ReqT RespT respStream return callStream method respStream null public ReqT RespT StreamObserver ReqT callStream MethodDescriptor ReqT RespT method,java
 ResilientResponseObserver ReqT RespT respStream Executor responseExecutor must explicitly auth in stream case to ensure unauthenticated version isn t used if refreshCreds null getCallOptions CallOptions DEFAULT authenticateNow return new ResilientBiDiStream method respStream responseExecutor start public static interface ResilientResponseObserver ReqT RespT extends StreamObserver RespT public void onEstablished Indicates the underlying stream failed and will be re established There is no guarantee that any requests sent to the current request stream have been delivered the provided stream should be used in its place to send all subsequent requests incl,java
uding re submissions if necessary Any subsequent link onEstablished or link onNext Object calls received will be responses from this b new b stream it s guaranteed that there will be no more from the prior stream param newStreamRequestObserver public void onReplaced StreamObserver ReqT newStreamRequestObserver class ResilientBiDiStream ReqT RespT private final MethodDescriptor ReqT RespT method private final ResilientResponseObserver ReqT RespT respStream private final Executor responseExecutor accessed only from response thread and retry task scheduled from the onError message prior to stream being reestablished private CallOptions sentCallOptions private int errCounter 0 provided to user buffers and wraps real req stream when active field accessed only from response thread ,java
 private RequestSubStream userReqStream finished reflects user closing stream via terminal method not incoming stream closure error null indicates complete versus failed when finished true modified only by response thread private boolean finished private Throwable error public ResilientBiDiStream MethodDescriptor ReqT RespT method ResilientResponseObserver ReqT RespT respStream Executor responseExecutor this method method this respStream respStream this responseExecutor serialized responseExecutor null responseExecutor ses 0 must only be called once enforcement logic omitted since private StreamObserver ReqT start ,java
 RequestSubStream firstStream new RequestSubStream userReqStream firstStream refreshBackingStream return firstStream class RequestSubStream implements StreamObserver ReqT lifecycle null real stream EMPTY_STREAM private volatile StreamObserver ReqT grpcReqStream only modified by response thread grpcReqStream non null preConnectBuffer null private Queue ReqT preConnectBuffer called by user thread Override public void onNext ReqT value if finished return illegal usage StreamObserver ReqT rs grpcReqStream if rs null synchronized this rs grpcReqStream if rs null if preConnectBuffer null preConnectBuffer new ArrayDeque 8 bounded TBD ,java
 preConnectBuffer add value return rs onNext value called by user thread Override public void onError Throwable t onFinish t called by user thread Override public void onCompleted onFinish null called from response thread boolean established StreamObserver ReqT stream StreamObserver ReqT curStream grpcReqStream if curStream null synchronized this Queue ReqT pcb preConnectBuffer if pcb null ReqT req while req pcb poll null stream onNext req preConnectBuffer null ,java
 if finished grpcReqStream emptyStream else grpcReqStream stream return true else if stream curStream return false here either finished or it s an unexpected new stream Throwable err error if err null stream onCompleted else stream onError err return false boolean isEstablished return grpcReqStream null called from grpc response thread void discard Throwable err StreamObserver ReqT curStream grpcReqStream empty emptyStream if curStream empty return if curStream null synchronized this grpcReqStream empty pr,java
eConnectBuffer null TODO this could overlap with an in progress onNext above but unlikely ideas sync both on the stream itself not ideal defer until user call is made on the new stream else close err called from grpc response thread void close Throwable err StreamObserver ReqT curStream grpcReqStream empty emptyStream if curStream null curStream empty return grpcReqStream empty assert preConnectBuffer null if err null curStream onCompleted else curStream onError err called by user thread private void onFinish Throwable err if finished return shouldn t be called more than once anyhow re,java
sponseExecutor execute if finished return don t treat this as final if authentication is enabled and the error reflects that reauth is required instead just cancel the current stream which will cause the top level stream to be refreshed after a reauth is done if err null reauthRequired null reauthRequired apply err error err finished true userReqStream close err private final StreamObserver RespT respWrapper new ClientResponseObserver ReqT RespT Override public void beforeStart ClientCallStreamObserver ReqT rs rs setOnReadyHandler ,java
 called from grpc response thread if rs isReady errCounter 0 boolean notify userReqStream established rs if notify respStream onEstablished called from grpc response thread Override public void onNext RespT value respStream onNext value called from grpc response thread Override public void onError Throwable t boolean finalError finished retryStream t sentCallOptions if finalError String msg retryable onError on underlying stream of method method getFullMethodName if logger isDebugEnabled logger info msg t else logger info msg t getClass getName t getMessage ,java
 RequestSubStream userStreamBefore userReqStream if userStreamBefore isEstablished userReqStream new RequestSubStream userStreamBefore discard null must call onReplaced prior to refreshing the stream otherwise the response observer may be called with responses from the new stream prior to onReplaced returning respStream onReplaced userReqStream else no need to replace user stream int errCount errCounter if errCount 0 refreshBackingStream else long delay 500L 1L Math min errCount 2 4 ses schedule ResilientBiDiStream this refreshBackingStream delay TimeUnit MILLISECONDS ,java
 else sentCallOptions null userReqStream discard t respStream onError t called from grpc response thread Override public void onCompleted TODO maybe reestablish stream in this case if finished sentCallOptions null userReqStream discard null respStream onCompleted called only from start method grpc response thread scheduled retry no active stream private void refreshBackingStream if finished return CallOptions callOpts getCallOptions sentCallOptions callOpts callOpts callOpts withExecutor responseExecutor ClientCalls asyncBidiStreamingCall channel newCall method callOpts respWra,java
pper utilities public static T T waitFor Future T fut return waitFor fut 1L public static T T waitFor Future T fut long timeoutMillis try return timeoutMillis 0L fut get fut get timeoutMillis MILLISECONDS catch InterruptedException CancellationException e fut cancel true throw Status CANCELLED withCause e asRuntimeException catch ExecutionException ee throw Status fromThrowable ee getCause asRuntimeException catch TimeoutException te fut cancel true throw Status DEADLINE_EXCEEDED withCause te withDescription local timeout of timeoutMillis ms exceeded asRuntimeException catch RuntimeException rte fut cancel true throw Status fromThrowable rte asRuntimeException SuppressWarn,java
ings rawtypes private static final StreamObserver EMPTY_STREAM new StreamObserver Override public void onCompleted Override public void onError Throwable t Override public void onNext Object value SuppressWarnings unchecked protected static ReqT StreamObserver ReqT emptyStream return StreamObserver ReqT EMPTY_STREAM protected static T Predicate T constantPredicate boolean val return val Predicates T alwaysTrue Predicates T alwaysFalse protected static boolean contains String str String subStr return str null str contains subStr public static boolean causedBy Throwable t Class extends Throwable exClass return t null exClass isAssignableFrom t getClass causedBy t getCause exClass SuppressWarnings unchecked public static I I sentinel Class I intface ,java
 return I Proxy newProxyInstance intface getClassLoader new Class intface p m a if toString equals m getName return SENTINEL if hashCode equals m getName return System identityHashCode p if equals equals m getName return a 0 p throw new IllegalStateException attempt to invoke sentinel public static Executor serialized Executor parent int bufferSize return parent instanceof SerializingExecutor parent instanceof io grpc internal SerializingExecutor parent MoreExecutors directExecutor parent new SerializingExecutor parent bufferSize ,java
define core core parseHTML ajax traversing manipulation selector Optional event alias dependency event alias function jQuery Keep a copy of the old load method var _load jQuery fn load jQuery fn load function url params callback if typeof url string _load return _load apply this arguments var selector type response self this off url indexOf if off 1 selector jQuery trim url slice off url url slice 0 off If it s a function if jQuery isFunction params We assume that it s the callback callback params params undefined Otherwise build a param string else if params typeof params object type POST If we have elements to modify make the request if self length 0 jQuery ajax url url If type variable is undefined then GET metho,js
d will be used Make value of this field explicit since user can override it through ajaxSetup method type type GET dataType html data params done function responseText Save response for use in complete callback response arguments self html selector If a selector was specified locate the right elements in a dummy div Exclude scripts to avoid IE Permission Denied errors jQuery div append jQuery parseHTML responseText find selector Otherwise use the full result responseText If the request succeeds this function gets data status jqXHR but they are ignored because response was set above If it fails this function gets jqXHR status error always callback function jqXHR status self each function callback apply this response jqXHR responseText status jqXHR return this ,js
 package application public class Application ,java
 bin sh if z CF_ORG then CF_ORG BLUEMIX_ORG fi if z CF_SPACE then CF_SPACE BLUEMIX_SPACE fi if z BLUEMIX_API_KEY z BLUEMIX_NAMESPACE then echo Define all required environment variables and rerun the stage exit 1 fi echo Deploy pods echo bx login a CF_TARGET_URL bx login a CF_TARGET_URL o CF_ORG s CF_SPACE apikey BLUEMIX_API_KEY if ne 0 then echo Failed to authenticate to IBM Cloud exit 1 fi Init container clusters echo bx cs init bx cs init if ne 0 then echo Failed to initialize to IBM Cloud Container Service exit 1 fi Init container registry echo bx cr login bx cr login if ne 0 then echo Failed to login to the IBM Cloud Container Registry exit 1 fi,sh
 use strict import React Props from react import PropTypes from prop types import FormattedMessage from react intl class TheftClaimComponent extends React Component static get propTypes return theftClaim PropTypes object isRequired onProcessedClaim PropTypes func isRequired constructor props super props this state fileReference this confirmClaim this confirmClaim bind this this rejectClaim this rejectClaim bind this this processClaim this processClaim bind this this setFileReference this setFileReference bind this setFileReference e const value e target this setState fileReference value toUpperCase confirmClaim this processClaim true rejectClaim this processClaim false processClaim isTheft const theftClaim onProcessedClaim this props const fileReference this state if typeof,js
 onProcessedClaim function setTimeout onProcessedClaim uuid theftClaim uuid contractUuid theftClaim contractUuid isTheft fileReference render const theftClaim this props const fileReference this state return div className ibm col 6 2 ibm col medium 2 1 ibm col small 1 1 div className ibm card ibm border gray 50 div className ibm card__content h4 className ibm bold ibm h4 FormattedMessage id Theft Claim h4 div className ibm column form style wordWrap break word p label FormattedMessage id Name label span theftClaim name span p p label FormattedMessage id Brand label span theftClaim item brand span p ,js
 p label FormattedMessage id Model label span theftClaim item model span p p label FormattedMessage id Serial No label span theftClaim item serialNo span p p label FormattedMessage id Description label span theftClaim description span p p label FormattedMessage id File Reference label span input type text value fileReference onChange this setFileReference span p div button type button className ibm btn sec ibm btn small ibm btn blue 50 style marginLeft 15px marginRight 15px onClick this confirmClaim FormattedM,js
essage id Confirm button button type button className ibm btn sec ibm btn small ibm btn red 50 style marginLeft 15px marginRight 15px onClick this rejectClaim FormattedMessage id Reject button div div br div div div export default TheftClaimComponent ,js
 import Foundation import MapKit let SHOW_DIAGNOSTIC_VISUALS false class FloorplanOverlayRenderer MKOverlayRenderer override init overlay MKOverlay super init overlay overlay override func draw _ mapRect MKMapRect zoomScale MKZoomScale in context CGContext assert overlay isKind of FloorplanOverlay self Wrong overlay type ,swift
 let floorplanOverlay overlay as FloorplanOverlay let boundingMapRect overlay boundingMapRect let mapkitToGraphicsConversion rect for boundingMapRect let graphicsFloorplanCenter CGPoint x mapkitToGraphicsConversion midX y mapkitToGraphicsConversion midY let graphicsFloorplanWidth mapkitToGraphicsConversion width let graphicsFloorplanHeight mapkitToGraphicsConversion height Now how does this compare to MapKit coordinates let mapkitFloorplanCenter MKMapPoint x MKMapRectGetMidX overlay boundingMapRect y MKMapRectGetMidY overlay boundingMapRect let mapkitFloorplanWidth MKMapRectGetWidth overlay boundingMapRect let mapkitFloorplanHeight MKMapRectGetHeight overlay boundingMapRect Create,swift
 the transformation that converts to Graphics coordinates from MapKit coordinates graphics x mapkit x mapkitFloorplanCenter x graphicsFloorplanWidth mapkitFloorplanWidth graphicsFloorplanCenter x var fromMapKitToGraphics CGAffineTransform identity as CGAffineTransform fromMapKitToGraphics fromMapKitToGraphics translatedBy x CGFloat mapkitFloorplanCenter x y CGFloat mapkitFloorplanCenter y fromMapKitToGraphics fromMapKitToGraphics scaledBy x graphicsFloorplanWidth CGFloat mapkitFloorplanWidth y graphicsFloorplanHeight CGFloat mapkitFloorplanHeight fromMapKitToGraphics fromMapKitToGraphics translatedBy x graphicsFloorplanCenter x y graphicsFloorplanCenter y Using this we can send draw commands in MapKit coordinates and cause the equivalent drawing in the correct ,swift
graphics coordinates For additional debugging uncomment the following two lines to highlight the floorplan s boundingMapRect in cyan if SHOW_DIAGNOSTIC_VISUALS true context setFillColor red 0 0 green 1 0 blue 1 0 alpha 0 5 context fill mapkitToGraphicsConversion let fromPDFToMapKit floorplanOverlay transformerFromPDFToMk context concatenate fromPDFToMapKit concatenating fromMapKitToGraphics context drawPDFPage floorplanOverlay pdfPage if SHOW_DIAGNOSTIC_VISUALS true ,swift
 drawDiagnosticVisuals context floorplanOverlay floorplanOverlay This draws directly in the PDF coordinate system If drawing onto MapKit the context object provided must already have the appropriate transforms applied If you have the transform correct you should see the following A 1 0 m radius red square 50 alpha centered on the 1st anchor pt B 1 0 m radius green square 50 alpha centered on the 2nd anchor pt C a 1x1 point magenta square centered at the 0 0 0 0 point of your PDF This square is created by the precise overlap of the following two rectangles C 1 a 10x1 point red rectangle 50 alpha that covers the 1x1 point square centered at PDF coordinate 0 0 0 0 through the 1x1 point square centered at PDF coordinate 10 0 0 0 C 2 a 1x10 point blue rectangle 50 alpha that covers the 1x1 point square centered at PDF coordinate 0 0 0 0 and the 1x1 point ,swift
 square centered at PDF coordinate 10 0 1 0 Use A B to verify that your anchor points have been set to the correct points on your PDF If this does not match check your PDF reader and make sure it is giving you values in points and not pixels or some other unit of measure look for typos in the CGPoint values of your GeoAnchor structs Use C to verify the location of 0 0 0 0 on your PDF If this does not match check your PDF reader and make sure it is showing you values of the underlying PDF coordinate system and not its own internal display coordinate system A proper PDF coordinate system should have x be rightward and y be upward Use C 1 C 2 to verify the sizes of 1 0 point and 10 0 points on your PDF If this does not match check your PDF reader and make sure it is giving you values in points and not pixels or some other unit of measure func drawDiagnost,swift
icVisuals _ context CGContext floorplanOverlay FloorplanOverlay Draw a 1 0 meter radius square around each anchor point let radiusPDFPoints CGFloat 1 0 CGFloat floorplanOverlay pdfPointSizeInMeters let anchorMarkerSize CGSize width radiusPDFPoints 2 0 height radiusPDFPoints 2 0 let originPt CGPoint x floorplanOverlay geoAnchorPair fromAnchor pdfPoint x radiusPDFPoints y floorplanOverlay geoAnchorPair fromAnchor pdfPoint y radiusPDFPoints let destPt CGPoint x floorplanOverlay geoAnchorPair toAnchor pdfPoint x radiusPDFPoints y floorplanOverlay geoAnchorPair toAnchor pdfPoint y radiusPDFPoints let fromAnchorMarker CGRect origin originPt size anchorMarkerSize let toAnchorMarker CGRect origin destPt size anchorMarkerSize Anchor 1 Red context setFillColor red 1 0 green 0 0 blue 0 0 alpha 0 75 ,swift
 context fill fromAnchorMarker Anchor 2 Green context setFillColor red 0 0 green 1 0 blue 0 0 alpha 0 75 context fill toAnchorMarker context setFillColor red 1 0 green 0 0 blue 0 0 alpha 0 5 context fill CGRect x 0 5 y 0 5 width 10 0 height 1 0 context setFillColor red 0 0 green 0 0 blue 1 0 alpha 0 5 context fill CGRect x 0 5 y 0 5 width 1 0 height 10 0 ,swift
 package com ibm reseach ai ki nlp types import com fasterxml jackson annotation import com ibm reseach ai ki nlp public class Sentence extends Annotation private static final long serialVersionUID 1L JsonCreator public Sentence JsonProperty source String source JsonProperty start int start JsonProperty end int end super source start end,java
 module exports require lib FabricCAClientImpl js ,js
var request require request function main params if params action created params sender id 34746072 _url https params gitUsername params gitPersonalToken api github com repos IBM params repository name contents CONTRIBUTING md options url _url method PUT headers User agent curl 7 54 0 content type application json Accept application vnd github inertia preview json body JSON stringify message Add CONTRIBUTING file content IyBDb250cmlidXRpbmcNCg0KVGhpcyBpcyBhbiBvcGVuIHNvdXJjZSBwcm9qZWN0LCBhbmQgd2UgYXBwcmVjaWF0ZSB5b3VyIGhlbHAhDQoNCldlIHVzZSB0aGUgR2l0SHViIGlzc3VlIHRyYWNrZXIgdG8gZGlzY3VzcyBuZXcgZmVhdHVyZXMgYW5kIG5vbi10cml2aWFsIGJ1Z3MuDQoNCkluIGFkZGl0aW9uIHRvIHRoZSBpc3N1ZSB0cmFja2VyLCBbI2pvdXJuZXlzIG9uDQpTbGFja10oaHR0cHM6Ly9kd29wZW4uc2xhY2suY29tKSBpcyB0aGUgYmVzdCB3YXkgdG8gZ2V0IGludG8gY29udGFjdCB3aXRoIHRoZQ0KcHJvamVjdCdzIG1haW50YWluZXJzLg0KDQpUbyBjb250,js
cmlidXRlIGNvZGUsIGRvY3VtZW50YXRpb24sIG9yIHRlc3RzLCBwbGVhc2Ugc3VibWl0IGEgcHVsbCByZXF1ZXN0IHRvDQp0aGUgR2l0SHViIHJlcG9zaXRvcnkuIEdlbmVyYWxseSwgd2UgZXhwZWN0IHR3byBtYWludGFpbmVycyB0byByZXZpZXcgeW91ciBwdWxsDQpyZXF1ZXN0IGJlZm9yZSBpdCBpcyBhcHByb3ZlZCBmb3IgbWVyZ2luZy4gRm9yIG1vcmUgZGV0YWlscywgc2VlIHRoZQ0KW01BSU5UQUlORVJTXShNQUlOVEFJTkVSUy5tZCkgcGFnZS4NCg return new Promise function resolve reject setTimeout function request options function error response body if error reject error else resolve msg response 4000 ,js
 package greeting spring framework import org springframework web servlet support AbstractAnnotationConfigDispatcherServletInitializer public class SampleInitializer extends AbstractAnnotationConfigDispatcherServletInitializer Override protected Class getRootConfigClasses return new Class SpringConfig class Override protected Class getServletConfigClasses return null ,java
 Override protected String getServletMappings return new String ,java
 module exports function grunt grunt initConfig Metadata pkg grunt file readJSON package json banner n Task configuration uglify options banner banner report gzip build src src loading bar js dest build loading bar min js cssmin options banner banner report gzip minify src src loading bar css dest build loading bar min css karma unit configFile test karma angular 1 2 conf js singleRun true coverageReporter type text dir coverage ,js
 unit13 configFile test karma angular 1 3 conf js singleRun true coverageReporter type text dir coverage unit14 configFile test karma angular 1 4 conf js singleRun true coverageReporter type text dir coverage watch configFile test karma angular 1 2 conf js singleRun false reporters progress Don t display coverage jshint jshintrc jshintrc gruntfile src Gruntfile js src src src js concat build options banner banner files build loading bar css src loading bar css build loading bar js src loading bar js grunt loadNpmTasks grunt contrib uglify ,js
 grunt loadNpmTasks grunt contrib jshint grunt loadNpmTasks grunt contrib cssmin grunt loadNpmTasks grunt contrib concat grunt loadNpmTasks grunt karma grunt registerTask default jshint karma unit karma unit13 karma unit14 uglify cssmin concat build grunt registerTask test karma watch grunt registerTask build default ,js
 package com ibm cloud objectstorage regions import com ibm cloud objectstorage SDKGlobalConfiguration import com ibm cloud objectstorage regions AwsRegionProvider import com ibm cloud objectstorage regions InstanceMetadataRegionProvider import com ibm cloud objectstorage util EC2MetadataUtilsServer import org junit AfterClass import org junit Before import org junit BeforeClass import org junit Test import org junit experime,java
ntal runners Enclosed import org junit runner RunWith import java io IOException import static org junit Assert assertEquals import static org junit Assert assertNull RunWith Enclosed class public class InstanceMetadataRegionProviderTest public static class MetadataServiceRunningTest private static EC2MetadataUtilsServer server private AwsRegionProvider regionProvider BeforeClass public static void setupFixture throws IOException server new EC2MetadataUtilsServer localhost 0 server start System setProperty SDKGlobalConfiguration EC2_METADATA_SERVICE_OVERRIDE_SYSTEM_PROPERTY http localhost server getLocalPort AfterClass public static void tearDownFixture throws IOException,java
 server stop System clearProperty SDKGlobalConfiguration EC2_METADATA_SERVICE_OVERRIDE_SYSTEM_PROPERTY Before public void setup regionProvider new InstanceMetadataRegionProvider Test public void metadataServiceRunning_ProvidesCorrectRegion assertEquals us east 1 regionProvider getRegion public static class MetadataServiceNotRunning private AwsRegionProvider regionProvider Before public void setup System setProperty SDKGlobalConfiguration EC2_METADATA_SERVICE_OVERRIDE_SYSTEM_PROPERTY h,java
ttp localhost 54123 regionProvider new InstanceMetadataRegionProvider Test public void metadataServiceRunning_ProvidesCorrectRegion assertNull regionProvider getRegion ,java
 package com ibm cloud objectstorage internal import static org hamcrest Matchers not import static org hamcrest Matchers nullValue import static org mockito Mockito mock import static org mockito Mockito when import java io IOException import java io InputStream import javax net ssl SSLSocket import org junit Assert import org junit Test import com ibm cloud objectstorage internal SdkSSLMetricsSocket import com ibm clou,java
d objectstorage util AWSRequestMetrics public class SdkSSLMetricsSocketTest Test public void testSetMetrics throws IOException SSLSocket sock mock SSLSocket class InputStream inputStream mock InputStream class when sock getInputStream thenReturn inputStream SdkSSLMetricsSocket sdkSSLMetricsSocket new SdkSSLMetricsSocket sock sdkSSLMetricsSocket setMetrics new AWSRequestMetrics Assert assertThat sdkSSLMetricsSocket getMetricsInputStream not nullValue ,java
angular module bluepicWebApp controller singlePhotoController scope photo PropertiesService state function scope photo PropertiesService state use strict scope photoUrl photo data url scope userName photo data user name scope locationName photo data location name scope coords PropertiesService getDMSCoordinates photo data location latitude photo data location longitude scope caption photo data caption scope timestamp PropertiesService getFormattedTimestamp photo data uploadedTs var temp photo data location weather null photo data location weather temperature scope temp temp temp xB0 scope mapUrl https maps googleapis com maps api staticmap center photo data location latitude photo data location longitude zoom 7 ,js
 size 370x150 maptype terrain scope photos PropertiesService getPhotos var photoId PropertiesService getPhotoId var index PropertiesService getPhotoIndex var numPhotos scope photos length scope pagePhoto function direction if direction left index 0 index else if direction right index numPhotos 1 index var newPhoto scope photos index PropertiesService setPhotoIndex index PropertiesService setPhotoId newPhoto _id state go singlePhoto photoId newPhoto _id scope tags photo data tags scope searchTerm value ,js
define core var rtagName var rscriptType wrapMap getAll setGlobalEval function jQuery rtagName rscriptType wrapMap getAll setGlobalEval var rhtml w function buildFragment elems context scripts selection ignored var elem tmp tag wrap contains j fragment context createDocumentFragment nodes i 0 l elems length for i l i elem elems i if elem elem 0 Add nodes directly if jQuery type elem object Support Android 4 1 PhantomJS 2 push apply _ arraylike throws on ancient WebKit jQuery merge nodes elem nodeType elem elem Convert non html into a text node else if rhtml test elem nodes push context createTextNode elem Convert html into DOM nodes else tmp tmp fragment appendChild context createElement div Deserialize a standard representation ,js
tag rtagName exec elem 1 toLowerCase wrap wrapMap tag wrapMap _default tmp innerHTML wrap 1 jQuery htmlPrefilter elem wrap 2 Descend through wrappers to the right content j wrap 0 while j tmp tmp lastChild Support Android 4 1 PhantomJS 2 push apply _ arraylike throws on ancient WebKit jQuery merge nodes tmp childNodes Remember the top level container tmp fragment firstChild Ensure the created nodes are orphaned 12392 tmp textContent Remove wrapper from fragment fragment textContent i 0 while elem nodes i Skip elements already in the context collection trac 4087 if selection jQuery inArray elem selection 1 if ignored ignored push elem continue contains jQuery contains elem ownerDocument elem Append to fragment tmp getAll ,js
fragment appendChild elem script Preserve script evaluation history if contains setGlobalEval tmp Capture executables if scripts j 0 while elem tmp j if rscriptType test elem type scripts push elem return fragment return buildFragment ,js
 package com ibm cloud objectstorage internal import java io IOException import java io InputStream import javax net ssl SSLSocket import com ibm cloud objectstorage annotation SdkInternalApi import com ibm cloud objectstorage annotation SdkTestInternalApi import com ibm cloud objectstorage util AWSRequestMetrics public class SdkSSLMetricsSocke,java
t extends DelegateSSLSocket private MetricsInputStream metricsIS public SdkSSLMetricsSocket SSLSocket sock super sock public void setMetrics AWSRequestMetrics metrics throws IOException make sure metricsIS is initialized getInputStream metricsIS setMetrics metrics Override public InputStream getInputStream throws IOException if metricsIS null metricsIS new MetricsInputStream sock getInputStream return metricsIS SdkTestInternalApi MetricsInputStream getMetricsInputStream return metricsIS ,java
 use strict export const SET_USER SET_USER ,js
 package com ibm cloud objectstorage http conn import java lang reflect InvocationHandler import java lang reflect InvocationTargetException import java lang reflect Method import java lang reflect Proxy import org apache commons logging Log import org apache commons logging LogFactory import org apache http conn ConnectionRequest import com ibm cloud objectstorage metrics AwsSdkMetrics import com ibm cloud objectstorage met,java
rics ServiceLatencyProvider import com ibm cloud objectstorage util AWSServiceMetrics class ClientConnectionRequestFactory private static final Log log LogFactory getLog ClientConnectionRequestFactory class private static final Class interfaces ConnectionRequest class Wrapped class static ConnectionRequest wrap ConnectionRequest orig if orig instanceof Wrapped throw new IllegalArgumentException return ConnectionRequest Proxy newProxyInstance https github com aws aws sdk java pull 48 issuecomment 29454423 ClientConnectionRequestFactory class getClassLoader interfaces new Handler orig The handler behind the dynamic proxy for link Conne,java
ctionRequest so that the latency of the link ConnectionRequest get long java util concurrent TimeUnit can be captured private static class Handler implements InvocationHandler private final ConnectionRequest orig Handler ConnectionRequest orig this orig orig Override public Object invoke Object proxy Method method Object args throws Throwable try if get equals method getName ServiceLatencyProvider latencyProvider new ServiceLatencyProvider AWSServiceMetrics HttpClientGetConnectionTime try return method invoke orig args finally AwsSdkMetrics getServiceMetricCollector collectLatency latencyProvider endTiming return method i,java
nvoke orig args catch InvocationTargetException e log debug e throw e getCause ,java
var helpers require helpers var AWS helpers AWS Create a mock service var apiJson metadata apiVersion 2016 11 22 endpointPrefix fake jsonVersion 1 1 protocol json signatureVersion v4 targetPrefix Fake operations fakeOp input type structure required foo members foo idempotencyToken true bar idempotencyToken true baz var mockService new AWS Service paramValidation true mockService api new AWS Model Api apiJson describe AWS EventListeners Core BUILD_IDEMPOTENCY_TOKENS function var buildIdempotencyTokens AWS EventListeners Core BUILD_IDEMPOTENCY_TOKENS it automatically fills in fields marked as idempotent function done var params var req mockService makeRequest fakeOp params build,js
IdempotencyTokens req expect params to eql expect typeof req params foo to equal string expect typeof req params bar to equal string expect typeof req params baz to equal undefined done it will defer to user input if provided function done var params foo token var req mockService makeRequest fakeOp params buildIdempotencyTokens req expect params to eql foo token expect req params foo to equal token expect typeof req params bar to equal string expect typeof req params baz to equal undefined done it will use a version 4 UUID as the token function done var uuidV4Regex new RegExp a zA Z0 9 8 a zA Z0 9 4 4 a zA Z0 9 3 ab89 a zA Z0 9 3 a zA Z0 9 12 var params var req mockService makeRequest fakeOp params buildIdempotencyTokens req expect params to eql expect typeof req params foo to equal string ,js
 expect typeof req params bar to equal string expect typeof req params baz to equal undefined expect req params foo search uuidV4Regex to equal 0 expect req params bar search uuidV4Regex to equal 0 done ,js
import imp import glob import os import shutil import tempfile import unittest TEST_PATH os path dirname os path abspath __file__ SCRIPT_PATH os path join TEST_PATH tools hangul image generator py generator imp load_source hangul image generator SCRIPT_PATH class ImageGeneratorTestCase unittest TestCase classmethod def setUpClass self self expected_labels a b c Create a label file and temporary output directory temp_file tempfile NamedTemporaryFile delete False self label_file temp_file name labels open self label_file w for label in self expected_labels labels write s n label self output_dir tempfile mkdtemp self fonts_dir os path join TEST_PATH test fonts classmethod def tearDownClass self Remove the created label file and output directory os remove self label_file shutil rmtree self output_dir def test_fil,py
e_generation self Test the image generation function generator generate_hangul_images self label_file self fonts_dir self output_dir Check that number of generated images is correct expected_num_images len self expected_labels 1 generator DISTORTION_COUNT num_images len glob glob os path join self output_dir hangul images jpeg self assertEqual expected_num_images num_images Check that the CSV file was properly generated with open os path join self output_dir labels map csv r as f csv_lines f read splitlines for line in csv_lines file_path label line strip split self assertIn jpeg file_path self assertIn label self expected_labels ,py
 NVActivityIndicatorAnimationLineScaleParty swift NVActivityIndicatorView The MIT License MIT Copyright c 2016 Vinh Nguyen Permission is hereby granted free of charge to any person obtaining a copy of this software and associated documentation files the Software to deal in the Software without restriction including without limitation the rights to use copy modify merge publish distribute sublicense and or sell copies of the Software and to permit persons to whom the Software is furnished to do so subject to the following conditions The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software THE SOFTWARE IS PROVIDED AS IS WITHOUT WARRANTY OF ANY KIND EXPRESS OR IMPLIED INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM ,swift
DAMAGES OR OTHER LIABILITY WHETHER IN AN ACTION OF CONTRACT TORT OR OTHERWISE ARISING FROM OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE import UIKit class NVActivityIndicatorAnimationLineScaleParty NVActivityIndicatorAnimationDelegate func setUpAnimation in layer CALayer size CGSize color UIColor let lineSize size width 7 let x layer bounds size width size width 2 let y layer bounds size height size height 2 let durations CFTimeInterval 1 26 0 43 1 01 0 73 let beginTime CACurrentMediaTime let beginTimes CFTimeInterval 0 77 0 29 0 28 0 74 let timingFunction CAMediaTimingFunction name kCAMediaTimingFunctionDefault Animation let animation CAKeyframeAnimation keyPath transform scale animation keyTimes 0 0 5 1 animation timingFunctions timingFunction timingFunction animation ,swift
values 1 0 5 1 animation repeatCount HUGE animation isRemovedOnCompletion false for i in 0 4 let line NVActivityIndicatorShape line layerWith size CGSize width lineSize height size height color color let frame CGRect x x lineSize 2 CGFloat i y y width lineSize height size height animation beginTime beginTime beginTimes i animation duration durations i line frame frame line add animation forKey animation layer addSublayer line ,swift
 package com ibm cloud objectstorage services kms model import java io Serializable import javax annotation Generated import com ibm cloud objectstorage AmazonWebServiceRequest Generated com amazonaws aws java sdk code generator public class CancelKeyDeletionRequest extends com ibm ,java
cloud objectstorage AmazonWebServiceRequest implements Serializable Cloneable private String keyId p The unique identifier for the customer master key CMK for which to cancel deletion p p To specify this value use the unique key ID or the Amazon Resource Name ARN of the CMK Examples ,java
 p ul li p Unique key ID 1234abcd 12ab 34cd 56ef 1234567890ab p li li p Key ARN arn aws kms us east 2 111122223333 key 1234abcd 12ab 34cd 56ef 1234567890ab p li ul p To obtain the unique key ID and key ARN for a given CMK use a ListKeys a or a DescribeKey a p param keyId The unique identifier for the customer master key CMK for which to cancel deletion p p To specify this value use the unique key ID or the Amazon Resource Name ARN of the CMK Examples p ul li p Unique key ID 1234abcd 12ab 34cd 56ef 1234567890ab p li li p Key ARN arn aws kms us east 2 111122223333 key 1234abcd 12ab 34cd 56ef 1234567890ab p l,java
i ul p To obtain the unique key ID and key ARN for a given CMK use a ListKeys a or a DescribeKey a public void setKeyId String keyId this keyId keyId p The unique identifier for the customer master key CMK for which to cancel deletion p p To specify this value use the unique key ID or the Amazon Resource Name ARN of the CMK Examples p ul li p Unique key ID 1234abcd 12ab 34cd 56ef 1234567890ab p li li p Key ARN arn aws kms us east 2 111122223333 key 1234abcd 12ab 34cd 56ef 1234567890ab p li ul p To obtain the unique key ID and key ARN for a given CMK use a ListKeys a or a DescribeKey a p return The unique identifier for the customer master key CMK for which to cancel deletion p ,java
 p To specify this value use the unique key ID or the Amazon Resource Name ARN of the CMK Examples p ul li p Unique key ID 1234abcd 12ab 34cd 56ef 1234567890ab p li li p Key ARN arn aws kms us east 2 111122223333 key 1234abcd 12ab 34cd 56ef 1234567890ab p li ul p To obtain the unique key ID and key ARN for a given CMK use a ListKeys a or a DescribeKey a public String getKeyId return this keyId p The unique identifier for the customer master key CMK for which to cancel deletion p p To specify this value use the unique key ID or the Amazon Resource Name ARN of the CMK Examples p ul li p Unique key,java
 ID 1234abcd 12ab 34cd 56ef 1234567890ab p li li p Key ARN arn aws kms us east 2 111122223333 key 1234abcd 12ab 34cd 56ef 1234567890ab p li ul p To obtain the unique key ID and key ARN for a given CMK use a ListKeys a or a DescribeKey a p param keyId The unique identifier for the customer master key CMK for which to cancel deletion p p To specify this value use the unique key ID or the Amazon Resource Name ARN of the CMK Examples p ul li p Unique key ID 1234abcd 12ab 34cd 56ef 1234567890ab p li li p Key ARN arn aws kms us east 2 111122223333 key 1234abcd 12ab 34cd 56ef 1234567890ab p li ul p To,java
 obtain the unique key ID and key ARN for a given CMK use a ListKeys a or a DescribeKey a return Returns a reference to this object so that method calls can be chained together public CancelKeyDeletionRequest withKeyId String keyId setKeyId keyId return this Override public String toString StringBuilder sb new StringBuilder sb append if getKeyId null sb append KeyId append getKeyId sb append return sb toString Override public boolean equals Object obj if this obj return true if obj null return false if obj instanceof CancelKeyDeletionRequest false ,java
 return false CancelKeyDeletionRequest other CancelKeyDeletionRequest obj if other getKeyId null this getKeyId null return false if other getKeyId null other getKeyId equals this getKeyId false return false return true Override public int hashCode final int prime 31 int hashCode 1 hashCode prime hashCode getKeyId null 0 getKeyId hashCode return hashCode Override public CancelKeyDeletionRequest clone return CancelKeyDeletionRequest super clone ,java
 package com ibm cloud objectstorage profile path cred import org apache commons logging Log import org apache commons logging LogFactory import com ibm cloud objectstorage annotation SdkInternalApi import com ibm cloud objectstorage profile path AwsDirectoryBasePathProvider import java io File Treats the CLI config file as the source of credentials We support this for legacy reasons ideally credentials should be d,java
efined in the separate shared credentials file aws credentials Any credentials defined in the shared credentials file take precedence over credentials sourced from here SdkInternalApi public class CredentialsLegacyConfigLocationProvider extends AwsDirectoryBasePathProvider private static final Log LOG LogFactory getLog CredentialsLegacyConfigLocationProvider class private static final String LEGACY_CONFIG_PROFILES_FILENAME config Override public File getLocation File legacyConfigProfiles new File getAwsDirectory LEGACY_CONFIG_PROFILES_FILENAME if legacyConfigProfiles exists legacyConfigProfiles isFile LOG warn Found the legacy config profiles file at legacyConfigProfiles getAbsolutePath Please move it to the latest default location aws credentials return le,java
gacyConfigProfiles return null ,java
 package com ibm janusgraph utils importer util import java io File import java io FileReader import java io LineNumberReader import java text ParseException import java text SimpleDateFormat import java util Date public,java
 class BatchHelper public static long countLines String filePath throws Exception LineNumberReader lnr new LineNumberReader new FileReader new File filePath try lnr skip Long MAX_VALUE return lnr getLineNumber 1 finally lnr close public static Date convertDate String inputDate throws ParseException TODO Handle time as part of date or separate SimpleDateFormat dateParser null Detect the date format and convert it if inputDate matches 0 9 for int i inputDate length i 4 i inputDate 0 concat inputDate Only numbers Hour Minute format dateParser new SimpleDateFormat Hm else if inputDate matches 0 9 2 A Za z 3 0 9 4 Use dd MMM yyyy format dateParser new SimpleDateFormat dd MMM yyyy else i,java
f inputDate matches 0 9 4 0 9 2 0 9 2 Use yyyy mm dd format dateParser new SimpleDateFormat yyyy mm dd else if inputDate matches 0 9 2 0 9 2 0 9 2 Use dd mm yy format dateParser new SimpleDateFormat dd mm yy else if inputDate matches 0 9 0 9 2 0 9 4 dd mm yyyy dateParser new SimpleDateFormat dd mm yyyy else Default use MM dd yy dateParser new SimpleDateFormat MM dd yy hh mm return dateParser parse inputDate public static Object convertPropertyValue String value Class dataType throws ParseException Object convertedValue null if dataType Integer class convertedValue new Integer value else if dataType Date class convertedValue convertDate value else convertedValue value ,java
 return convertedValue ,java
 package com ibm cloud objectstorage services s3 transfer import com ibm cloud objectstorage annotation NotThreadSafe import com ibm cloud objectstorage annotation SdkTestInternalApi import com ibm cloud objectstorage client builder ExecutorFactory import com ibm cloud objectstorage internal SdkFunction import com ibm cloud objectstorage services s3 AmazonS3 import com ibm cloud objectstorage services s3 AmazonS3ClientBuilder im,java
port com ibm cloud objectstorage services s3 transfer internal TransferManagerUtils import java util concurrent ExecutorService NotThreadSafe public final class TransferManagerBuilder private static final SdkFunction TransferManagerParams TransferManager DEFAULT_TRANSFER_MANAGER_FACTORY new SdkFunction TransferManagerParams TransferManager Override public TransferManager apply TransferManagerParams params return new TransferManager params private final SdkFunction TransferManagerParams TransferManager transferManagerFactory private AmazonS3 s3Client private ExecutorFactory executorFactory private Boolean shutDownThreadPools private Long minimumUploadPartSize private Long multipartUploadThreshold private Long multipartCopyThreshold private Long multipart,java
CopyPartSize private Boolean disableParallelDownloads public static TransferManagerBuilder standard return new TransferManagerBuilder public static TransferManager defaultTransferManager return standard build private TransferManagerBuilder this DEFAULT_TRANSFER_MANAGER_FACTORY SdkTestInternalApi TransferManagerBuilder SdkFunction TransferManagerParams TransferManager transferManagerFactory this transferManagerFactory transferManagerFactory public final AmazonS3 getS3Client return s3Client ,java
Sets the low level client used to make the service calls to Amazon S3 param s3Client Client implementation to use public final void setS3Client AmazonS3 s3Client this s3Client s3Client public final TransferManagerBuilder withS3Client AmazonS3 s3Client setS3Client s3Client return this private AmazonS3 resolveS3Client return s3Client null AmazonS3ClientBuilder defaultClient s3Client public final ExecutorFactory getExecutorFactory return executorFactory Sets a new link ExecutorFactory for the builder The factory is invoked for each transfer manager created th,java
rough the builder param executorFactory New executor factory to use public final void setExecutorFactory ExecutorFactory executorFactory this executorFactory executorFactory public final TransferManagerBuilder withExecutorFactory ExecutorFactory executorFactory setExecutorFactory executorFactory return this private ExecutorService resolveExecutorService return executorFactory null TransferManagerUtils createDefaultExecutorService executorFactory newExecutor public final,java
 Boolean isShutDownThreadPools return shutDownThreadPools public final void setShutDownThreadPools Boolean shutDownThreadPools this shutDownThreadPools shutDownThreadPools By default when the transfer manager is shut down the underlying link ExecutorService is also shut down For cases where the same thread pool is reused across different workloads you can set this option to false to disable that behavior param shutDownThreadPools True to shut down thread pools on transfer manager shutdown ,java
false otherwise return This object for method chaining public final TransferManagerBuilder withShutDownThreadPools Boolean shutDownThreadPools setShutDownThreadPools shutDownThreadPools return this private Boolean resolveShutDownThreadPools return shutDownThreadPools null Boolean TRUE shutDownThreadPools public final Long getMinimumUploadPartSize return minimumUploadPartSize Sets the minimum part size for upload parts Decreasing the minimum part size will cause multipart uploads to be split into a larger number of smaller parts Setting this value too low can have a negative effect on transfer speeds since it will cause extra latency and network communication for each part param minimumUploadPartSize New minimum threshold fo,java
r upload part size public final void setMinimumUploadPartSize Long minimumUploadPartSize this minimumUploadPartSize minimumUploadPartSize public final TransferManagerBuilder withMinimumUploadPartSize Long minimumUploadPartSize setMinimumUploadPartSize minimumUploadPartSize return this public final Long getMultipartUploadThreshold return multipartUploadThres,java
hold public final void setMultipartUploadThreshold Long multipartUploadThreshold this multipartUploadThreshold multipartUploadThreshold Sets the size threshold in bytes for when to use multipart uploads Uploads over this size will autom,java
atically use a multipart upload strategy while uploads smaller than this threshold will use a single connection to upload the whole object p Multipart uploads are easier to recover from and also potentially faster than single part uploads especially when the upload parts can be uploaded in parallel as with files Because there is additional network communication small uploads are still recommended to use a single connection for the upload p param multipartUploadThreshold Threshold in which multipart uploads will be performed return This object for method chaining public final TransferManagerBuilder withMultipartUploadThreshold Long multipartUploadThreshold setMultipartUploadThreshold multipartUploadThreshold return this public final Long getMultipartCopyThreshold return m,java
ultipartCopyThreshold public final void setMultipartCopyThreshold Long multipartCopyThreshold this multipartCopyThreshold multipartCopyThreshold Sets the size threshold in bytes for when to use multi part copy Copy requests for objects over this size will automatically use a multi part copy strategy while copy requests for objects smaller than this threshold will use a single connection to copy the whole object param multipartCopyThreshold Threshold in which multipart copies will be performed return This object for m,java
ethod chaining public final TransferManagerBuilder withMultipartCopyThreshold Long multipartCopyThreshold setMultipartCopyThreshold multipartCopyThreshold return this public final Long getMultipartCopyPartSize return multipartCopyPartSize public final void setMultipartCopyPartSize Long multipartCopyPartSize this multipartCopyPartSize multipartCopyPartSize Sets the minimum size in bytes of each part when a multi part copy operation is carried out Decreasing the minimum part size will cause a large,java
 number of copy part requests being initiated param multipartCopyPartSize New minimum threshold for copy part size return This object for method chaining public final TransferManagerBuilder withMultipartCopyPartSize Long multipartCopyPartSize setMultipartCopyPartSize multipartCopyPartSize return this Returns if the parallel downloads are disabled or not By default the value is set to false p TransferManager automatically detects and downloads a multipart object in parallel Setting this option to true will disable parallel downloads p p During parallel downloads each part is downloaded to a temporary file gets merged into the final destination file and will be deleted These temporary files uses disk space temporarily Disable parallel downloads if your system do not have enough space to store these files during download p p ,java
 Disabling parallel downloads might reduce performance for large files p return true if parallel downloads are disabled otherwise false public Boolean isDisableParallelDownloads return disableParallelDownloads Sets the option to disable parallel downloads By default the value is set to false p TransferManager automatically detects and downloads a multipart object in parallel Setting this option to true will disable parallel downloads p p During parallel downloads each part is downloaded to a temporary file gets merged into the final destination file and will be deleted These temporary files uses disk space temporarily Disable parallel downloads if your system do not have enough space to store these files during download p p Disabling parallel downloads might reduce performance for large files p param di,java
sableParallelDownloads boolean value to disable parallel downloads public void setDisableParallelDownloads Boolean disableParallelDownloads this disableParallelDownloads disableParallelDownloads Sets the option to disable parallel downloads By default the value is set to false p TransferManager automatically detects and downloads a multipart object in parallel Setting this option to true will disable parallel downloads p p During parallel downloads each part is downloaded to a temporary file gets merged into the final destination file and will be deleted These temporary files uses disk space temporarily Disable parallel downloads if your system do not have enough space to store these files during download p p Disabling parallel downloads might reduce performance for large files p param disableParallelDownloads boolean value to disa,java
ble parallel downloads return this object for method changing public TransferManagerBuilder withDisableParallelDownloads Boolean disableParallelDownloads setDisableParallelDownloads disableParallelDownloads return this public TransferManagerBuilder disableParallelDownloads return withDisableParallelDownloads Boolean TRUE private TransferManagerConfiguration resolveConfiguration TransferManagerConfiguration configuration new TransferManagerConfiguration if this minimumUploadPartSize null configuration setMinimumUploadPartSize minimumUploadPartSize if this multipartCopyPartSize null configuration set,java
MultipartCopyPartSize multipartCopyPartSize if this multipartCopyThreshold null configuration setMultipartCopyThreshold multipartCopyThreshold if this multipartUploadThreshold null configuration setMultipartUploadThreshold multipartUploadThreshold if this disableParallelDownloads null configuration setDisableParallelDownloads disableParallelDownloads return configuration TransferManagerParams getParams return new TransferManagerParams withS3Client resolveS3Client withExecutorService resolveExecutorService withShutDownThreadPools resolveShutDownThreadPools withTransferManagerConfiguration resolveConfiguration public final ,java
TransferManager build return transferManagerFactory apply getParams ,java
 package com ibm cloud objectstorage auth import java util Date import com ibm cloud objectstorage annotation SdkProtectedApi import com ibm cloud objectstorage annotation SdkTestInternalApi SdkProtectedApi public interface SdkClock Standard implementation that calls out to link System currentTimeMillis Used in pr,java
oduction code SdkClock STANDARD new SdkClock Override public long currentTimeMillis return System currentTimeMillis long currentTimeMillis final class MockClock implements SdkClock private final long mockedTime public MockClock Date mockedTime this mockedTime getTime public MockClock long mockedTime this mockedTime mockedTime Override public long currentTimeMillis return mockedTime final class Instance private static SdkClock clock STANDARD public static SdkClock get return clock Should only be used by tests to mock the clock param newClock New clock to ,java
use SdkTestInternalApi public static void set SdkClock newClock clock newClock SdkTestInternalApi public static void reset clock STANDARD ,java
var fs require fs var path require path var CUSTOM_CONFIG_ENUMS DUALSTACK FILE_NAME config_use_dualstack INTERFACE UseDualstackConfigOptions function TSGenerator options this _sdkRootDir options SdkRootDirectory process cwd this _apiRootDir path join this _sdkRootDir apis this _metadataPath path join this _apiRootDir metadata json this _clientsDir path join this _sdkRootDir clients this metadata null this typings this fillApiModelFileNames this _apiRootDir TSGenerator prototype loadMetadata function loadMetadata var metadataFile fs readFileSync this _metadataPath this metadata JSON parse metadataFile return this metadata TSGenerator prototype fillApiModelFileNames function fillApiModelFileNames apisPath var modelPaths fs readdirSyn,js
c apisPath if this metadata this loadMetadata var metadata this metadata sort paths so latest versions appear first modelPaths modelPaths sort function sort a b if a b return 1 else if a b return 1 else return 0 Only get latest version of models var foundModels Object create null modelPaths forEach function modelFileName var match modelFileName match d 4 d 2 d 2 normal json i if match var model match 1 add version var version match 2 substring 1 if foundModels model foundModels model latestFileName modelFileName versions version else foundModels model versions push version ,js
 now update the metadata var keys Object keys metadata keys forEach function key var modelName metadata key prefix key var modelInfo foundModels modelName metadata key api_path modelInfo latestFileName find waiters file var baseName modelInfo latestFileName split 0 if modelPaths indexOf baseName waiters2 json 0 metadata key waiters_path baseName waiters2 json add versions if metadata key versions metadata key versions metadata key versions concat metadata key versions modelInfo versions TSGenerator prototype generateDocumentClientInterfaces function generateDocumentClientInterfaces tabCount tabCount tabCount 0 var self this get the dynamodb model var dynamodbModel this loadServiceApi dyna,js
modb var code stub Blob interface code this tabs tabCount interface Blob n generate shapes var modelShapes dynamodbModel shapes iterate over each shape var shapeKeys Object keys modelShapes shapeKeys forEach function shapeKey var modelShape modelShapes shapeKey ignore exceptions if modelShape exception return overwrite AttributeValue if shapeKey AttributeValue code self generateDocString A JavaScript object or native type tabCount code self tabs tabCount export type shapeKey any n return code self generateTypingsFromShape shapeKey modelShape tabCount return code TSGenerator prototype loadServiceApi function loadServiceApi serviceIdentifier first find the correct i,js
dentifier var metadata this metadata var serviceFilePath path join this _apiRootDir metadata serviceIdentifier api_path var serviceModelFile fs readFileSync serviceFilePath var serviceModel JSON parse serviceModelFile load waiters file if it exists var waiterFilePath if metadata serviceIdentifier waiters_path waiterFilePath path join this _apiRootDir metadata serviceIdentifier waiters_path var waiterModelFile fs readFileSync waiterFilePath var waiterModel JSON parse waiterModelFile serviceModel waiters waiterModel waiters return serviceModel TSGenerator prototype checkRequired function checkRequired list member if list indexOf member 0 return true return false TSGenerator prototype tabs function tabs count var code ,js
 for var i 0 i count i code return code TSGenerator prototype transformDocumentation function transformDocumentation documentation if documentation return documentation documentation replace n gm documentation documentation replace g return documentation TSGenerator prototype generateDocString function generateDocString documentation tabCount tabCount tabCount 0 var code code this tabs tabCount n return code Returns an array of custom configuration options based on a service identiffier Custom,js
 configuration options are determined by checking the metadata json file TSGenerator prototype generateCustomConfigFromMetadata function generateCustomConfigFromMetadata serviceIdentifier some services have additional configuration options that are defined in the metadata json file i e dualstackAvailable useDualstack create reference to custom options var customConfigurations var serviceMetadata this metadata serviceIdentifier loop through metadata members for var memberName in serviceMetadata if serviceMetadata hasOwnProperty memberName continue check configs switch memberName case dualstackAvailable customConfigurations push CUSTOM_CONFIG_ENUMS DUALSTACK break return customConfigurations TSGenerator prototype generateSafeShapeName function generateSafeShapeName name blacklist blacklist blacklist ,js
 if blacklist indexOf name 0 return _ name return name TSGenerator prototype generateTypingsFromShape function generateTypingsFromShape shapeKey shape tabCount customClassNames some shapes shouldn t be generated if they are javascript primitives var jsPrimitives string boolean number if jsPrimitives indexOf shapeKey 0 return if Date Blob indexOf shapeKey 0 shapeKey _ shapeKey In at least one cloudfront Signer case a class on a service namespace clashes with a shape shapeKey this generateSafeShapeName shapeKey customClassNames var self this var code tabCount tabCount 0 var tabs this tabs var type shape type if type structure code tabs tabCount export interface shapeKey n var members shape membe,js
rs cycle through members var memberKeys Object keys members memberKeys forEach function memberKey docs var member members memberKey if member documentation code self generateDocString member documentation tabCount 1 var required self checkRequired shape required memberKey var memberType member shape memberType self generateSafeShapeName memberType concat customClassNames Date Blob code tabs tabCount 1 memberKey required memberType n code tabs tabCount n else if type list code tabs tabCount export type shapeKey this generateSafeShapeName shape member shape customClassNames n else if type map code tabs tabCount export type shapeKey key string th,js
is generateSafeShapeName shape value shape customClassNames n else if type string type character var stringType string if Array isArray shape enum stringType shape enum map function s return s join stringType code tabs tabCount export type shapeKey stringType n else if double long short biginteger bigdecimal integer float indexOf type 0 code tabs tabCount export type shapeKey number n else if type timestamp code tabs tabCount export type shapeKey Date n else if type boolean code tabs tabCount export type shapeKey boolean n else if type blob type binary code tabs tabCount export type shapeKey Buffer Uint8Array Blob string n ,js
 return code TSGenerator prototype generateTypingsFromOperations function generateTypingsFromOperations className operation operationName tabCount var code tabCount tabCount 0 var tabs this tabs var input operation input var output operation output operationName operationName charAt 0 toLowerCase operationName substring 1 var inputShape input className Types input shape var outputShape output className Types output shape if input code this generateDocString operation documentation tabCount code tabs tabCount operationName params inputShape callback err AWSError data outputShape void Request outputShape AWSError n code this generateDocString operation documentation tabCount code tabs tabCount operationName callback err ,js
 AWSError data outputShape void Request outputShape AWSError n return code TSGenerator prototype generateConfigurationServicePlaceholders function generateConfigurationServicePlaceholders var self this var metadata this metadata Iterate over every service var serviceIdentifiers Object keys metadata var code var configCode var versionsCode code import as AWS from clients all n configCode export abstract class ConfigurationServicePlaceholders n versionsCode export interface ConfigurationServiceApiVersions n serviceIdentifiers forEach function serviceIdentifier var className self metadata serviceIdentifier name configCode self tabs 1 serviceIdentifier AWS className Types ClientConfiguration n versionsCode self tabs 1 serviceIdentifier ,js
 AWS className Types apiVersion n configCode n versionsCode n code configCode versionsCode this writeTypingsFile config_service_placeholders path join this _sdkRootDir lib code TSGenerator prototype getServiceApiVersions function generateServiceApiVersions serviceIdentifier var metadata this metadata var versions metadata serviceIdentifier versions transform results to get rid of and sort versions versions map function version return version replace sort return versions TSGenerator prototype generateTypingsFromWaiters function generateTypingsFromWaiters className waiterState waiter underlyingOperation tabCount var code tabCount tabCount 0 var operationName waiter operation charAt 0 toLowerCase waiter operation substring 1 waiterState waiterState charAt ,js
0 toLowerCase waiterState substring 1 var docString Waits for the waiterState state by periodically calling the underlying className operationName operation every waiter delay seconds at most waiter maxAttempts times if waiter description docString waiter description get input and output var inputShape var outputShape if underlyingOperation input inputShape className Types underlyingOperation input shape if underlyingOperation output outputShape className Types underlyingOperation output shape code this generateDocString docString tabCount code this tabs tabCount waitFor state waiterState params inputShape callback err AWSError data outputShape void Request outputShape AWSError n code this generateDocString docString tabCount code t,js
his tabs tabCount waitFor state waiterState callback err AWSError data outputShape void Request outputShape AWSError n return code TSGenerator prototype includeCustomService function includeCustomService serviceIdentifier check services directory var servicesDir path join this _sdkRootDir lib services var fileNames fs readdirSync servicesDir fileNames fileNames filter function fileName return fileName serviceIdentifier d ts return fileNames length TSGenerator prototype generateCustomNamespaceTypes function generateCustomNamespaceTypes serviceIdentifier className var self this var tsCustomizationsJson require ts customizations var customClasses var code var serviceInfo tsCust,js
omizationsJson serviceIdentifier null exit early if no customizations found if serviceInfo return null code declare namespace className n generate import code var importCode serviceInfo forEach function data var aliases var imports data imports imports forEach function pair aliases push pair name as pair alias code self tabs 1 export import pair name pair alias n customClasses push pair name if aliases length importCode import aliases join from data path n code n return importCode importCode namespaceCode code customClassNames customClasses TSGenerator prototype processServiceModel functio,js
n processServiceModel serviceIdentifier var model this loadServiceApi serviceIdentifier var self this var code var className this metadata serviceIdentifier name var customNamespaces this generateCustomNamespaceTypes serviceIdentifier className var customClassNames customNamespaces customNamespaces customClassNames generate imports code import Request from lib request n code import Response from lib response n code import AWSError from lib error n var hasCustomizations this includeCustomService serviceIdentifier var parentClass hasCustomizations className Customizations Service if hasCustomizations code import parentClass from lib services serviceIdentifier n else code import parentClass from lib service n code import ServiceConfigurationOptions from lib,js
 service n get any custom config options var customConfig this generateCustomConfigFromMetadata serviceIdentifier var hasCustomConfig customConfig length var customConfigTypes ServiceConfigurationOptions code import ConfigBase as Config from lib config n if hasCustomConfig generate import statements and custom config type customConfig forEach function config code import config INTERFACE from lib config FILE_NAME n customConfigTypes push config INTERFACE import custom namespaces if customNamespaces code customNamespaces importCode code interface Blob n generate methods var modelOperations model operations var operationKeys Object keys modelOperations code declare class className extends parentClass n create constructor code this generateDo,js
cString Constructs a service object This object has one method for each API operation 1 code this tabs 1 constructor options className Types ClientConfiguration n code this tabs 1 config Config className Types ClientConfiguration n operationKeys forEach function operationKey code self generateTypingsFromOperations className modelOperations operationKey operationKey 1 generate waitFor methods var waiters model waiters Object create null var waiterKeys Object keys waiters waiterKeys forEach function waitersKey var waiter waiters waitersKey var operation modelOperations waiter operation code self generateTypingsFromWaiters className waitersKey waiter operation 1 code n check for static classes on namespace if customNamespaces code customNamespaces namespaceCode shapes should map,js
 to interfaces var modelShapes model shapes iterate over each shape var shapeKeys Object keys modelShapes code declare namespace className n shapeKeys forEach function shapeKey var modelShape modelShapes shapeKey ignore exceptions if modelShape exception return code self generateTypingsFromShape shapeKey modelShape 1 customClassNames code this generateDocString A string in YYYY MM DD format that represents the latest possible API version that can be used in this service Specify latest to use the latest possible version 1 code this tabs 1 export type apiVersion this getServiceApiVersions serviceIdentifier join latest string n code this tabs 1 export interface ClientApiVersions n code this generateDocString A string in YYYY MM DD format that represents the latest possible API version that can be used in t,js
his service Specify latest to use the latest possible version 2 code this tabs 2 apiVersion apiVersion n code this tabs 1 n code this tabs 1 export type ClientConfiguration customConfigTypes join ClientApiVersions n export interfaces under Types namespace for backwards compatibility code this generateDocString Contains interfaces for use with the className client 1 code this tabs 1 export import Types className n code n code export className n return code TSGenerator prototype writeTypingsFile function writeTypingsFile name directory code fs writeFileSync path join directory name d ts code TSGenerator prototype generateAllClientTypings function generateAllClientTypings var self this,js
 var metadata this metadata Iterate over every service var serviceIdentifiers Object keys metadata serviceIdentifiers forEach function serviceIdentifier var code self processServiceModel serviceIdentifier self writeTypingsFile serviceIdentifier self _clientsDir code TSGenerator prototype generateGroupedClients function generateGroupedClients var metadata this metadata var allCode var browserCode Iterate over every service var serviceIdentifiers Object keys metadata serviceIdentifiers forEach function serviceIdentifier var className metadata serviceIdentifier name var code export import className require serviceIdentifier n allCode code if metadata serviceIdentifier cors browserCode code th,js
is writeTypingsFile all this _clientsDir allCode this writeTypingsFile browser_default this _clientsDir browserCode module exports TSGenerator ,js
 package sample chirper load api import java util Optional import javax annotation Nullable import javax annotation concurrent Immutable import com fasterxml jackson annotation JsonCreator import com fasterxml jackson databind annotation JsonDeserialize import com google common base MoreObjects import com google common base Preconditions Immutable JsonDeserialize public final class TestParams public final int users public final int friends public final int chirps public final int clients public final int parallelism public final Optional String userIdPrefix public TestParams this 1000 10 100000 10 10 Optional empty JsonCreator public TestParams int users int friends int chirps int clients int parallelism Optional String userIdPrefix this users users this friends friends this chirps chirps this clients clients this parallelism paralle,java
lism this userIdPrefix userIdPrefix Override public boolean equals Nullable Object another if this another return true return another instanceof TestParams equalTo TestParams another private boolean equalTo TestParams another return users another users friends another friends chirps another chirps clients another clients parallelism another parallelism userIdPrefix equals another userIdPrefix Override public int hashCode int h 31 h h 17 users h h 17 friends h h 17 chirps h h 17 clients h h 17 parallelism h h 17 userIdPrefix hashCode return h Override public String toString return MoreObjects toStringHelper TestParams add users users add friends friends add chirps chirps add clients clients add parallelism parallelism add userIdPrefix userIdPrefix ,java
 toString ,java
 Copyright c 2001 2009 JGoodies Karsten Lentzsch All Rights Reserved Redistribution and use in source and binary forms with or without modification are permitted provided that the following conditions are met o Redistributions of source code must retain the above copyright notice this list of conditions and the following disclaimer o Redistributions in binary form must reproduce the above copyright notice this list of conditions and the following disclaimer in the documentation and or other materials provided with the distribution o Neither the name of JGoodies Karsten Lentzsch nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY EXPRESS OR IMPLIED WARRANTIES INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR ,java
A PARTICULAR PURPOSE ARE DISCLAIMED IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT INDIRECT INCIDENTAL SPECIAL EXEMPLARY OR CONSEQUENTIAL DAMAGES INCLUDING BUT NOT LIMITED TO PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES LOSS OF USE DATA OR PROFITS OR BUSINESS INTERRUPTION HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY WHETHER IN CONTRACT STRICT LIABILITY OR TORT INCLUDING NEGLIGENCE OR OTHERWISE ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE package com jgoodies looks common import java awt Component import java awt Dimension import java awt Graphics import javax swing Icon import com jgoodies looks Options public class MinimumSizedIcon implements Icon private final Icon i,java
con private final int width private final int height private final int xOffset private final int yOffset public MinimumSizedIcon this null public MinimumSizedIcon Icon icon Dimension minimumSize Options getDefaultIconSize this icon icon int iconWidth icon null 0 icon getIconWidth int iconHeight icon null 0 icon getIconHeight width Math max iconWidth Math max 20 minimumSize width height Math max iconHeight Math max 20 minimumSize height xOffset Math max 0 width iconWidth 2 yOffset Math max 0 height iconHeight 2 public int getIconHeight return height public int getIconWidth return width public void paintIcon Component c Graphics g int x int y if icon null icon paintIcon c g x xOffset y yOffset ,java
 MealViewController swift FoodTracker Created by Jane Appleseed on 10 17 16 Copyright 2016 Apple Inc All rights reserved import UIKit import os log class MealViewController UIViewController UITextFieldDelegate UIImagePickerControllerDelegate UINavigationControllerDelegate MARK Properties IBOutlet weak var nameTextField UITextField IBOutlet weak var photoImageView UIImageView IBOutlet weak var ratingControl RatingControl IBOutlet weak var saveButton UIBarButtonItem var meal Meal override func viewDidLoad super viewDidLoad Handle the text field s user input through delegate callbacks nameTextField delegate self Set up views if editing an existing Meal if let meal meal ,swift
 navigationItem title meal name nameTextField text meal name photoImageView image UIImage data meal photo ratingControl rating meal rating Enable the Save button only if the text field has a valid Meal name updateSaveButtonState MARK UITextFieldDelegate func textFieldDidBeginEditing _ textField UITextField Disable the Save button while editing saveButton isEnabled false func textFieldShouldReturn _ textField UITextField Bool Hide the keyboard textField resignFirstResponder return true func textFieldDidEndEditing _ textField UITextField updateSaveButtonState navigationItem title textField text MARK UIImagePickerControllerDelegate func imagePickerControllerDidCancel _ picker UIImagePickerController Dismiss the picker if the user canceled ,swift
 dismiss animated true completion nil func imagePickerController _ picker UIImagePickerController didFinishPickingMediaWithInfo info String Any The info dictionary may contain multiple representations of the image You want to use the original guard let selectedImage info UIImagePickerControllerOriginalImage as UIImage else fatalError Expected a dictionary containing an image but was provided the following info Set photoImageView to display the selected image photoImageView image selectedImage Dismiss the picker dismiss animated true completion nil MARK Navigation IBAction func cancel _ sender UIBarButtonItem Depending on style of presentation modal or push presentation this view controller needs to be dismissed in two different ways let isPresentingInAddMealMode presentingViewController is UIN,swift
avigationController if isPresentingInAddMealMode dismiss animated true completion nil else if let owningNavigationController navigationController owningNavigationController popViewController animated true else fatalError The MealViewController is not inside a navigation controller This method lets you configure a view controller before it s presented override func prepare for segue UIStoryboardSegue sender Any super prepare for segue sender sender Configure the destination view controller only when the save button is pressed guard let button sender as UIBarButtonItem button saveButton else os_log The save button was not pressed cancelling log OSLog default type debug return let name nameTextField text let photo photoImageView imag,swift
e let rating ratingControl rating Set the meal to be passed to MealTableViewController after the unwind segue meal Meal name name photo UIImageJPEGRepresentation photo 1 rating rating MARK Actions IBAction func selectImageFromPhotoLibrary _ sender UITapGestureRecognizer Hide the keyboard nameTextField resignFirstResponder UIImagePickerController is a view controller that lets a user pick media from their photo library let imagePickerController UIImagePickerController Only allow photos to be picked not taken imagePickerController sourceType photoLibrary Make sure ViewController is notified when the user picks an image imagePickerController delegate self present imagePickerController animated true completion nil MARK Private Methods private func updateSaveButtonState ,swift
 Disable the Save button if the text field is empty let text nameTextField text saveButton isEnabled text isEmpty ,swift
 package psdi app bim viewer lmv import java rmi RemoteException import psdi mbo Mbo import psdi mbo MboServerInterface import psdi mbo MboSet import psdi util MXException public class ModelLinkSet extends MboSet implements ModelLinkSetRemote Construct the set of Non Persistent Custom Mbos param ms The MboServerInterface NonPersistentCustomMboSet uses to access ,java
internals of the MXServer public ModelLinkSet MboServerInterface ms throws RemoteException super ms Override protected Mbo getMboInstance MboSet ms throws MXException RemoteException return new ModelLink ms ,java
 node js starter application for Bluemix This application uses express as its web server for more info see http expressjs com var express require express cfenv provides access to your Cloud Foundry environment for more info see https www npmjs com package cfenv var cfenv require cfenv create a new express server var app express serve the files out of public as our main files app use express static __dirname public get the app environment from Cloud Foundry var appEnv cfenv getAppEnv start server on the specified port and binding host app listen appEnv port 0 0 0 0 function print a message when the server starts listening console log server starting on appEnv url ,js
 package com ibm cloud objectstorage partitions model import com fasterxml jackson annotation JsonProperty import com ibm cloud objectstorage util ValidationUtils public class Region private final String description public Region JsonProperty value description String description this description Validat,java
ionUtils assertNotNull description Region description public String getDescription return description ,java
 package com ibm cloud objectstorage waiters import com ibm cloud objectstorage AmazonServiceException import com ibm cloud objectstorage annotation SdkProtectedApi SdkProtectedApi public class HttpFailureStatusAcceptor Output extends WaiterAcceptor Output private final int expectedStatusCode private final WaiterState waiterState public HttpFailureStatusAcceptor int expectedStatusCode WaiterState waiterState ,java
 this expectedStatusCode expectedStatusCode this waiterState waiterState Override public boolean matches AmazonServiceException ase return expectedStatusCode ase getStatusCode Override public WaiterState getState return waiterState ,java
 bin bash Copyright 2017 IBM Corp Licensed under the Apache License Version 2 0 the License you may not use this file except in compliance with the License You may obtain a copy of the License at http www apache org licenses LICENSE 2 0 Unless required by applicable law or agreed to in writing software distributed under the License is distributed on an AS IS BASIS WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND either express or implied See the License for the specific language governing permissions and limitations under the License IBM Storage Enabler for Containers uninstall script The script uninstalls following IBM Storage Enabler for Containers Ubiquity components from the Kubernetes cluster IBM Storage,sh
 Enabler for Containers IBM Storage Dynamic Provisioner for Kubernetes IBM Storage FlexVolume for Kubernetes In addition it uninstalls the Ubiquity data stored in PV ibm ubiquity db Delete the following components in the given order 1 ubiquity db deployment Wait until the deletion is complete 2 PVC for the ibm ubiquity db Wait until the deletion of PVC and PV is complete 3 Storage class that match for the UbiquityDB PVC 4 ubiquity k8s provisioner deployment 5 k8s config configmap 6 ubiquity k8s flex daemonset 7 ubiquity deployment 8 ubiquity service 9 ubiquity db service Note The script deletes the ubiquity k8s flex daemonset but it does not delete the Flex driver from the nodes It is not mandatory to delete the Flex driver To delete the Flex driver manually use the following procedure for each node 1 Remove the Flex directory usr libexec kubernetes kubelet plugins volume exec ibm ubiquity k8s,sh
 flex 2 Restart the kubelet service function usage cmd basename 0 echo USAGE cmd n namespace h echo Options echo n namespace By default it is ubiquity namespace echo h Display this usage exit 1 Variables scripts dirname 0 YML_DIR yamls UBIQUITY_DB_PVC_NAME ibm ubiquity db UTILS scripts ubiquity_lib sh K8S_CONFIGMAP_FOR_PROVISIONER k8s config FLEX_K8S_DIR usr libexec kubernetes kubelet plugins volume exec ibm ubiquity k8s flex Handle flags NS ubiquity default namespace while getopts n opt do case opt in n NS OPTARG h usage echo Invalid option OPTARG 2 usage echo Option OPTARG requires an argument 2 usage esac done nsf namespace NS namespace flag for kubectl command kubectl_delete kubectl delete nsf ig,sh
nore not found true Validations d YML_DIR echo Error YML directory YML_DIR does not exist exit 1 f UTILS echo Error UTILS file is not found exit 3 kubectl get namespace NS dev null 2 1 echo Error NS namespace does not exist Stop the uninstall process exit 3 UTILS include utils for wait function and status echo Attention Uninstall PRODUCT_NAME will delete all Ubiquity components including ubiquity db credentials and namespace read p Are you sure y n yn if yn y then echo Skip uninstall exit 0 fi echo Start to uninstall PRODUCT_NAME from namespace NS First phase delete the ubiquity db deployment and ubiquity db pvc before deleting ubiquity and provisioner if kubectl get nsf deployment ubiquity db dev null 2 1 then kubectl_delete f YML_DIR UBIQUITY_DB_DEPLOY_YML echo Wait for ubiquity db deployment deletion wait_for_item_to_delete deployment ubiquit,sh
y db 10 4 NS wait_for_item_to_delete pod ubiquity db 10 4 regex NS to match the prefix of the pod fi pvname kubectl get nsf pvc UBIQUITY_DB_PVC_NAME no headers o custom columns name spec volumeName kubectl_delete f YML_DIR ubiquity db pvc yml echo Waiting for PVC UBIQUITY_DB_PVC_NAME and PV pvname to be deleted before deleting Ubiquity and Provisioner wait_for_item_to_delete pvc UBIQUITY_DB_PVC_NAME 10 3 NS n pvname wait_for_item_to_delete pv pvname 10 3 NS Second phase Delete all the stateless components kubectl_delete f YML_DIR storage class yml kubectl_delete f YML_DIR UBIQUITY_PROVISIONER_DEPLOY_YML kubectl_delete configmap K8S_CONFIGMAP_FOR_PROVISIONER kubectl_delete f YML_DIR UBIQUITY_FLEX_DAEMONSET_YML kubectl_delete f YML_DIR UBIQUITY_DEPLOY_YML kubectl_delete f YML_DIR ubiquity configmap yml kubectl_delete f YML_DIR SCBE_CRED_YML kubectl_delete f YML_DIR UBIQUITY_DB_CRED_YML ku,sh
bectl_delete f YML_DIR ubiquity service yml kubectl_delete f YML_DIR ubiquity db service yml kubectl_delete f YML_DIR ubiquity namespace yml echo echo PRODUCT_NAME uninstall finished ,sh
 Copyright c 2012 2013 Mitch Garnaat http garnaat org Copyright 2012 2016 Amazon com Inc or its affiliates All Rights Reserved Licensed under the Apache License Version 2 0 the License You may not use this file except in compliance with the License A copy of the License is located at http aws amazon com apache2 0 or in the license file accompanying this file This file is distributed on an AS IS BASIS WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND either express or implied See the License for the specific language governing permissions and limitations under the License from datetime import datetime timedelta import mock import os from dateutil tz import tzlocal tzutc from ibm_botocore import credentials from ibm_botocore utils import ContainerMetadataFetcher from ibm_botocore credentials import EnvProvider create_assume_role_refresher import ibm_botocore exceptions import ibm_botocore session from tests import unittest BaseEnvVar IntegerRefresher Pa,py
ssed to session to keep it from finding default config file TESTENVVARS config_file None AWS_CONFIG_FILE None raw_metadata foobar Code Success LastUpdated 2012 12 03T14 38 21Z AccessKeyId foo SecretAccessKey bar Token foobar Expiration 2012 12 03T20 48 03Z Type AWS HMAC post_processed_metadata role_name foobar access_key raw_metadata foobar AccessKeyId secret_key raw_metadata foobar SecretAccessKey token raw_metadata foobar Token expiry_time raw_metadata foobar Expiration def path filename return os path join os path dirname __file__ cfg filename class TestCredentials BaseEnvVar def _ensure_credential_is_normalized_as_unicode self access secret c credentials Credentials access secret self assertTrue isinstance c access_key type u u self assertTrue is,py
instance c secret_key type u u def test_detect_nonascii_character self self _ensure_credential_is_normalized_as_unicode foo xe2 x80 x99 bar xe2 x80 x99 def test_unicode_input self self _ensure_credential_is_normalized_as_unicode u foo u bar class TestRefreshableCredentials TestCredentials def setUp self super TestRefreshableCredentials self setUp self refresher mock Mock self future_time datetime now tzlocal timedelta hours 24 self expiry_time datetime now tzlocal timedelta minutes 30 self metadata access_key NEW ACCESS secret_key NEW SECRET token NEW TOKEN expiry_time self future_time isoformat role_name rolename self refresher return_value self metadata self mock_time mock Mock self creds credentials RefreshableCreden,py
tials ORIGINAL ACCESS ORIGINAL SECRET ORIGINAL TOKEN self expiry_time self refresher iam role time_fetcher self mock_time def test_refresh_needed self The expiry time was set for 30 minutes ago so if we say the current time is utcnow then we should need a refresh self mock_time return_value datetime now tzlocal self assertTrue self creds refresh_needed We should refresh creds if we try to access access_key or any of the cred vars self assertEqual self creds access_key NEW ACCESS self assertEqual self creds secret_key NEW SECRET self assertEqual self creds token NEW TOKEN def test_no_refresh_needed self The expiry time was 30 minutes ago let s say it s an hour ago currently That would mean we don t need a refresh self mock_time return_value datetime now tzlocal timede,py
lta minutes 60 self assertTrue not self creds refresh_needed self assertEqual self creds access_key ORIGINAL ACCESS self assertEqual self creds secret_key ORIGINAL SECRET self assertEqual self creds token ORIGINAL TOKEN def test_get_credentials_set self We need to return a consistent set of credentials to use during the signing process self mock_time return_value datetime now tzlocal timedelta minutes 60 self assertTrue not self creds refresh_needed credential_set self creds get_frozen_credentials self assertEqual credential_set access_key ORIGINAL ACCESS self assertEqual credential_set secret_key ORIGINAL SECRET self assertEqual credential_set token ORIGINAL TOKEN class TestEnvVar BaseEnvVar def test_envvars_are_found_no_token self environ AWS_ACCESS_KEY_ID foo AWS_SECRET_ACCESS_KEY bar ,py
 provider credentials EnvProvider environ creds provider load self assertIsNotNone creds self assertEqual creds access_key foo self assertEqual creds secret_key bar self assertEqual creds method env def test_envvars_found_with_security_token self environ AWS_ACCESS_KEY_ID foo AWS_SECRET_ACCESS_KEY bar AWS_SECURITY_TOKEN baz provider credentials EnvProvider environ creds provider load self assertIsNotNone creds self assertEqual creds access_key foo self assertEqual creds secret_key bar self assertEqual creds token baz self assertEqual creds method env def test_envvars_found_with_session_token self environ AWS_ACCESS_KEY_ID foo AWS_SECRET_ACCESS_KEY bar AWS_SESSION_TOKEN baz provider ,py
 credentials EnvProvider environ creds provider load self assertIsNotNone creds self assertEqual creds access_key foo self assertEqual creds secret_key bar self assertEqual creds token baz self assertEqual creds method env def test_envvars_not_found self provider credentials EnvProvider environ creds provider load self assertIsNone creds def test_can_override_env_var_mapping self We can change the env var provider to use our specified env var names environ FOO_ACCESS_KEY foo FOO_SECRET_KEY bar FOO_SESSION_TOKEN baz mapping access_key FOO_ACCESS_KEY secret_key FOO_SECRET_KEY token FOO_SESSION_TOKEN provider credentials EnvProvider environ mapping creds provider load sel,py
f assertEqual creds access_key foo self assertEqual creds secret_key bar self assertEqual creds token baz def test_can_override_partial_env_var_mapping self Only changing the access key mapping The other 2 use the default values of AWS_SECRET_ACCESS_KEY and AWS_SESSION_TOKEN use our specified env var names environ FOO_ACCESS_KEY foo AWS_SECRET_ACCESS_KEY bar AWS_SESSION_TOKEN baz provider credentials EnvProvider environ access_key FOO_ACCESS_KEY creds provider load self assertEqual creds access_key foo self assertEqual creds secret_key bar self assertEqual creds token baz def test_partial_creds_is_an_error self If the user provides an access key they must also provide a secret key Not doing so will generate an error environ,py
 AWS_ACCESS_KEY_ID foo Missing the AWS_SECRET_ACCESS_KEY provider credentials EnvProvider environ with self assertRaises ibm_botocore exceptions PartialCredentialsError provider load class TestSharedCredentialsProvider BaseEnvVar def setUp self super TestSharedCredentialsProvider self setUp self ini_parser mock Mock def test_credential_file_exists_default_profile self self ini_parser return_value default aws_access_key_id foo aws_secret_access_key bar provider credentials SharedCredentialProvider creds_filename aws creds profile_name default ini_parser self ini_parser creds provider load self assertIsNotNone creds self assertEqual creds access_key foo self assertEqual creds secret_key bar self asse,py
rtIsNone creds token self assertEqual creds method shared credentials file def test_partial_creds_raise_error self self ini_parser return_value default aws_access_key_id foo Missing aws_secret_access_key provider credentials SharedCredentialProvider creds_filename aws creds profile_name default ini_parser self ini_parser with self assertRaises ibm_botocore exceptions PartialCredentialsError provider load def test_credentials_file_exists_with_session_token self self ini_parser return_value default aws_access_key_id foo aws_secret_access_key bar aws_session_token baz provider credentials SharedCredentialProvider creds_filename aws creds profile_name default ini_p,py
arser self ini_parser creds provider load self assertIsNotNone creds self assertEqual creds access_key foo self assertEqual creds secret_key bar self assertEqual creds token baz self assertEqual creds method shared credentials file def test_credentials_file_with_multiple_profiles self self ini_parser return_value Here the user has a default and a dev profile default aws_access_key_id a aws_secret_access_key b aws_session_token c dev aws_access_key_id d aws_secret_access_key e aws_session_token f And we specify a profile_name of dev provider credentials SharedCredentialProvider creds_filename aws creds profile_name dev ini_parser self ini_parser ,py
 creds provider load self assertIsNotNone creds self assertEqual creds access_key d self assertEqual creds secret_key e self assertEqual creds token f self assertEqual creds method shared credentials file def test_credentials_file_does_not_exist_returns_none self It s ok if the credentials file does not exist we should just catch the appropriate errors and return None self ini_parser side_effect ibm_botocore exceptions ConfigNotFound path foo provider credentials SharedCredentialProvider creds_filename aws creds profile_name dev ini_parser self ini_parser creds provider load self assertIsNone creds class TestConfigFileProvider BaseEnvVar def setUp self super TestConfigFileProvider self setUp profile_config aws_access_key_id a aws_secret_access_key b ,py
 aws_session_token c Non creds related configs can be in a session s config region us west 2 output json parsed profiles default profile_config parser mock Mock parser return_value parsed self parser parser def test_config_file_exists self provider credentials ConfigProvider cli cfg default self parser creds provider load self assertIsNotNone creds self assertEqual creds access_key a self assertEqual creds secret_key b self assertEqual creds token c self assertEqual creds method config file def test_config_file_missing_profile_config self Referring to a profile that s not in the config file will result in session config returning an empty dict profile_name NOT default provider credentials ConfigPr,py
ovider cli cfg profile_name self parser creds provider load self assertIsNone creds def test_config_file_errors_ignored self We should move on to the next provider if the config file can t be found self parser side_effect ibm_botocore exceptions ConfigNotFound path cli cfg provider credentials ConfigProvider cli cfg default self parser creds provider load self assertIsNone creds def test_partial_creds_is_error self profile_config aws_access_key_id a Missing aws_secret_access_key parsed profiles default profile_config parser mock Mock parser return_value parsed provider credentials ConfigProvider cli cfg default parser with self assertRaises ibm_botocore exceptions PartialCreden,py
tialsError provider load class TestBotoProvider BaseEnvVar def setUp self super TestBotoProvider self setUp self ini_parser mock Mock def test_boto_config_file_exists_in_home_dir self environ self ini_parser return_value Credentials boto s config file does not support a session token so we only test for access_key secret_key aws_access_key_id a aws_secret_access_key b provider credentials BotoProvider environ environ ini_parser self ini_parser creds provider load self assertIsNotNone creds self assertEqual creds access_key a self assertEqual creds secret_key b self assertIsNone creds token self assertEqual creds method boto config def test_env_var_set_for_boto_location self ,py
environ BOTO_CONFIG alternate config cfg self ini_parser return_value Credentials boto s config file does not support a session token so we only test for access_key secret_key aws_access_key_id a aws_secret_access_key b provider credentials BotoProvider environ environ ini_parser self ini_parser creds provider load self assertIsNotNone creds self assertEqual creds access_key a self assertEqual creds secret_key b self assertIsNone creds token self assertEqual creds method boto config Assert that the parser was called with the filename specified in the env var self ini_parser assert_called_with alternate config cfg def test_no_boto_config_file_exists self self ini_parser side_effect,py
 ibm_botocore exceptions ConfigNotFound path foo provider credentials BotoProvider environ ini_parser self ini_parser creds provider load self assertIsNone creds def test_partial_creds_is_error self ini_parser mock Mock ini_parser return_value Credentials aws_access_key_id a Missing aws_secret_access_key provider credentials BotoProvider environ ini_parser ini_parser with self assertRaises ibm_botocore exceptions PartialCredentialsError provider load class TestOriginalEC2Provider BaseEnvVar def test_load_ec2_credentials_file_not_exist self provider credentials OriginalEC2Provider environ creds provider load self assertIsNone creds def test_load_ec2_credentials_file_exist,py
s self environ AWS_CREDENTIAL_FILE foo cfg parser mock Mock parser return_value AWSAccessKeyId a AWSSecretKey b provider credentials OriginalEC2Provider environ environ parser parser creds provider load self assertIsNotNone creds self assertEqual creds access_key a self assertEqual creds secret_key b self assertIsNone creds token self assertEqual creds method ec2 credentials file class TestInstanceMetadataProvider BaseEnvVar def test_load_from_instance_metadata self timeobj datetime now tzlocal timestamp timeobj timedelta hours 24 isoformat fetcher mock Mock fetcher retrieve_iam_role_credentials return_value access_key a secret_key b token c ex,py
piry_time timestamp role_name myrole provider credentials InstanceMetadataProvider iam_role_fetcher fetcher creds provider load self assertIsNotNone creds self assertEqual creds access_key a self assertEqual creds secret_key b self assertEqual creds token c self assertEqual creds method iam role def test_no_role_creds_exist self fetcher mock Mock fetcher retrieve_iam_role_credentials return_value provider credentials InstanceMetadataProvider iam_role_fetcher fetcher creds provider load self assertIsNone creds fetcher retrieve_iam_role_credentials assert_called_with class CredentialResolverTest BaseEnvVar def setUp self super CredentialResolverTest self setUp self provider1 mock Mock self provider1 METHOD provider1 self provider2 mock Mock ,py
 self provider2 METHOD provider2 self fake_creds credentials Credentials a b c def test_load_credentials_single_provider self self provider1 load return_value self fake_creds resolver credentials CredentialResolver providers self provider1 creds resolver load_credentials self assertEqual creds access_key a self assertEqual creds secret_key b self assertEqual creds token c def test_get_provider_by_name self resolver credentials CredentialResolver providers self provider1 result resolver get_provider provider1 self assertIs result self provider1 def test_get_unknown_provider_raises_error self resolver credentials CredentialResolver providers self provider1 with self assertRaises ibm_botocore exceptions UnknownCredentialError resolver get_provider unknown foo def test_first_credential_non_none_wins self self pr,py
ovider1 load return_value None self provider2 load return_value self fake_creds resolver credentials CredentialResolver providers self provider1 self provider2 creds resolver load_credentials self assertEqual creds access_key a self assertEqual creds secret_key b self assertEqual creds token c self provider1 load assert_called_with self provider2 load assert_called_with def test_no_creds_loaded self self provider1 load return_value None self provider2 load return_value None resolver credentials CredentialResolver providers self provider1 self provider2 creds resolver load_credentials self assertIsNone creds def test_inject_additional_providers_after_existing self self provider1 load return_value None self provid,py
er2 load return_value self fake_creds resolver credentials CredentialResolver providers self provider1 self provider2 Now if we were to call resolver load now provider2 would win because it s returning a non None response However we can inject a new provider before provider2 to override this process Providers can be added by the METHOD name of each provider new_provider mock Mock new_provider METHOD new_provider new_provider load return_value credentials Credentials d e f resolver insert_after provider1 new_provider creds resolver load_credentials self assertIsNotNone creds self assertEqual creds access_key d self assertEqual creds secret_key e self assertEqual creds token f Provider 1 should have been called but provider2 should not have bee,py
n called because new_provider already returned a non None response self provider1 load assert_called_with self assertTrue not self provider2 called def test_inject_provider_before_existing self new_provider mock Mock new_provider METHOD override new_provider load return_value credentials Credentials x y z resolver credentials CredentialResolver providers self provider1 self provider2 resolver insert_before self provider1 METHOD new_provider creds resolver load_credentials self assertEqual creds access_key x self assertEqual creds secret_key y self assertEqual creds token z def test_can_remove_providers self self provider1 load return_value credentials Credentials a b c self provider2 load return_value credentials Credentials d e f ,py
 resolver credentials CredentialResolver providers self provider1 self provider2 resolver remove provider1 creds resolver load_credentials self assertIsNotNone creds self assertEqual creds access_key d self assertEqual creds secret_key e self assertEqual creds token f self assertTrue not self provider1 load called self provider2 load assert_called_with def test_provider_unknown self resolver credentials CredentialResolver providers self provider1 self provider2 No error is raised if you try to remove an unknown provider resolver remove providerFOO But an error IS raised if you try to insert after an unknown provider with self assertRaises ibm_botocore exceptions UnknownCredentialError resolver insert_afte,py
r providerFoo None class TestCreateCredentialResolver BaseEnvVar def setUp self super TestCreateCredentialResolver self setUp self session mock Mock self session_instance_vars credentials_file a legacy_config_file b config_file c metadata_service_timeout d metadata_service_num_attempts e self fake_env_vars self session get_config_variable self fake_get_config_variable def fake_get_config_variable self name methods None if methods instance return self session_instance_vars get name elif methods is not None and env in methods return self fake_env_vars get name def test_create_credential_resolver self resolver credentials create_credential_resolver self session self assertIsInstance resolver credentials CredentialResolver def test_explicit_profile,py
_ignores_env_provider self self session_instance_vars profile dev resolver credentials create_credential_resolver self session self assertTrue all not isinstance p EnvProvider for p in resolver providers def test_no_profile_checks_env_provider self If no profile is provided self session_instance_vars pop profile None resolver credentials create_credential_resolver self session Then an EnvProvider should be part of our credential lookup chain self assertTrue any isinstance p EnvProvider for p in resolver providers def test_env_provider_added_if_profile_from_env_set self self fake_env_vars profile profile from env resolver credentials create_credential_resolver self session self assertTrue any isinstance p EnvProvider for p in resolver providers class TestAssumeRoleCredentialProvider unittest TestCase maxDiff None ,py
 def setUp self self fake_config profiles development role_arn myrole source_profile longterm longterm aws_access_key_id akid aws_secret_access_key skid def create_config_loader self with_config None if with_config is None with_config self fake_config load_config mock Mock load_config return_value with_config return load_config def create_client_creator self with_response Create a mock sts client that returns a specific response for assume_role client mock Mock if isinstance with_response list client assume_role side_effect with_response else client assume_role return_value with_response return mock Mock return_value,py
 client def some_future_time self timeobj datetime now tzlocal return timeobj timedelta hours 24 def test_assume_role_with_no_cache self response Credentials AccessKeyId foo SecretAccessKey bar SessionToken baz Expiration self some_future_time isoformat client_creator self create_client_creator with_response response provider credentials AssumeRoleProvider self create_config_loader client_creator cache profile_name development creds provider load self assertEqual creds access_key foo self assertEqual creds secret_key bar self assertEqual creds token baz def test_assume_role_with_datetime self response Credentials AccessKeyId foo SecretAccessKey bar ,py
 SessionToken baz Note the lack of isoformat we re using a datetime datetime type This will ensure we test both parsing as well as serializing from a given datetime because the credentials are immediately expired Expiration datetime now tzlocal timedelta hours 20 client_creator self create_client_creator with_response response provider credentials AssumeRoleProvider self create_config_loader client_creator cache profile_name development creds provider load self assertEqual creds access_key foo self assertEqual creds secret_key bar self assertEqual creds token baz def test_assume_role_refresher_serializes_datetime self client mock Mock time_zone tzutc expiration datetime year 2016 mont,py
h 11 day 6 hour 1 minute 30 tzinfo time_zone client assume_role return_value Credentials AccessKeyId foo SecretAccessKey bar SessionToken baz Expiration expiration refresh create_assume_role_refresher client expiry_time refresh expiry_time self assertEqual expiry_time 2016 11 06T01 30 00UTC def test_assume_role_retrieves_from_cache self date_in_future datetime utcnow timedelta seconds 1000 utc_timestamp date_in_future isoformat Z self fake_config profiles development role_arn myrole cache development myrole Credentials AccessKeyId foo cached SecretAccessKey bar cached SessionToken baz cached Expiration utc_timestamp ,py
 provider credentials AssumeRoleProvider self create_config_loader mock Mock cache cache profile_name development creds provider load self assertEqual creds access_key foo cached self assertEqual creds secret_key bar cached self assertEqual creds token baz cached def test_cache_key_is_windows_safe self response Credentials AccessKeyId foo SecretAccessKey bar SessionToken baz Expiration datetime now tzlocal isoformat cache self fake_config profiles development role_arn arn aws iam foo role client_creator self create_client_creator with_response response provider credentials AssumeRoleProvider self create_config_loader client_creator,py
 cache cache profile_name development provider load On windows you cannot use a a in the filename so we need to do some small transformations on the filename to replace any that come up self assertEqual cache development arn_aws_iam__foo role response def test_cache_key_with_role_session_name self response Credentials AccessKeyId foo SecretAccessKey bar SessionToken baz Expiration datetime now tzlocal isoformat cache self fake_config profiles development role_arn arn aws iam foo role self fake_config profiles development role_session_name foo_role_session_name client_creator self create_client_creator with_response response provider credentials AssumeRoleProvid,py
er self create_config_loader client_creator cache cache profile_name development provider load self assertEqual cache development arn_aws_iam__foo role foo_role_session_name response def test_assume_role_in_cache_but_expired self expired_creds datetime utcnow valid_creds expired_creds timedelta seconds 60 utc_timestamp expired_creds isoformat Z response Credentials AccessKeyId foo SecretAccessKey bar SessionToken baz Expiration valid_creds isoformat Z client_creator self create_client_creator with_response response cache development myrole Credentials AccessKeyId foo cached SecretAccessKey bar cached Ses,py
sionToken baz cached Expiration utc_timestamp provider credentials AssumeRoleProvider self create_config_loader client_creator cache cache profile_name development creds provider load self assertEqual creds access_key foo self assertEqual creds secret_key bar self assertEqual creds token baz def test_role_session_name_provided self dev_profile self fake_config profiles development dev_profile role_session_name myname response Credentials AccessKeyId foo SecretAccessKey bar SessionToken baz Expiration datetime now tzlocal isoformat client_creator self create_client_creator with_response response provider credentials AssumeRoleProvider s,py
elf create_config_loader client_creator cache profile_name development provider load client client_creator return_value client assume_role assert_called_with RoleArn myrole RoleSessionName myname def test_external_id_provided self self fake_config profiles development external_id myid response Credentials AccessKeyId foo SecretAccessKey bar SessionToken baz Expiration datetime now tzlocal isoformat client_creator self create_client_creator with_response response provider credentials AssumeRoleProvider self create_config_loader client_creator cache profile_name development provider load client client_creator return_value client assume_role assert_called_with RoleArn myro,py
le ExternalId myid RoleSessionName mock ANY def test_assume_role_with_mfa self self fake_config profiles development mfa_serial mfa response Credentials AccessKeyId foo SecretAccessKey bar SessionToken baz Expiration datetime now tzlocal isoformat client_creator self create_client_creator with_response response prompter mock Mock return_value token code provider credentials AssumeRoleProvider self create_config_loader client_creator cache profile_name development prompter prompter provider load client client_creator return_value In addition to the normal assume role args we should also inject the serial number from the config as well as the token code that comes from prompting the user the prompter ob,py
ject client assume_role assert_called_with RoleArn myrole RoleSessionName mock ANY SerialNumber mfa TokenCode token code def test_assume_role_populates_session_name_on_refresh self responses Credentials AccessKeyId foo SecretAccessKey bar SessionToken baz We re creating an expiry time in the past so as soon as we try to access the credentials the refresh behavior will be triggered Expiration datetime now tzlocal timedelta seconds 100 isoformat Credentials AccessKeyId foo SecretAccessKey bar SessionToken baz Expiration datetime now tzlocal timedelta seconds 100 isofor,py
mat client_creator self create_client_creator with_response responses provider credentials AssumeRoleProvider self create_config_loader client_creator cache profile_name development prompter mock Mock return_value token code This will trigger the first assume_role call It returns credentials that are expired and will trigger a refresh creds provider load This will trigger the second assume_role call because a refresh is needed creds get_frozen_credentials client client_creator return_value assume_role_calls client assume_role call_args_list self assertEqual len assume_role_calls 2 assume_role_calls The args should be identical That is the second assume_role call should have the exact same args as the initial assume_role call self assertEqual assume_role_calls 0 assu,py
me_role_calls 1 def test_assume_role_mfa_cannot_refresh_credentials self Note we should look into supporting optional behavior in the future that allows for reprompting for credentials But for now if we get temp creds with MFA then when those creds expire we can t refresh the credentials self fake_config profiles development mfa_serial mfa response Credentials AccessKeyId foo SecretAccessKey bar SessionToken baz We re creating an expiry time in the past so as soon as we try to access the credentials the refresh behavior will be triggered Expiration datetime now tzlocal timedelta seconds 100 isoformat client_creator self create_client_creator with_response response provider ,py
 credentials AssumeRoleProvider self create_config_loader client_creator cache profile_name development prompter mock Mock return_value token code creds provider load with self assertRaises credentials RefreshWithMFAUnsupportedError access_key is a property that will refresh credentials if they re expired Because we set the expiry time to something in the past this will trigger the refresh behavior with with MFA will currently raise an exception creds access_key def test_no_config_is_noop self self fake_config profiles development aws_access_key_id foo aws_secret_access_key bar provider credentials AssumeRoleProvider self create_config_loader mock Mock cache profile_name development Because a role_arn was not specified the AssumeRolePr,py
ovider is a noop and will not return credentials which means we move on to the next provider creds provider load self assertIsNone creds def test_source_profile_not_provided self del self fake_config profiles development source_profile provider credentials AssumeRoleProvider self create_config_loader mock Mock cache profile_name development source_profile is required we shoudl get an error with self assertRaises ibm_botocore exceptions PartialCredentialsError provider load def test_source_profile_does_not_exist self dev_profile self fake_config profiles development dev_profile source_profile does not exist provider credentials AssumeRoleProvider self create_config_loader mock Mock cache profile_name development source_profile is required we shoudl get an error ,py
 with self assertRaises ibm_botocore exceptions InvalidConfigError provider load class TestRefreshLogic unittest TestCase def test_mandatory_refresh_needed self creds IntegerRefresher These values will immediately trigger a manadatory refresh creds_last_for 2 mandatory_refresh 3 advisory_refresh 3 temp creds get_frozen_credentials self assertEqual temp credentials ReadOnlyCredentials 1 1 1 def test_advisory_refresh_needed self creds IntegerRefresher These values will immediately trigger a manadatory refresh creds_last_for 4 mandatory_refresh 2 advisory_refresh 5 temp creds get_frozen_credentials self assertEqual temp credentials ReadOnlyCredentials 1 1 1 def test_refresh_fails_is_not_an_error_during_advisory_period self ,py
 fail_refresh mock Mock side_effect Exception refresh failed creds IntegerRefresher creds_last_for 5 advisory_refresh 7 mandatory_refresh 3 refresh_function fail_refresh temp creds get_frozen_credentials We should have called the refresh function self assertTrue fail_refresh called The fail_refresh function will raise an exception Because we re in the advisory period we ll not propogate the exception and return the current set of credentials generation 1 self assertEqual temp credentials ReadOnlyCredentials 0 0 0 def test_exception_propogated_on_error_during_mandatory_period self fail_refresh mock Mock side_effect Exception refresh failed creds IntegerRefresher creds_last_for 5 advisory_refresh 10 Note we re in the mandatory period now 5 7 10 ,py
 mandatory_refresh 7 refresh_function fail_refresh with self assertRaisesRegexp Exception refresh failed creds get_frozen_credentials def test_exception_propogated_on_expired_credentials self fail_refresh mock Mock side_effect Exception refresh failed creds IntegerRefresher Setting this to 0 mean the credentials are immediately expired creds_last_for 0 advisory_refresh 10 mandatory_refresh 7 refresh_function fail_refresh with self assertRaisesRegexp Exception refresh failed Because credentials are actually expired any failure to refresh should be propagated creds get_frozen_credentials def test_refresh_giving_expired_credentials_raises_exception self This verifies an edge cases where refreshed credentials still give expired credentials ,py
1 We see credentials are expired 2 We try to refresh the credentials 3 The refreshed credentials are still expired In this case we hard fail and let the user know what happened creds IntegerRefresher Negative number indicates that the credentials have already been expired for 2 seconds even on refresh creds_last_for 2 err_msg refreshed credentials are still expired with self assertRaisesRegexp RuntimeError err_msg Because credentials are actually expired any failure to refresh should be propagated creds get_frozen_credentials class TestContainerProvider BaseEnvVar def test_noop_if_env_var_is_not_set self The AWS_CONTAINER_CREDENTIALS_RELATIVE_URI env var is not present as an env var environ provider credentials ContainerProvider environ creds ,py
 provider load self assertIsNone creds def full_url self url return http s s ContainerMetadataFetcher IP_ADDRESS url def create_fetcher self fetcher mock Mock spec ContainerMetadataFetcher fetcher full_url self full_url return fetcher def test_retrieve_from_provider_if_env_var_present self environ AWS_CONTAINER_CREDENTIALS_RELATIVE_URI latest credentials id foo fetcher self create_fetcher timeobj datetime now tzlocal timestamp timeobj timedelta hours 24 isoformat fetcher retrieve_full_uri return_value AccessKeyId access_key SecretAccessKey secret_key Token token Expiration timestamp provider credentials ContainerProvider environ fetcher creds provider load fetcher retrieve_full_uri assert_called_with self full,py
_url latest credentials id foo headers None self assertEqual creds access_key access_key self assertEqual creds secret_key secret_key self assertEqual creds token token self assertEqual creds method container role def test_creds_refresh_when_needed self environ AWS_CONTAINER_CREDENTIALS_RELATIVE_URI latest credentials id foo fetcher mock Mock spec credentials ContainerMetadataFetcher timeobj datetime now tzlocal expired_timestamp timeobj timedelta hours 23 isoformat future_timestamp timeobj timedelta hours 1 isoformat fetcher retrieve_full_uri side_effect AccessKeyId access_key_old SecretAccessKey secret_key_old Token token_old Expiration expired_timestamp AccessKeyId access_key_new ,py
 SecretAccessKey secret_key_new Token token_new Expiration future_timestamp provider credentials ContainerProvider environ fetcher creds provider load frozen_creds creds get_frozen_credentials self assertEqual frozen_creds access_key access_key_new self assertEqual frozen_creds secret_key secret_key_new self assertEqual frozen_creds token token_new def test_http_error_propagated self environ AWS_CONTAINER_CREDENTIALS_RELATIVE_URI latest credentials id foo fetcher mock Mock spec credentials ContainerMetadataFetcher timeobj datetime now tzlocal expired_timestamp timeobj timedelta hours 23 isoformat future_timestamp timeobj timedelta hours 1 isoformat exception ibm_botocore exceptions CredentialRetrievalError fetcher retrieve_full_uri si,py
de_effect exception provider ecs role error_msg fake http error with self assertRaises exception provider credentials ContainerProvider environ fetcher creds provider load def test_http_error_propagated_on_refresh self We should ensure errors are still propagated even in the case of a failed refresh environ AWS_CONTAINER_CREDENTIALS_RELATIVE_URI latest credentials id foo fetcher mock Mock spec credentials ContainerMetadataFetcher timeobj datetime now tzlocal expired_timestamp timeobj timedelta hours 23 isoformat http_exception ibm_botocore exceptions MetadataRetrievalError raised_exception ibm_botocore exceptions CredentialRetrievalError fetcher retrieve_full_uri side_effect AccessKeyId access_key_old SecretAccessKey,py
 secret_key_old Token token_old Expiration expired_timestamp http_exception error_msg HTTP connection timeout provider credentials ContainerProvider environ fetcher First time works with no issues creds provider load Second time with a refresh should propagate an error with self assertRaises raised_exception frozen_creds creds get_frozen_credentials def test_can_use_full_url self environ AWS_CONTAINER_CREDENTIALS_FULL_URI http localhost foo fetcher self create_fetcher timeobj datetime now tzlocal timestamp timeobj timedelta hours 24 isoformat fetcher retrieve_full_uri return_value AccessKeyId access_key SecretAccessKey secret_key Token token Expiration timestamp ,py
 provider credentials ContainerProvider environ fetcher creds provider load fetcher retrieve_full_uri assert_called_with http localhost foo headers None self assertEqual creds access_key access_key self assertEqual creds secret_key secret_key self assertEqual creds token token self assertEqual creds method container role def test_can_pass_basic_auth_token self environ AWS_CONTAINER_CREDENTIALS_FULL_URI http localhost foo AWS_CONTAINER_AUTHORIZATION_TOKEN Basic auth token fetcher self create_fetcher timeobj datetime now tzlocal timestamp timeobj timedelta hours 24 isoformat fetcher retrieve_full_uri return_value AccessKeyId access_key SecretAccessKey secret_key Token token Expiration time,py
stamp provider credentials ContainerProvider environ fetcher creds provider load fetcher retrieve_full_uri assert_called_with http localhost foo headers Authorization Basic auth token self assertEqual creds access_key access_key self assertEqual creds secret_key secret_key self assertEqual creds token token self assertEqual creds method container role ,py
package io github jhipster registry security jwt import io github jhipster registry config JHipsterProperties import java util import java util stream Collectors import javax annotation PostConstruct import javax inject Inject import org slf4j Logger import org slf4j LoggerFactory import org springframework security authentication UsernamePasswordAuthenticationToken import org springframework security core Authentication import org springframework security core GrantedAuthority import org springframework security core authority SimpleGrantedAuthority import org springframework security core userdetails User import org springframework stereotype Component import io jsonwebtoken Component public class TokenProvider private final Logger log LoggerFactory getLogger TokenProvider class private static final String AUTHORITIES_KEY auth private String secretKey private long tokenValidityInSeconds private long tokenValidityInSecondsForRememberMe Inj,java
ect private JHipsterProperties jHipsterProperties PostConstruct public void init this secretKey jHipsterProperties getSecurity getAuthentication getJwt getSecret this tokenValidityInSeconds 1000 jHipsterProperties getSecurity getAuthentication getJwt getTokenValidityInSeconds this tokenValidityInSecondsForRememberMe 1000 jHipsterProperties getSecurity getAuthentication getJwt getTokenValidityInSecondsForRememberMe public String createToken Authentication authentication Boolean rememberMe String authorities authentication getAuthorities stream map authority authority getAuthority collect Collectors joining long now new Date getTime Date validity if rememberMe validity new Date now this tokenValidityInSecondsForRememberMe else validity new Date now,java
 this tokenValidityInSeconds return Jwts builder setSubject authentication getName claim AUTHORITIES_KEY authorities signWith SignatureAlgorithm HS512 secretKey setExpiration validity compact public Authentication getAuthentication String token Claims claims Jwts parser setSigningKey secretKey parseClaimsJws token getBody Collection extends GrantedAuthority authorities Arrays stream claims get AUTHORITIES_KEY toString split map SimpleGrantedAuthority new collect Collectors toList User principal new User claims getSubject authorities return new UsernamePasswordAuthenticationToken principal authorities public boolean validateToken String authToken try Jwts parser setSigningKey secretKe,java
y parseClaimsJws authToken return true catch SignatureException e log info Invalid JWT signature e getMessage return false ,java
 package com ibm cloud objectstorage util import java util Iterator public class IndexValues implements Iterable int private final int lengths Constructs an link Iterable for all possible combination of array index values giv,java
en the array lengths This can be useful for generating unit test cases param lengths array lengths public IndexValues int lengths if lengths null lengths length 0 throw new IllegalArgumentException for int len lengths if len 1 throw new IllegalArgumentException this lengths lengths clone private static class Iter implements Iterator int private final int lengths private int curr private Iter int lengths this lengths lengths this curr new int lengths length Override public boolean hasNext return curr null Returns the next combinati,java
on of array index values or null if the index value space has been exhausted Override public int next if curr null return null final int last lengths length 1 if curr last lengths last 1 int ret curr clone curr last return ret if curr last lengths last 1 go left to search for more capacity for int j last 1 j 0 j if curr j lengths j 1 int ret curr clone curr j for int k j 1 k lengths length k curr k 0 return ret int ret curr last combination curr null return r,java
et throw new IllegalStateException Bug Override public void remove Override public Iterator int iterator return new Iter lengths ,java
 xml version 1 0 encoding UTF 8 project xmlns http maven apache org POM 4 0 0 xmlns xsi http www w3 org 2001 XMLSchema instance xsi schemaLocation http maven apache org POM 4 0 0 http maven apache org xsd maven 4 0 0 xsd modelVersion 4 0 0 modelVersion parent artifactId og artifactId groupId com ibm groupId version 1 4 0 version parent artifactId og s3 artifactId name S3 name description Amazon S3 HTTP API components description dependencies dependency groupId com ibm groupId artifactId og api artifactId dependency dependency groupId com ibm groupId artifactId og http artifactId dependency dependency groupId com ibm groupId artifactId og util artifactId dependency dependency groupId com amazonaws groupId artifactId aws java sdk s3 artifactId dependency dependency groupId com ibm groupId art,xml
ifactId og supplier artifactId scope test scope dependency dependencies project ,xml
 package com ibm cloud objectstorage import org apache commons logging Log import org apache commons logging LogFactory import com ibm cloud objectstorage annotation SdkInternalApi import com ibm cloud objectstorage annotation SdkProtectedApi import com ibm cloud objectstorage auth RegionAwareSigner import com ibm cloud objectstorage auth Signer import com ibm cloud objectstorage auth SignerFactory import com ibm cloud objects,java
torage client AwsSyncClientParams import com ibm cloud objectstorage client builder AwsClientBuilder import com ibm cloud objectstorage handlers RequestHandler import com ibm cloud objectstorage handlers RequestHandler2 import com ibm cloud objectstorage http AmazonHttpClient import com ibm cloud objectstorage http ExecutionContext import com ibm cloud objectstorage internal DefaultServiceEndpointBuilder import com ibm cloud objectstorage internal auth DefaultSignerProvider import com ibm cloud objectstorage internal auth SignerProvider import com ibm cloud objectstorage internal auth SignerProviderContext import com ibm cloud objectstorage log CommonsLogFactory import com ibm cloud objectstorage metrics AwsSdkMetrics import com ibm cloud objectstorage metrics RequestMetricCollector import com ibm cloud objectstorage regions Region import com ibm cloud objectstorage regions Regions import com ibm cloud objectstorage util AWSRequestMetrics import com ibm cloud objectstorage util AwsHostNameUtil,java
s import com ibm cloud objectstorage util Classes import com ibm cloud objectstorage util RuntimeHttpUtils import com ibm cloud objectstorage util StringUtils import com ibm cloud objectstorage util AWSRequestMetrics Field import static com ibm cloud objectstorage SDKGlobalConfiguration PROFILING_SYSTEM_PROPERTY import java net URI import java util List import java util concurrent CopyOnWriteArrayList public abstract class AmazonWebServiceClient Deprecated public static final boolean LOGGING_AWS_REQUEST_METRIC true private static final String AMAZON Amazon private static final String AWS AWS private static final Log log LogFactory getLog AmazonWebServiceClient class static Co,java
nfigures the internal logging of the signers and core classes to use Jakarta Commons Logging to stay consistent with the rest of the library boolean success com ibm cloud objectstorage log InternalLogFactory configureFactory new CommonsLogFactory if log isDebugEnabled log debug Internal logging successfully configured to commons logger success private volatile boolean isImmutable false protected volatile URI endpoint ,java
 Used to explicitly override the internal signer region computed by the default implementation This field is typically null private volatile String signerRegionOverride protected ClientConfiguration clientConfiguration protected AmazonHttpClient client protected final List RequestHandler2 requestHandler2s protected int timeOffset private volatile SignerProvider signerProvider private volatile String serviceName ,java
 private volatile String endpointPrefix public AmazonWebServiceClient ClientConfiguration clientConfiguration this clientConfiguration null public AmazonWebServiceClient ClientConfiguration clientConfiguration RequestMetricCollector requestMetricCollector this clientConfiguration requestMetricCollector false SdkProtectedApi protect,java
ed AmazonWebServiceClient ClientConfiguration clientConfiguration RequestMetricCollector requestMetricCollector boolean disableStrictHostNameVerification this clientConfiguration clientConfiguration requestHandler2s new CopyOnWriteArrayList RequestHandler2 client new AmazonHttpClient clientConfiguration requestMetricCollector disableStrictHostNameVerification calculateCRC32FromCompressedData protected AmazonWebServiceClient AwsSyncClientParams clientParams this clientConfiguration clientParams getClientConfiguration requestHandler2s clientParams getRequestHandlers client new AmazonHttpClient clientConfiguration clientParams getRequestMetricCollector useStrictHostNameVerification calculateCRC32FromCompressedData ,java
 Returns the signer p Note however the signer configured for S3 is incomplete at this stage as the information on the S3 bucket and key is not yet known Deprecated protected Signer getSigner return signerProvider getSigner SignerProviderContext builder build SdkProtectedApi protected SignerProvider getSignerProvider return signerProvider Overrides the default endpoint for this client Callers can use this method to control which AWS region they want to work with p b This method is not threadsafe Endpoints should be configured when the client is created and before any service requests are made Changing it afterwards creates inevitable race conditions for any service requests in transit b p Callers can pass in just the endpoint ex ec2 amazonaws com or a full,java
 URL including the protocol ex https ec2 amazonaws com If the protocol is not specified here the default protocol from this client s link ClientConfiguration will be used which by default is HTTPS p For more information on using AWS regions with the AWS SDK for Java and a complete list of all available endpoints for all AWS services see a href http developer amazonwebservices com connect entry jspa externalID 3912 http developer amazonwebservices com connect entry jspa externalID 3912 a param endpoint The endpoint ex ec2 amazonaws com or a full URL including the protocol ex https ec2 amazonaws com of the region specific AWS endpoint this client will communicate with throws IllegalArgumentException If any problems are detected with the specified endpoint deprecated use link AwsClien,java
tBuilder setEndpointConfiguration AwsClientBuilder EndpointConfiguration for example code builder setEndpointConfiguration new EndpointConfiguration endpoint signingRegion Deprecated public void setEndpoint String endpoint throws IllegalArgumentException checkMutability URI uri toURI endpoint Signer signer computeSignerByURI uri signerRegionOverride false synchronized this this endpoint uri this signerProvider createSignerProvider signer private URI toURI String endpoint throws IllegalArgumentException return RuntimeHttpUtils toUri endpoint clientConfiguration Returns the signer based on the given URI and the current AWS client configuration Currently only the SQS client can have different region on a per request basis For other AWS clients the region remains the same on a ,java
per AWS client level p Note however the signer returned for S3 is incomplete at this stage as the information on the S3 bucket and key is not yet known public Signer getSignerByURI URI uri return computeSignerByURI uri signerRegionOverride true Returns the signer for the given uri and the current client configuration p Note however the signer returned for S3 is incomplete at this stage as the information on the S3 bucket and key is not yet known param signerRegionOverride the overriding signer region or null if there is none param isRegionIdAsSignerParam true if the regionId is used to configure the signer if applicable false if this method is called for the purpose of purely setting the communication end point of this AWS client and therefore the regionId parameter will not be used,java
 directly for configuring the signer private Signer computeSignerByURI URI uri String signerRegionOverride boolean isRegionIdAsSignerParam if uri null throw new IllegalArgumentException Endpoint is not set Use setEndpoint to set an endpoint before performing any request String service getServiceNameIntern String region AwsHostNameUtils parseRegionName uri getHost service return computeSignerByServiceRegion service region signerRegionOverride isRegionIdAsSignerParam Returns the signer for the given service name region id and the current client configuration p Note however the signer returned for S3 is incomplete at this stage as the information on the S3 bucket and key is not yet known param regionId the region for sending AWS requests param sig,java
nerRegionOverride the overriding signer region or null if there is none param isRegionIdAsSignerParam true if the regionId is used to configure the signer if applicable false if this method is called for the purpose of purely setting the communication end point of this AWS client and therefore the regionId parameter will not be used directly for configuring the signer private Signer computeSignerByServiceRegion String serviceName String regionId String signerRegionOverride boolean isRegionIdAsSignerParam String signerType clientConfiguration getSignerOverride Signer signer signerType null SignerFactory getSigner serviceName regionId SignerFactory getSignerByTypeAndService signerType serviceName if signer instanceof RegionAwareSigner ,java
 Overrides the default region computed RegionAwareSigner regionAwareSigner RegionAwareSigner signer signerRegionOverride null means that it is likely to be AWS internal dev work as signerRegionOverride is typically null when used in the external release if signerRegionOverride null regionAwareSigner setRegionName signerRegionOverride else if regionId null isRegionIdAsSignerParam regionAwareSigner setRegionName regionId return signer An alternative to link AmazonWebServiceClient setEndpoint String sets the regional endpoint for this client s service calls Callers can use this method to control which AWS region they want to work with p b This method is not threadsafe A region should be configured when the client is created and before any service requests are made Changing it,java
 afterwards creates inevitable race conditions for any service requests in transit or retrying b p By default all service endpoints in all regions use the https protocol To use http instead specify it in the link ClientConfiguration supplied at construction param region The region this client will communicate with See link Region getRegion com ibm cloud objectstorage regions Regions for accessing a given region throws java lang IllegalArgumentException If the given region is null or if this service isn t available in the given region See link Region isServiceSupported String see Region getRegion com ibm cloud objectstorage regions Regions see Region createClient Class com ibm cloud objectstorage auth AWSCredentialsProvider ClientConfiguration deprecated use link AwsClientBuilder setRegion String ,java
 Deprecated public void setRegion Region region throws IllegalArgumentException checkMutability if region null throw new IllegalArgumentException No region provided final String serviceNameForEndpoint getEndpointPrefix final String serviceNameForSigner getServiceNameIntern URI uri new DefaultServiceEndpointBuilder serviceNameForEndpoint clientConfiguration getProtocol toString withRegion region getServiceEndpoint Signer signer computeSignerByServiceRegion serviceNameForSigner region getName signerRegionOverride false synchronized this this endpoint uri this signerProvider createSignerProvider signer Convenient method for setting region param region region to set to must not be null see setRegion Region deprecated use link AwsClientBuilder setRegion ,java
String Deprecated public final void configureRegion Regions region checkMutability if region null throw new IllegalArgumentException No region provided this setRegion Region getRegion region public void shutdown client shutdown deprecated by link addRequestHandler RequestHandler2 Appends a request handler to the list of registered handlers that are run as part of a request s lifecycle param requestHandler The new handler to add to the current list of request handlers ,java
 Deprecated public void addRequestHandler RequestHandler requestHandler checkMutability requestHandler2s add RequestHandler2 adapt requestHandler Deprecated public void addRequestHandler RequestHandler2 requestHandler2 checkMutability requestHandler2s add requestHandler2 Removes a request handler from the list of registered handlers that are run as part of a request s lifecycle param requestHandler The handler to remove from the current list of request handlers deprecated use link AwsClie,java
ntBuilder withRequestHandlers RequestHandler2 Deprecated public void removeRequestHandler RequestHandler requestHandler checkMutability requestHandler2s remove RequestHandler2 adapt requestHandler Deprecated public void removeRequestHandler RequestHandler2 requestHandler2 checkMutability requestHandler2s remove requestHandler2 SuppressWarnings unchecked protected final T extends AmazonWebServiceRequest T beforeMarshalling T request T local request for RequestHandler2 handler requestHandler2s loca,java
l T handler beforeMarshalling local return local protected ExecutionContext createExecutionContext AmazonWebServiceRequest req return createExecutionContext req signerProvider protected ExecutionContext createExecutionContext AmazonWebServiceRequest req SignerProvider signerProvider boolean isMetricsEnabled isRequestMetricsEnabled req isProfilingEnabled return ExecutionContext builder withRequestHandler2s requestHandler2s withUseRequestMetrics isMetricsEnabled withAwsClient this withSignerProvider signerProvider build protected final ExecutionContext createExecutionContext Request req return createExecutionContext req getOriginalRequest protected SignerProvider createSignerProvider Signer signer return new DefaultSignerProvider this signer ,java
 protected static boolean isProfilingEnabled return System getProperty PROFILING_SYSTEM_PROPERTY null protected final boolean isRequestMetricsEnabled AmazonWebServiceRequest req RequestMetricCollector c req getRequestMetricCollector request level collector if c null c isEnabled return true return isRMCEnabledAtClientOrSdkLevel private boolean isRMCEnabledAtClientOrSdkLevel RequestMetricCollector c requestMetricCollector return c null c isEnabled Sets the optional value for time offset for this clie,java
nt This value will be applied to all requests processed through this client Value is in seconds positive values imply the current clock is fast negative values imply clock is slow param timeOffset The optional value for time offset in seconds for this client public void setTimeOffset int timeOffset checkMutability this timeOffset timeOffset public AmazonWebServiceClient withTimeOffset int timeOffset checkMutability setTimeOffset tim,java
eOffset return this public int getTimeOffset return timeOffset public RequestMetricCollector getRequestMetricsCollector return client getRequestMetricCollector protected RequestMetricCollector requestMetricCollector RequestMetricCollector mc client getRequestMetricCollector return mc null ,java
 AwsSdkMetrics getRequestMetricCollector mc private final RequestMetricCollector findRequestMetricCollector RequestMetricCollector reqLevelMetricsCollector if reqLevelMetricsCollector null return reqLevelMetricsCollector else if getRequestMetricsCollector null return getRequestMetricsCollector else return AwsSdkMetrics getRequestMetricCollector protected final T extends AmazonWebServiceRequest T beforeClientExecution T request T local request for RequestHandler2 handler requestHandler2s local T handler beforeExecution local return local ,java
 Convenient method to end the client execution without logging the awsRequestMetrics protected final void endClientExecution AWSRequestMetrics awsRequestMetrics Request request Response response this endClientExecution awsRequestMetrics request response LOGGING_AWS_REQUEST_METRIC protected final void endClientExecution AWSRequestMetrics awsRequestMetrics Request request Response response Deprecated boolean loggingAwsRequestMetrics if request null awsRequestMetrics endEvent Field ClientExecuteTime ,java
 awsRequestMetrics getTimingInfo endTiming RequestMetricCollector c findRequestMetricCollector request getOriginalRequest getRequestMetricCollector c collectMetrics request response awsRequestMetrics log Deprecated protected String getServiceAbbreviation return getServiceNameIntern public String getServiceName return getServiceNameIntern return the service name that should be used when computing the region endpoints This method returns the value of the regionMetadataServiceName configuration in the internal config fil,java
e if such configuration is specified for the current client otherwise it returns the same service name that is used for request signing public String getEndpointPrefix if endpointPrefix null return endpointPrefix String httpClientName getHttpClientName String serviceNameInRegionMetadata ServiceNameFactory getServiceNameInRegionMetadata httpClientName synchronized this if endpointPrefix null return endpointPrefix if serviceNameInRegionMetadata null return endpointPrefix serviceNameInRegionMetadata else return endpointPrefix getServiceNameIntern ,java
 protected void setEndpointPrefix String endpointPrefix if endpointPrefix null throw new IllegalArgumentException The parameter endpointPrefix must be specified this endpointPrefix endpointPrefix protected String getServiceNameIntern if serviceName null synchronized this if serviceName null return serviceName computeServiceName return serviceName An internal method used to explicitly override the service name computed by the default implementation This method is not expected to be normally called except for AWS,java
 internal development purposes public final void setServiceNameIntern String serviceName if serviceName null throw new IllegalArgumentException The parameter serviceName must be specified this serviceName serviceName private String computeServiceName final String httpClientName getHttpClientName String service ServiceNameFactory getServiceName httpClientName if service null return service only if it is so explicitly configured Otherwise ma,java
ke use of convention over configuration int j httpClientName indexOf JavaClient if j 1 j httpClientName indexOf Client if j 1 throw new IllegalStateException Unrecognized suffix for the AWS http client class name httpClientName int i httpClientName indexOf AMAZON int len if i 1 i httpClientName indexOf AWS if i 1 throw new IllegalStateException Unrecognized prefix for the AWS http client class name httpClientName len AWS length else len AMAZON length if i j throw new IllegalStateException Unrecognized AWS http client class name httpClientName String serviceName httpClientName substring i len j retu,java
rn StringUtils lowerCase serviceName private String getHttpClientName Class httpClientClass Classes childClassOf AmazonWebServiceClient class this return httpClientClass getSimpleName public final String getSignerRegionOverride return signerRegionOverride public final void setSignerRegionOverride String signerRegionOverride checkMutability Signer signer computeSignerByURI endpoint signerRegionOverride true synchronized this this signerRegionOverride signerRegionOverride this signerProvider createSignerProvider s,java
igner Deprecated public T extends AmazonWebServiceClient T withRegion Region region setRegion region SuppressWarnings unchecked T t T this return t Deprecated public T extends AmazonWebServiceClient,java
 T withRegion Regions region configureRegion region SuppressWarnings unchecked T t T this return t Deprecated public T extends AmazonWebServiceClient T withEndpoint String endpoint setEndpoint endpoint SuppressWarnings unchecked T t T this return t Deprecated ,java
SdkInternalApi public final void makeImmutable this isImmutable true SdkProtectedApi protected final void checkMutability if isImmutable throw new UnsupportedOperationException Client is immutable when created with the builder protected boolean useStrictHostNameVerification return true Hook to allow clients to override CRC32 calculation behavior Currently only exercised by DynamoDB return True if the service returns CRC32 checksum from t,java
he compressed data false otherwise protected boolean calculateCRC32FromCompressedData return false public String getSignerOverride return clientConfiguration getSignerOverride ,java
 function var app angular module protoApp ngRoute ngMaterial ngMessages ngSanitize com 2fdevs videogular com 2fdevs videogular plugins controls com 2fdevs videogular plugins overlayplay com 2fdevs videogular plugins buffering com 2fdevs videogular plugins poster info vietnamcode nampnq videogular plugins youtube angular filter ,js
 app config function routeProvider routeProvider when splashpage controller SplashPageController templateUrl app views splashpage html when controller VideoController templateUrl app views video html when episode controller EpisodeController templateUrl app views episode html otherwise redirectTo app directive myEnter function return function scope element attrs element bind keydown keypress function event if event which 13 scope apply function scope eval attrs myEnter event preventDefault app controller mainCtrl function scope rootScope log timeout mdSidenav mdPanel console log LOADED scope redirect function topic index if topic ,js
 main window location else window location topic console log topic selected scope selectedIndex index scope formData rootScope test scope formData searchText scope check function var search scope formData searchText console log scope formData searchText works window location custom function debounce func wait context var timer return function debounced var context scope args Array prototype slice call arguments timeout cancel timer timer timeout function timer undefined func apply context args wait 10 function buildDelayedToggler navID return debounce function mdSidenav navID toggle then function log debug toggle navID is done ,js
 200 function buildToggler navID return function Component lookup should always be available since we are not using ng if mdSidenav navID toggle then function log debug toggle navID is done scope toggleLeft buildDelayedToggler left scope toggleRight buildToggler right scope showDialog function episode_id var position mdPanel newPanelPosition absolute center var config attachTo angular element document body templateUrl app views episode html hasBackdrop true panelClass demo dialog example position position trapFocus true zIndex 150 clickOutsideToClose true escapeToClose true focusOnOpen true mdPanel open config scope showAbout function var p,js
osition mdPanel newPanelPosition absolute center var config attachTo angular element document body templateUrl app views about tmpl html hasBackdrop true panelClass demo dialog example position position trapFocus true zIndex 150 clickOutsideToClose true escapeToClose true focusOnOpen true mdPanel open config app config function mdThemingProvider mdThemingProvider theme default primaryPalette teal app config function mdThemingProvider mdThemingProvider theme alt primaryPalette indigo ,js
 package org jhipster store web rest vm ,java
 package com ibm cloud objectstorage http import org apache commons logging Log import org apache commons logging LogFactory import com ibm cloud objectstorage AmazonWebServiceResponse import com ibm cloud objectstorage ResponseMetadata import com ibm cloud objectstorage transform StaxUnmarshallerContext import com ibm cloud objectstorage transform Unmarshaller import com ibm cloud objectstorage transform,java
 VoidStaxUnmarshaller import com ibm cloud objectstorage util StringUtils import java io ByteArrayInputStream import java io IOException import java io InputStream import java util Map import javax xml stream XMLEventReader import javax xml stream XMLInputFactory import javax xml stream XMLStreamException public class StaxResponseHandler T implements HttpResponseHandler AmazonWebServiceResponse T private Unmarshaller T StaxUnmarshallerContext responseUnmarshaller private static final Log log LogFactory getLog com ibm cloud objectstorage request Shared factory ,java
for creating XML event readers private static final XMLInputFactory xmlInputFactory XMLInputFactory newInstance public StaxResponseHandler Unmarshaller T StaxUnmarshallerContext responseUnmarshaller this responseUnmarshaller responseUnmarshaller if this responseUnmarshaller null,java
 this responseUnmarshaller new VoidStaxUnmarshaller T public AmazonWebServiceResponse T handle HttpResponse response throws Exception log trace Parsing service response XML InputStream content response getContent if content null content new ByteArrayInputStream eof getBytes StringUtils UTF8 XMLEventReader eventReader synchronized xmlInputFactory eventReader xmlInputFactory createXMLEventReader content try AmazonWebServiceResponse T awsResponse new AmazonWebServiceResponse T StaxUnmarshallerContext unmarshallerContext new StaxUnmarshallerContext eventReader response getHeaders unmarshallerContext registerMetadataExpression ResponseMetadata RequestId 2 ResponseMetadata AWS_REQUEST_ID ,java
 unmarshallerContext registerMetadataExpression requestId 2 ResponseMetadata AWS_REQUEST_ID registerAdditionalMetadataExpressions unmarshallerContext T result responseUnmarshaller unmarshall unmarshallerContext awsResponse setResult result Map String String metadata unmarshallerContext getMetadata Map String String responseHeaders response getHeaders if responseHeaders null if responseHeaders get X_AMZN_REQUEST_ID_HEADER null metadata put ResponseMetadata AWS_REQUEST_ID responseHeaders get X_AMZN_REQUEST_ID_HEADER awsResponse setResponseMetadata getResponseMetadata metadata log trace Done parsing service response return awsResponse catch XMLStreamException e If the exception was caused by an IOE wr,java
ap this in an IOE so that it will be exposed to the RetryPolicy if e getNestedException instanceof IOException throw new IOException e throw e finally try eventReader close catch XMLStreamException e log warn Error closing xml parser e protected ResponseMetadata getResponseMetadata Map String String metadata return new ResponseMetadata metadata Hook for subclasses to override in order to collect additional metadata from service responses param unmarshallerContext The unmarshaller context used to configure a service s response,java
 data protected void registerAdditionalMetadataExpressions StaxUnmarshallerContext unmarshallerContext public boolean needsConnectionLeftOpen return false ,java
 dependencies const express require express const tesseract require node tesseract const multer require multer const path require path const uuid require uuid const upload multer for parsing multipart form data let the os take care of removing zombie tmp files const tmpdir require os tmpdir const fs require fs const app express const options psm 8 app get info function req res result app ocr version 0 1 health good res json result app post process upload single image function req res next console log req file let output path resolve tmpdir ocr svc uuid v4 fs writeFile output req file buffer function err if err return console log err console log The file was saved as output tesseract process output options function err text result Detected Text text trim n console log re,js
sult res send result app post process_pubg upload single image function req res next console log req file let output path resolve tmpdir ocr svc uuid v4 fs writeFile output req file buffer function err if err return console log err console log The file was saved as output tesseract process output options function err text if err res json number 100 console log Tesseract failed to process file s with error s output err else let number parseFloat text trim Return any garbage as 100 dead out of game etc if isNaN number number 100 Return 0 as 100 0 isn t possible and it is usually a 100 if number 0 number 100 let result number number console log result res json result fs unlink output ,js
 start http server and log success app listen 3001 function console log OCR service listening on port 3001 ,js
var AWS require core var util require util var QueryParamSerializer require query query_param_serializer var Shape require model shape function buildRequest req var operation req service api operations req operation var httpRequest req httpRequest httpRequest headers Content Type application x www form urlencoded charset utf 8 httpRequest params Version req service api apiVersion Action operation name convert the request parameters into a list of query params e g Deeply NestedParam 0 Name value var builder new QueryParamSerializer builder serialize req params operation input function name value httpRequest params name value httpRequest body util queryParamsToString httpRequest params function extractError resp var data body resp httpResponse body toString if body match UnknownOperationException data Code UnknownOperation Message,js
 Unknown operation resp request operation else data new AWS XML Parser parse body if data requestId resp requestId resp requestId data requestId if data Errors data data Errors if data Error data data Error if data Code resp error util error new Error code data Code message data Message else resp error util error new Error code resp httpResponse statusCode message null function extractData resp var req resp request var operation req service api operations req operation var shape operation output var origRules shape if origRules resultWrapper var tmp Shape create type structure tmp members origRules resultWrapper shape tmp memberNames origRules resultWrapper util property shape name shape resultWrapper shape tmp var parser new AWS XML Parser TODO Refactor XML Parser,js
 to parse RequestId from response if shape shape members shape members _XAMZRequestId var requestIdShape Shape create type string api protocol query requestId shape members _XAMZRequestId requestIdShape var data parser parse resp httpResponse body toString shape resp requestId data _XAMZRequestId data requestId if data _XAMZRequestId delete data _XAMZRequestId if origRules resultWrapper if data origRules resultWrapper util update data data origRules resultWrapper delete data origRules resultWrapper resp data data module exports buildRequest buildRequest extractError extractError extractData extractData ,js
 Copyright 2015 The TensorFlow Authors All Rights Reserved Licensed under the Apache License Version 2 0 the License you may not use this file except in compliance with the License You may obtain a copy of the License at http www apache org licenses LICENSE 2 0 Unless required by applicable law or agreed to in writing software distributed under the License is distributed on an AS IS BASIS WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND either express or implied See the License for the specific language governing permissions and limitations under the License pylint disable g bad import order unused import Tests the graph freezing tool from __future__ import absolute_import from __future__ import division from __future__ import print_function import tensorflow as tf from tensorflow examples image_retraining import retrain from tensorflow python framework import test_util cla,py
ss ImageRetrainingTest test_util TensorFlowTestCase def dummyImageLists self return label_one dir somedir training image_one jpg image_two jpg testing image_three jpg image_four jpg validation image_five jpg image_six jpg label_two dir otherdir training image_one jpg image_two jpg testing image_three jpg image_four jpg validation image_five jpg image_six jpg def testGetImagePath self image_lists self dummyImageLists self assertEqual image_dir somedir image_one jpg retrain get_image_path image_lists label_one 0 image_dir training self assertEqual image_dir otherdir image_four jpg retrain get_image_path image_lists l,py
abel_two 1 image_dir testing def testGetBottleneckPath self image_lists self dummyImageLists self assertEqual bottleneck_dir somedir image_five jpg txt retrain get_bottleneck_path image_lists label_one 0 bottleneck_dir validation def testShouldDistortImage self self assertEqual False retrain should_distort_images False 0 0 0 self assertEqual True retrain should_distort_images True 0 0 0 self assertEqual True retrain should_distort_images False 10 0 0 self assertEqual True retrain should_distort_images False 0 1 0 self assertEqual True retrain should_distort_images False 0 0 50 def testAddInputDistortions self with tf Graph as_default with tf Session as sess retrain add_input_distortions True 10 10 10 self assertIsNotNone sess graph get_tensor_by_name Distor,py
tJPGInput 0 self assertIsNotNone sess graph get_tensor_by_name DistortResult 0 tf test mock patch object retrain FLAGS learning_rate 0 01 def testAddFinalTrainingOps self flags_mock with tf Graph as_default with tf Session as sess bottleneck tf placeholder tf float32 1 retrain BOTTLENECK_TENSOR_SIZE name retrain BOTTLENECK_TENSOR_NAME split 0 retrain add_final_training_ops 5 final bottleneck self assertIsNotNone sess graph get_tensor_by_name final 0 def testAddEvaluationStep self with tf Graph as_default final tf placeholder tf float32 1 name final gt tf placeholder tf float32 1 name gt self assertIsNotNone retrain add_evaluation_step final gt if __name__ __main__ tf test main ,py
 package com ibm cloud objectstorage auth import java net URI import java text SimpleDateFormat import java util Date import java util List import java util Map import java util SortedMap import java util TimeZone import java util TreeMap import com ibm cloud objectstorage SdkClientException import com ibm cloud objectstorage SignableRequest Signer implementation responsible for signing an AWS query string request ,java
 according to the various signature versions and hashing algorithms public class QueryStringSigner extends AbstractAWSSigner implements Signer private Date overriddenDate public void sign SignableRequest request AWSCredentials credentials throws SdkClientException sign request SignatureVersion V2 SigningAlgorithm HmacSHA256 credentials This signer will add following authentication parameters to the request AWSAccessKeyId SignatureVersion SignatureMethod Timestamp Signature ,java
 param request request to be signed param version signature version 2 is recommended param algorithm signature algorithm HmacSHA256 is recommended public void sign SignableRequest request SignatureVersion version SigningAlgorithm algorithm AWSCredentials credentials throws SdkClientException annonymous credentials don t sign if credentials instanceof AnonymousAWSCredentials return AWSCredentials sanitizedCredentials sanitizeCredentials credentials request addParameter AWSAccessKeyId sanitizedCredentials getAWSAccessKeyId request addParameter SignatureVersion version toString int timeOffset request getTimeOffset request addParameter Timestamp getFormattedTimestamp timeOffset if sanitizedCredentials instanceof AWSSessionCredentials ,java
 addSessionCredentials request AWSSessionCredentials sanitizedCredentials String stringToSign null if version equals SignatureVersion V1 stringToSign calculateStringToSignV1 request getParameters else if version equals SignatureVersion V2 request addParameter SignatureMethod algorithm toString stringToSign calculateStringToSignV2 request else throw new SdkClientException Invalid Signature Version specified String signatureValue signAndBase64Encode stringToSign sanitizedCredentials getAWSSecretKey algorithm request addParameter Signature signatureValue private String calculateStringToSignV1 Map String List String ,java
parameters StringBuilder data new StringBuilder SortedMap String List String sorted new TreeMap String List String String CASE_INSENSITIVE_ORDER sorted putAll parameters for Map Entry String List String entry sorted entrySet for String value entry getValue data append entry getKey append value return data toString private String calculateStringToSignV2 SignableRequest request throws SdkClientException URI endpoint request getEndpoint StringBuilder data new StringBuilder data append POST app,java
end n append getCanonicalizedEndpoint endpoint append n append getCanonicalizedResourcePath request append n append getCanonicalizedQueryString request getParameters return data toString private String getCanonicalizedResourcePath SignableRequest request String resourcePath if request getEndpoint getPath null resourcePath request getEndpoint getPath if request getResourcePath null if resourcePath length 0 resourcePath endsWith request getResourcePath startsWith resourcePath resourcePath request getResourcePath else if resourcePath endsWith resourcePath if resourcePath startsWith resourcePath resourcePat,java
h if resourcePath startsWith resourcePath resourcePath substring 1 return resourcePath private String getFormattedTimestamp int offset SimpleDateFormat df new SimpleDateFormat yyyy MM dd T HH mm ss SSS Z df setTimeZone TimeZone getTimeZone UTC if overriddenDate null return df format overriddenDate else return df format getSignatureDate offset void overrideDate Date date this overriddenDate date Override protected void addSessionCredentials SignableRequest request AWSSessionCredentials credentials request addParameter SecurityToken credentials getSessionToken ,java
 package com ibm research ai ki kbp embeddings import java io import java util HashMap import java util Iterator import java util Map import java util Properties import java util function Function import java util zip GZIPInputStream import java util zip GZIPOutputStream import com ibm research ai ki util String values are stored UTF 8 Floats and ints are ,java
in network byte order java standard big endian author mrglass public class EmbeddingFormat public String name public Properties hyperparameters public String items public float vectors public int shapes public int itemSize public boolean verbose,java
 false public static double cosine float v1 float v2 if v1 length v2 length throw new IllegalArgumentException vectors not same dimension v1 length v2 length double numer 0 double len1 0 double len2 0 for int i 0 i v1 length i double d1 v1 i double d2 v2 i numer d1 d2 len2 d2 d2 len1 d1 d1 double length Math sqrt len1 len2 if length 0 return 0 return numer length public EmbeddingFormat public EmbeddingFormat File file read file public EmbeddingFormat File file boolean vocabOnly read file vocabOnly new VocabOnlyLoad new FullyLoad public Map String Integer getItem2Ndx Map String Integer id2ndx new HashMap for int i 0 i items length i id2ndx put items i i return id2ndx public Map St,java
ring Integer getItem2Ndx Function String String normalizer Map String Integer id2ndx new HashMap for int i 0 i items length i String normalized normalizer apply items i Integer first id2ndx put normalized i if first null id2ndx put normalized first return id2ndx private static int readShapes DataInput in try int numTensors in readInt int shapes new int numTensors for int ti 0 ti numTensors ti int dims in readInt int shape new int dims for int si 0 si shape length si shape si in readInt shapes ti shape return shapes catch Exception e throw new Error e private static void writeShapes DataOutputStream out int shapes try out writeInt shapes length for int ti 0 ti shapes length ti out writeInt shapes ti length for int s shapes ti out writeInt s ,java
 catch Exception e throw new Error e public static String readUTFSimpler DataInput in try int numBytes in readInt byte raw new byte numBytes in readFully raw String str new String raw UTF 8 if 0 in readByte throw new Error Bad format str return str catch Exception e throw new Error e public static void writeUTFSimpler DataOutput out String str try byte raw str getBytes UTF ,java
8 out writeInt raw length out write raw out writeByte 0 catch Exception e throw new Error e public int calculateItemSize int itemSizeCalc 0 for int shape shapes int size 1 for int si shape size si itemSizeCalc size return itemSizeCalc public interface VectorLoader public void init int numItems int itemSize public void load int ndx String item float vector public class FullyLoad implements VectorLoader Override public void init int numItems int itemSize items new String numItems vectors new float numItems Override public void load int ndx String item float vector items ndx item vectors ndx vector public class VocabOnlyLoad implements VectorLoader Override public void ini,java
t int numItems int itemSize items new String numItems Override public void load int ndx String item float vector items ndx item public static class Reader public EmbeddingFormat metadata public int numItems public Iterator Pair String float iter TODO make the read method use this public Reader File file try DataInputStream in getDataInput file CONSIDER read magic number metadata new EmbeddingFormat read name metadata name readUTFSimpler in read hyperparameters metadata hyperparameters new Properties metadata hyperparameters load new StringReader readUTFSimpler in read number of items and shapes of each item metadata shapes readShapes in metadata itemSize in readInt if metadata itemSize 0 metadata itemSize metadata calculateItemSize throw new Error item size does not match shapes metadata itemSize vs m,java
etadata calculateItemSize if metadata itemSize 0 metadata verbose System out println Vocabulary and metadata only numItems in readInt iter new Iterator Pair String float int wordi 0 Override public boolean hasNext return wordi numItems Override public Pair String float next String item readUTFSimpler in float vector null if metadata itemSize 0 vector new float metadata itemSize for int dimi 0 dimi metadata itemSize dimi try vector dimi in readFloat catch Exception e System err println On wordi dim dimi Lang error e wordi if wordi numItems try in close catch Exception e return Pair of item vector catch IOException e Lang error e ,java
 TODO support reading from DataInputStream so we can read ef from hdfs private static DataInputStream getDataInput File file if file null throw new IllegalArgumentException Null file if file exists throw new IllegalArgumentException No such file file getAbsolutePath Or FileUtil getDataInput filename try int BUFFER_SIZE 1024 InputStream is new FileInputStream file if file getName endsWith gz is new GZIPInputStream is BUFFER_SIZE else is new BufferedInputStream is BUFFER_SIZE return new DataInputStream is catch Exception e return Lang error e Strings written as number of bytes as int32 utf 8 encoded string 0 byte All numbers are network byte order Format modelName as string hyperparameters as string shapes of items int32 for number of tensors for each tensor int32 number of dimensions f,java
or each dimension int32 for size of this dimension itemSize as int32 either zero to indicate only the vocabulary is stored for Annoy or the actual itemSize which should match the shape number of items as int32 for each item item name as string values of embedding as float32 stored in same order as multidimensional array in C The zero byte terminating the strings is just for validation to ensure there isn t some off by one error resulting in the embeddings being loaded as garbage param file public void read File file read file null public void read File file VectorLoader loader try DataInputStream in getDataInput file read DataInput in loader catch IOException e Lang error e public void read InputStream stream VectorLoader loader final DataInput in new DataInputStream stream read in loader Note does ,java
not close the DataInput doesn t even know if it is a stream param in param loader public void read DataInput in VectorLoader loader try CONSIDER read magic number read name name readUTFSimpler in read hyperparameters hyperparameters new Properties hyperparameters load new StringReader readUTFSimpler in read number of items and shapes of each item this shapes readShapes in itemSize in readInt if itemSize 0 itemSize calculateItemSize throw new Error item size does not match shapes itemSize vs calculateItemSize if itemSize 0 verbose System out println Vocabulary and metadata only if loader null loader itemSize 0 new VocabOnlyLoad new FullyLoad int numItems in readInt loader init numItems itemSize if verbose System out println Loading numItems with itemSize size System out flush ,java
 for int wordi 0 wordi numItems wordi String item readUTFSimpler in float vector null if itemSize 0 vector new float itemSize for int dimi 0 dimi itemSize dimi try vector dimi in readFloat catch EOFException e System err println On wordi dim dimi throw e loader load wordi item vector if verbose wordi 100000 0 System out println loading word wordi item catch IOException e Lang error e class ItemVectorIter implements Iterator Pair String float ItemVectorIter wordi 0 if vectors null items length vectors length throw new IllegalStateException items length vectors length int wordi 0 Override public boolean hasNext return wordi items length Override public Pair String float next Pair String float ret ,java
 Pair of items wordi vectors null null vectors wordi wordi return ret public void write File file write file this items length new ItemVectorIter public void write File file int numItems Iterator Pair String float iter try int BUFFER_SIZE 1024 FileUtil ensureWriteable file OutputStream os new FileOutputStream file if file getName endsWith gz os new GZIPOutputStream os BUFFER_SIZE else os new BufferedOutputStream os BUFFER_SIZE write os numItems iter os close catch Exception e Lang error e public void write OutputStream stream int numItems Iterator Pair String float iter try DataOutputStream out new DataOutputStream stream writeUTFSimpler out name StringWriter writer new StringWriter hyperparameters store writer null writeUTFSimpler out writ,java
er toString writeShapes out shapes out writeInt itemSize out writeInt numItems int itemCount 0 while iter hasNext itemCount Pair String float wv iter next writeUTFSimpler out wv first if wv second null for float f wv second out writeFloat f if itemCount numItems throw new IllegalArgumentException expecting numItems but read itemCount out flush catch Exception e Lang error e ,java
 package com ibm og supplier import static com google common base Preconditions checkArgument import static com google common base Preconditions checkNotNull import java util List import java util Random import com google common base Supplier import com google common collect Lists public class RandomSupplier T implements Supplier T private final List Choice T choices private final Random random private RandomSupplier final Builder T builder this choices checkNotNull builder choices checkArgument this choices isEmpty choices must not be empty this random checkNotNull builder random private static class Choice S private final S value private final Su,java
pplier extends Number weight private double currentWeight private Choice final S choice final Supplier extends Number weight this value choice this weight weight this currentWeight 0 0 Override public T get final double totalWeight getCurrentWeights final double rnd this random nextDouble totalWeight double previousWeights 0 0 for final Choice T choice this choices if rnd previousWeights choice currentWeight return choice value previousWeights choice currentWeight throw new IllegalStateException Incorrect weight calculation private double getCurrentWeights double currentTotalWeight 0 0 for final Choice T choice this choices choice currentWeight choice weight get doubleValue currentTotalWeight choice currentWeight return currentTotalWeight A builder of random choice supplie,java
r instances param T the type of values to add to this builder public static class Builder T private final List Choice T choices private Random random public Builder this choices Lists newArrayList this random new Random public Builder T withChoice final T choice return withChoice choice 1 0 public Builder T withChoice final T choice final double weight checkArgument weight 0 0 weight must be 0 0 s weight return withChoice choice Su,java
ppliers of weight public Builder T withChoice final T choice final Supplier extends Number weight checkNotNull choice checkNotNull weight this choices add new Choice T choice weight return this public Builder T withRandom final Random random this random random return this public RandomSup,java
plier T build return new RandomSupplier T this Override public String toString final StringBuilder s new StringBuilder RandomSupplier for final Choice T choice this choices s append String format nchoice s weight s choice value choice weight return s append String format n toString ,java
source perf_test perf_harness_2 stac_benchmark log sh log Cleaning up log dropping caches log for i in seq 15 25 do echo red i ssh red i echo 3 proc sys vm drop_caches done log cleaning dirs log perf_test perf_harness clean_files_and_dirs_ALEX sh log Finished cleanup ,sh
 package com ibm cloud objectstorage services s3 model import java io Serializable import com ibm cloud objectstorage AmazonWebServiceRequest p,java
ublic class GetBucketLocationRequest extends AmazonWebServiceRequest implements Serializable private String bucketName public GetBucketLocationRequest String bucketName this bucketName bucketName public String getBucketName return bucketName public void setBucketName String bucketName this bucketName bucketN,java
ame public GetBucketLocationRequest withBucketName String bucketName setBucketName bucketName return this ,java
import React from react import Button from components Button import constants from src constants const unitSpace 16 class MotionPreview extends React Component constructor super this state left unitSpace top 100 rotation 0 playMotion this setState left this state left unitSpace parseFloat this props distance unitSpace unitSpace width this state width this props width2 this props width1 this props width2 height this state height this props height2 this props height1 this props height2 rotation this state rotation this props rotation 0 this props rotation opacity this state opacity this props opacity 0 this props opacity componentWillMount this componentWillUpdate this props this state componentWillUpdate nextProps nextState if nextProps width1 this state width nextProps height1 this state height nextProps rotation this state,js
 rotation nextProps opacity this state opacity this setState width nextProps width1 height nextProps height1 rotation nextProps rotation opacity nextProps opacity render return div className MotionPreview style marginTop 1rem position relative width 100 height Math max 400 this props height1 this props height2 48 px backgroundColor 252525 div style backgroundColor 171717 display flex flexDirection row alignItems center Button label Play normalColor 0F6FFF hoverColor 054ADA color f3f3f3 label Play this motion onClick evt this playMotion span style color BEBEBE marginLeft 1rem span style fontSize 14px Duration Math round this props duration ms span span style fontSize 14px marginLeft ,js
 1rem marginRight 1rem span span style fontSize 14px Easing this props easing span span div div style position absolute width this props prop constants PROPERTY_SCALE this state width this props width1 px height this props prop constants PROPERTY_SCALE this state height this props height1 px transitionPropperty all transitionTimingFunction this props easing transitionDuration this props duration ms backgroundColor constants MOMENT_PRODUCTIVE F3F3F3 constants MOMENT_EXPRESSIVE 00BAB6 constants MOMENT_NARRATIVE 0F6FFF constants MOMENT_CELEBRATORY D7306D this props motionMode top 64px left this props prop constants PROPERTY_MOVE this state left unitSpace px transform rotate this props prop constants PROPERTY_ROTATE this state rotation 0 deg opacity this props pr,js
op constants PROPERTY_FADE this state opacity 1 div export default MotionPreview ,js
 define Modernizr testAllProps function Modernizr testAllProps Modernizr addTest backgroundcliptext function return testAllProps backgroundClip text ,js
 bin bash Generate keystores in keystore for a given IP if 1 then echo Usage gen keystore sh IP exit 1 fi IP 1 if z JAVA_HOME then echo JAVA_HOME is not set Please set and re run this script exit 1 fi echo Checking for keytool keytool help dev null 2 1 if 0 then echo Error keytool is missing from the path please correct this then retry exit 1 fi echo Checking for openssl openssl version dev null 2 1 if 0 then echo Error openssl is missing from the path please correct this then retry exit 1 fi echo Generating key stores using IP create a ca cert we ll import into all our trust stores keytool genkeypair alias gameonca keypass gameonca storepass gameonca keystore keystore cakey jks keyalg RSA keysize 2048 dname CN GameOnLocalDevCA OU The Amazing GameOn Certificate Authority O The Ficticious GameOn Company L Earth ST Happy C CA ext KeyUsage keyCertS,sh
ign ext BasicConstraints critical ca true validity 9999 export the ca cert so we can add it to the trust stores keytool exportcert alias gameonca keypass gameonca storepass gameonca keystore keystore cakey jks file keystore gameonca crt rfc create the keypair we plan to use for our ssl jwt signing keytool genkeypair alias gameonappkey keypass testOnlyKeystore storepass testOnlyKeystore keystore keystore key jks keyalg RSA sigalg SHA1withRSA dname CN IP OU GameOn Application O The Ficticious GameOn Company L Earth ST Happy C CA validity 365 create the signing request for the app key keytool certreq alias gameonappkey keypass testOnlyKeystore storepass testOnlyKeystore keystore keystore key jks file keystore appsignreq csr sign the cert with the ca keytool gencert alias gameonca keypass gameonca storepass gameonca keystore keystore cakey jks infile keystore appsignreq,sh
 csr outfile keystore app cer import the ca cert keytool importcert alias gameonca storepass testOnlyKeystore keypass testOnlyKeystore keystore keystore key jks noprompt file keystore gameonca crt import the signed cert keytool importcert alias gameonappkey storepass testOnlyKeystore keypass testOnlyKeystore keystore keystore key jks noprompt file keystore app cer change the alias of the signed cert keytool changealias alias gameonappkey destalias default storepass testOnlyKeystore keypass testOnlyKeystore keystore keystore key jks export the signed cert in pem format for proxy to use keytool exportcert alias default storepass testOnlyKeystore keypass testOnlyKeystore keystore keystore key jks file keystore app pem rfc export the private key in pem format for proxy to use keytool importkeystore srckeystore keystore key jks destkeystore keystore key p12 srcstoretype j,sh
ks deststoretype pkcs12 srcstorepass testOnlyKeystore deststorepass testOnlyKeystore srckeypass testOnlyKeystore destkeypass testOnlyKeystore srcalias default openssl pkcs12 in keystore key p12 out keystore private pem nocerts nodes password pass testOnlyKeystore concat the public and private key for haproxy cat keystore app pem keystore private pem keystore proxy pem add the cacert to the truststore keytool importcert alias gameonca storepass truststore keypass truststore keystore keystore truststore jks noprompt trustcacerts file keystore gameonca crt add all jvm cacerts to the truststore keytool importkeystore srckeystore JAVA_HOME lib security cacerts destkeystore keystore truststore jks srcstorepass changeit deststorepass truststore clean up the public cert rm f keystore public crt ,sh
 package sample chirper friend api import javax annotation Nullable import javax annotation concurrent Immutable import com fasterxml jackson annotation JsonCreator import com fasterxml jackson databind annotation JsonDeserialize import com google common base MoreObjects import com google common base Preconditions Immutable JsonDeserialize public final class FriendId public final String friendId JsonCreator public FriendId String friendId this friendId Preconditions checkNotNull friendId friendId Override public boolean equals Nullable Object another if this another return true return another instanceof FriendId equalTo FriendId another private boolean equalTo FriendId another return friendId equals another friendId Override public int hashCode int h 31 h h 17 friendId hashCode return h Override pub,java
lic String toString return MoreObjects toStringHelper FriendId add friendId friendId toString ,java
describe Modernizr Base function var modernizrBase var cleanup before function done define package function return var req requirejs config context Math random toString slice 2 baseUrl src paths cleanup test cleanup req Modernizr cleanup function _ModernizrBase _cleanup modernizrBase _ModernizrBase cleanup _cleanup done it should return an object function expect modernizrBase to be an object after function cleanup ,js
 package com ibm migr db2 public class DataSize public int count public long size public DataSize int count long size this count count this size size ,java
 package com ibm og api import com google common util concurrent ListenableFuture public interface Client ListenableFuture Response execute Request request ListenableFuture Boolean shutdown boolean imm,java
ediate ,java
 package com ibm cloud objectstorage jmx spi import org apache commons logging LogFactory public interface SdkMBeanRegistry public boolean registerMetricAdminMBean String objectName Returns true if the unregistration of the MBean under the given object name succeed,java
ed false otherwise public boolean unregisterMBean String objectName public boolean isMBeanRegistered String objectName public static class Factory private static final SdkMBeanRegistry registry static SdkMBeanRegistry rego try Class c Class forName com ibm cloud objectstorage jmx SdkMBeanRegistrySupport rego SdkMBeanRegistry c newInstance catch Exception e LogFactory getLog SdkMBeanRegistry class debug Failed to load the JMX implementation module JMX is disabled e rego NONE registry rego public static SdkMBeanRegistry getMBeanRegistry return registry static final SdkMBeanR,java
egistry NONE new SdkMBeanRegistry Override public boolean registerMetricAdminMBean String objectName return false Override public boolean unregisterMBean String objectName return false Override public boolean isMBeanRegistered String objectName return false ,java
package sample chirper chirp impl import akka Done import akka NotUsed import com lightbend lagom javadsl persistence PersistentEntity import sample chirper chirp impl ChirpTimelineCommand AddChirp import sample chirper chirp impl ChirpTimelineEvent ChirpAdded import javax inject Inject import java util Optional class ChirpTimelineEntity extends PersistentEntity ChirpTimelineCommand ChirpTimelineEvent NotUsed private final ChirpTopic topic Inject ChirpTimelineEntity ChirpTopic topic this topic topic Override public Behavior initialBehavior Optional NotUsed snapshotState BehaviorBuilder b newBehaviorBuilder NotUsed getInstance b setCommandHandler AddChirp class this addChirp b setEventHandler ChirpAdded class evt state return b build private Persist addChirp AddChirp cmd CommandContext Done ctx return ctx thenPersist new ChirpAdded cmd chirp evt ctx re,java
ply Done getInstance topic publish cmd chirp ,java
 coding utf 8 pytorch seq2seq documentation build configuration file created by sphinx quickstart on Tue Jun 27 14 35 26 2017 This file is execfile d with the current directory set to its containing dir Note that not all possible configuration values are present in this autogenerated file All configuration values have a default values that are commented out serve to show the default If extensions or modules to document with autodoc are in another directory add these directories to sys path here If the directory is relative to the documentation root use os path abspath to make it absolute like shown here import os import sys sys path insert 0 os path abspath seq2seq import seq2seq import sphinx_rtd_theme General configuration If your documentation needs a minimal Sphinx version state it here needs_sphinx 1 0 Add any Sphinx extension module names here as strings Th,py
ey can be extensions coming with Sphinx named sphinx ext or your custom ones extensions sphinx ext autodoc sphinx ext autosummary sphinx ext doctest sphinx ext intersphinx sphinx ext todo sphinx ext coverage sphinx ext mathjax sphinx ext ifconfig sphinx ext napoleon sphinx ext viewcode napoleon_use_ivar True Add any paths that contain templates here relative to this directory templates_path _templates Source parsers source_parsers md recommonmark parser CommonMarkParser The suffix es of source filenames You can specify multiple suffix as a list of string source_suffix rst md source_suffix rst The master toctree document master_doc index General information about the project project u pytorch seq2seq copyright u 2017 pytorch seq2seq Contritors author u pytorch seq2seq Contributors The version info for the project you re documenting acts as replac,py
ement for version and release also used in various other places throughout the built documents The short X Y version version u 0 1 5 The full version including alpha beta rc tags release u 0 1 5 The language for content autogenerated by Sphinx Refer to documentation for a list of supported languages This is also used if you do content translation via gettext catalogs Usually you set language from the command line for these cases language None List of patterns relative to source directory that match files and directories to ignore when looking for source files This patterns also effect to html_static_path and html_extra_path exclude_patterns The name of the Pygments syntax highlighting style to use pygments_style sphinx If true todo and todoList produce output else they produce nothing todo_include_todos True Options for HTML output The theme to use for HTML and HTML Help pa,py
ges See the documentation for a list of builtin themes html_theme sphinx_rtd_theme html_theme_path sphinx_rtd_theme get_html_theme_path Theme options are theme specific and customize the look and feel of a theme further For a list of options available for each theme see the documentation html_theme_options Add any paths that contain custom static files such as style sheets here relative to this directory They are copied after the builtin static files so a file named default css will overwrite the builtin default css html_static_path _static Options for HTMLHelp output Output file base name for HTML help builder htmlhelp_basename PyTorch seq2seqdoc Options for LaTeX output latex_elements The paper size letterpaper or a4paper papersize letterpaper The font size 10pt 11pt or 12pt ,py
 pointsize 10pt Additional stuff for the LaTeX preamble preamble Latex figure float alignment figure_align htbp Grouping the document tree into LaTeX files List of tuples source start file target name title author documentclass howto manual or own class latex_documents master_doc pytorch seq2seq tex u pytorch seq2seq Documentation u Kyle Gao Kshitij Fadnis Avinash Balakrishnan Ryan Musa Tejaswini Pedapati manual Options for manual page output One entry per manual page List of tuples source start file name description authors manual section man_pages master_doc pytorch seq2seq u pytorch seq2seq Documentation author 1 Options for Texinfo output Grouping the document tree into Texinfo files List of tuples source start file target name title author dir,py
 menu entry description category texinfo_documents master_doc pytorch seq2seq u pytorch seq2seq Documentation author pytorch seq2seq One line description of project Miscellaneous Example configuration for intersphinx refer to the Python standard library intersphinx_mapping python https docs python org None numpy http docs scipy org doc numpy None PyTorch http pytorch org docs master None ,py
 package sample chirper activity impl import static com lightbend lagom javadsl testkit ServiceTest import static java util concurrent CompletableFuture completedFuture import static java util concurrent TimeUnit SECONDS import static org junit Assert assertEquals import com lightbend lagom javadsl api ServiceCall import com lightbend lagom javadsl api transport NotFound import com lightbend lagom javadsl testkit ServiceTest Setup import java util Arrays import java util Optional import org junit Test import org pcollections PSequence import org pcollections TreePVector import sample chirper activity api ActivityStreamService import sample chirper chirp api import sample chirper friend api import akka NotUsed import akka stream javadsl Source import akka stream testkit TestSubscriber Probe import akka stream testkit javadsl TestSink public class ActivityStreamServiceTest private final Setup setup default,java
Setup withCluster false configureBuilder b b overrides bind FriendService class to FriendServiceStub class bind ChirpService class to ChirpServiceStub class Test public void shouldGetLiveFeed throws Exception withServer setup server ActivityStreamService feedService server client ActivityStreamService class Source Chirp chirps feedService getLiveActivityStream usr1 invoke toCompletableFuture get 3 SECONDS Probe Chirp probe chirps runWith TestSink probe server system server materializer probe request 10 assertEquals msg1 probe expectNext message assertEquals msg2 probe expectNext message probe cancel Test public void shouldGetHistoricalFeed throws Exception withServer setup server ActivityStreamService feedService server client ActivityStreamService class Source Chirp chirps feedService getHistoricalActivi,java
tyStream usr1 invoke toCompletableFuture get 3 SECONDS Probe Chirp probe chirps runWith TestSink probe server system server materializer probe request 10 assertEquals msg1 probe expectNext message probe expectComplete static class FriendServiceStub implements FriendService private final User usr1 new User usr1 User 1 Optional of TreePVector String empty plus usr2 private final User usr2 new User usr2 User 2 Override public ServiceCall NotUsed User getUser String userId return req if userId equals usr1 userId return completedFuture usr1 else if userId equals usr2 userId return completedFuture usr2 else throw new NotFound userId Override public ServiceCall User NotUsed createUser return req completedFuture NotUsed getInstance Override ,java
 public ServiceCall FriendId NotUsed addFriend String userId return req completedFuture NotUsed getInstance Override public ServiceCall NotUsed PSequence String getFollowers String userId return req if userId equals usr1 userId return completedFuture TreePVector String empty else if userId equals usr2 userId return completedFuture TreePVector String empty plus usr1 else throw new NotFound userId static class ChirpServiceStub implements ChirpService Override public ServiceCall Chirp NotUsed addChirp String userId return req completedFuture NotUsed getInstance Override public ServiceCall LiveChirpsRequest Source Chirp getLiveChirps return req if req userIds contains usr2 Chirp c1 new Chirp usr2 msg1 Chirp c2 new Chirp usr2 msg2 return co,java
mpletedFuture Source from Arrays asList c1 c2 else return completedFuture Source empty Override public ServiceCall HistoricalChirpsRequest Source Chirp getHistoricalChirps return req if req userIds contains usr2 Chirp c1 new Chirp usr2 msg1 return completedFuture Source single c1 else return completedFuture Source empty ,java
 function root factory if typeof exports object typeof module object module exports module exports factory require angular require highlight js else if typeof define function define amd define angular hljs factory else root returnExports factory root angular root hljs this function angular hljs function attrGetter attrs return function name switch name case escape return angular isDefined attrs hljsEscape attrs hljsEscape attrs escape case no escape return angul,js
ar isDefined attrs hljsNoEscape attrs hljsNoEscape attrs noEscape case onhighlight return angular isDefined attrs hljsOnhighlight attrs hljsOnhighlight attrs onhighlight function shouldHighlightStatics attrs var should true angular forEach source include function name if attrs name should false return should var ngModule angular module hljs ngModule provider hljsService function var _hljsOptions return setOptions function options angular extend _hljsOptions options getOptions function return angular copy _hljsOptions get function hljs configure angular noop _hljsOptions return hljs ngModule factory hljsCache cacheFactory function cacheFactory return cacheFactor,js
y hljsCache ngModule controller HljsCtrl hljsCache hljsService interpolate window log function HljsCtrl hljsCache hljsService interpolate window log var ctrl this var _elm null _lang null _code null _interpolateScope false _stopInterpolateWatch null _hlCb null var RE_INTERPOLATION_STR escapeRe interpolate startSymbol s escapeRe interpolate endSymbol var INTERPOLATION_SYMBOL ctrl init function codeElm _elm codeElm ctrl setInterpolateScope function scope _interpolateScope scope if _code ctrl highlight _code ctrl setLanguage function lang _lang lang if _code ctrl highlight _code ctrl highlightCallback function cb _hlCb cb ctrl _highlight function code if _elm return var res ,js
cacheKey interpolateData _code code preserve raw code if _interpolateScope interpolateData extractInterpolations code code interpolateData code if _lang cache key language scope code cacheKey ctrl _cacheKey _lang _interpolateScope code res hljsCache get cacheKey if res res hljsService highlight _lang hljsService fixMarkup code true hljsCache put cacheKey res else cache key scope code cacheKey ctrl _cacheKey _interpolateScope code res hljsCache get cacheKey if res res hljsService highlightAuto hljsService fixMarkup code hljsCache put cacheKey res code res value if _interpolateScope _stopInterpolateWatch angular noop if interpolateData code recoverInterpolations code interpolateData tokens var interpolateFn int,js
erpolate code _stopInterpolateWatch _interpolateScope watch interpolateFn function newVal oldVal if newVal oldVal _elm html newVal _elm html interpolateFn _interpolateScope else _elm html code language as class on the code tag _elm addClass res language if _hlCb null angular isFunction _hlCb _hlCb ctrl highlight debounce ctrl _highlight 17 ctrl clear function if _elm return _code null _elm text ctrl release function _elm null _interpolateScope null _stopInterpolateWatch angular noop _stopInterpolateWatch null ctrl _cacheKey function var args Array prototype slice call arguments glue angular highlightjs return args join glue http davidwalsh name function debounce function debounce func wait immediate,js
 var timeout return function var context this args arguments var later function timeout null if immediate func apply context args var callNow immediate timeout window clearTimeout timeout timeout window setTimeout later wait if callNow func apply context args Ref http stackoverflow com questions 3115150 how to escape regular expression special characters using javascript function escapeRe text asString var replacement asString return text replace s g replacement function extractInterpolations code var interpolateTokens re new RegExp RE_INTERPOLATION_STR g newCode lastIndex 0 arr while arr re exec code null newCode code substring lastIndex arr index INTERPOLATION_SYMBOL ,js
 lastIndex arr index arr 0 length interpolateTokens push arr 0 newCode code substr lastIndex return code newCode tokens interpolateTokens function recoverInterpolations code tokens var re new RegExp INTERPOLATION_SYMBOL g newCode lastIndex 0 arr while arr re exec code null newCode code substring lastIndex arr index tokens shift lastIndex arr index arr 0 length newCode code substr lastIndex return newCode var hljsDir interpolateDirFactory languageDirFactory sourceDirFactory includeDirFactory hljsDir parse function parse return restrict EA controller HljsCtrl compile function tElm tAttrs transclude get static code strip the starting new line character var staticHTML tElm 0 innerHTML replace r n r ,js
 n m staticText tElm 0 textContent replace r n r n m put template tElm html pre code class hljs code pre return function postLink scope iElm iAttrs ctrl var escapeCheck var attrs attrGetter iAttrs if angular isDefined attrs escape escapeCheck parse attrs escape else if angular isDefined attrs no escape escapeCheck parse false ctrl init iElm find code if attrs onhighlight ctrl highlightCallback function scope eval attrs onhighlight if staticHTML staticText shouldHighlightStatics iAttrs var code Auto escape check default to true if escapeCheck escapeCheck scope code staticText else code staticHTML ,js
 ctrl highlight code scope on destroy function ctrl release languageDirFactory function dirName return function return require hljs restrict A link function scope iElm iAttrs ctrl if ctrl return iAttrs observe dirName function lang if angular isDefined lang ctrl setLanguage lang interpolateDirFactory function dirName return function return require hljs restrict A link function scope iElm iAttrs ctrl if ctrl return scope watch iAttrs dirName function newVal oldVal if newVal newVal oldVal ctrl setInterpolateScope newVal s,js
cope null sourceDirFactory function dirName return function return require hljs restrict A link function scope iElm iAttrs ctrl if ctrl return scope watch iAttrs dirName function newCode oldCode if newCode ctrl highlight newCode else ctrl clear includeDirFactory function dirName return http templateCache q function http templateCache q return require hljs restrict A compile function tElm tAttrs transclude var srcExpr tAttrs dirName return function postLink scope iElm iAttrs ctrl var changeCounter 0 if ctrl return ,js
 scope watch srcExpr function src var thisChangeId changeCounter if src angular isString src var templateCachePromise dfd templateCachePromise templateCache get src if templateCachePromise dfd q defer http get src cache templateCache transformResponse function data headersGetter Return the raw string so http doesn t parse it if it s json return data success function code if thisChangeId changeCounter return dfd resolve code error function if thisChangeId changeCounter ctrl clear dfd resolve ,js
 templateCachePromise dfd promise q when templateCachePromise then function code if code return templateCache from http if angular isArray code 1 1 5 code code 1 else if angular isObject code 1 0 7 code code data code code replace r n r n m ctrl highlight code else ctrl clear function module module directive hljs hljsDir angular forEach interpolate hljsInterpolate compile hljsCompile function name module directive name interpolateDirFactory name angular,js
 forEach language hljsLanguage function name module directive name languageDirFactory name angular forEach source hljsSource function name module directive name sourceDirFactory name angular forEach include hljsInclude function name module directive name includeDirFactory name ngModule return hljs ,js
class Blockchain static request route return new Promise resolve reject let xhr new XMLHttpRequest xhr addEventListener error evt reject xhr statusText xhr addEventListener load evt console log xhr let data JSON parse xhr responseText let result null console log data try result JSON parse data result message catch e result data result message resolve result xhr open POST Blockchain URL true xhr setRequestHeader Content Type application json xhr send JSON stringify jsonrpc 2 0 method route method params chaincodeID name Blockchain CHAINCODE ctorMsg function route operation args route values secureContext Blockchain USER ,js
 type 1 id 1 Blockchain CHAINCODE end2end Blockchain URL http localhost 3000 chaincode Blockchain USER user_type1_0 Blockchain QUERY query Blockchain INVOKE invoke ,js
 define Modernizr addTest docElement createElement test video function Modernizr addTest docElement createElement Modernizr addAsyncTest function var timeout var waitTime 300 var elem createElement video var elemStyle elem style function testAutoplay arg clearTimeout timeout elem removeEventListener playing testAutoplay false addTest videoautoplay arg arg type playing elem currentTime 0 elem parentNode removeChild elem skip the test if video itself or the autoplay element on it isn t supported if Modernizr video aut,js
oplay in elem addTest videoautoplay false return elemStyle position absolute elemStyle height 0 elemStyle width 0 try if Modernizr video ogg elem src data video ogg base64 T2dnUwACAAAAAAAAAABmnCATAAAAAHDEixYBKoB0aGVvcmEDAgEAAQABAAAQAAAQAAAAAAAFAAAAAQAAAAAAAAAAAGIAYE9nZ1MAAAAAAAAAAAAAZpwgEwEAAAACrA7TDlj QgXRoZW9yYSsAAABYaXBoLk9yZyBsaWJ0aGVvcmEgMS4xIDIwMDkwODIyIChUaHVzbmVsZGEpAQAAABoAAABFTkNPREVSPWZmbXBlZzJ0aGVvcmEtMC4yOYJ0aGVvcmG zSj3uc1rGLWpSUoQc5zmMYxSlKQhCDGMYhCEIQhAAAAAAAAAAAAAEW2uU2eSyPxWEvx4OVts5ir1aKtUKBMpJFoQ nk5m41mUwl4slUpk4kkghkIfDwdjgajQYC8VioUCQRiIQh8PBwMhgLBQIg4FRba5TZ5LI FYS Hg5W2zmKvVoq1QoEykkWhD eTmbjWZTCXiyVSmTiSSCGQh8PB2OBqNBgLxWKhQJBGIhCHw8HAyGAsFAiDgUCw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDAwPEhQUFQ0NDhESFRUUDg4PEhQVFRUOEBETFBUVFRARFBUVFRUVEhMUFRUVFRUUFRUVFRUVFRUVFRUVFRUVEAwLEBQZGxwNDQ4SFRwcGw4NEBQZHBwcDhATFhsdHRwRExkcHB4eHRQYGxwdHh4dGxwdHR4eHh4dH,js
R0dHh4eHRALChAYKDM9DAwOExo6PDcODRAYKDlFOA4RFh0zV1A EhYlOkRtZ00YIzdAUWhxXDFATldneXhlSFxfYnBkZ2MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEhIVGRoaGhoSFBYaGhoaGhUWGRoaGhoaGRoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhESFh8kJCQkEhQYIiQkJCQWGCEkJCQkJB8iJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQREhgvY2NjYxIVGkJjY2NjGBo4Y2NjY2MvQmNjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRISEhUXGBkbEhIVFxgZGxwSFRcYGRscHRUXGBkbHB0dFxgZGxwdHR0YGRscHR0dHhkbHB0dHR4eGxwdHR0eHh4REREUFxocIBERFBcaHCAiERQXGhwgIiUUFxocICIlJRcaHCAiJSUlGhwgIiUlJSkcICIlJSUpKiAiJSUlKSoqEBAQFBgcICgQEBQYHCAoMBAUGBwgKDBAFBgcICgwQEAYHCAoMEBAQBwgKDBAQEBgICgwQEBAYIAoMEBAQGCAgAfF5cdH1e3Ow L66wGmYnfIUbwdUTe3LMRbqON8B 5RJEvcGxkvrVUjTMrsXYhAnIwe0dTJfOYbWrDYyqUrz7dw JO4hpmV2LsQQvkUeGq1BsZLx cu5iV0e0eScJ91VIQYrmqfdVSK7GgjOU0oPaPOu5IcDK1mNvnD K8LwS87f8Jx2mHtHnUkTGAurWZlNQa74ZLSFH9oF6FPGxzLsjQO5Qe0edcpttd7BXBSqMCL4k 4tFrHIPuEQ,js
7m1 uIWkbDMWVoDdOSuRQ9286kvVUlQjzOE6VrNguN4oRXYGkgcnih7t13 9kxvLYKQezwLTrO44sVmMPgMqORo1E0sm1 9SludkcWHwfJwTSybR4LeAz6ugWVgRaY8mV 9SluQmtHrzsBtRF wPY X0JuYTs ltgrXAmlk10xQHmTu9VSIAk1 vcvU4ml2oNzrNhEtQ3CysNP8UeR35wqpKUBdGdZMSjX4WVi8nJpdpHnbhzEIdx7mwf6W1FKAiucMXrWUWVjyRf23chNtR9mIzDoT 6ZLYailAjhFlZuvPtSeZ 2oREubDoWmT3TguY JHPdRVSLKxfKH3vgNqJ 9emeEYikGXDFNzaLjvTeGAL61mogOoeG3y6oU4rW55ydoj0lUTSR mmRhPmF86uwIfzp3FtiufQCmppaHDlGE0r2iTzXIw3zBq5hvaTldjG4CPb9wdxAme0SyedVKczJ9AtYbgPOzYKJvZZImsN7ecrxWZg5dR6ZLj j4qpWsIA vYwE Tca9ounMIsrXMB4Stiib2SPQtZv FVIpfEbzv8ncZoLBXc3YBqTG1HsskTTotZOYTG oVUjLk6zhP8bg4RhMUNtfZdO7FdpBuXzhJ5Fh8IKlJG7wtD9ik8rWOJxy6iQ3NwzBpQ219mlyv FLicYs2iJGSE0u2txzed D61ZWCiHD cZdQVCqkO2gJpdpNaObhnDfAPrT89RxdWFZ5hO3MseBSIlANppdZNIV Rwe5eLTDvkfWKzFnH QJ7m9QWV1KdwnuIwTNtZdJMoXBf74OhRnh2t OTGL AVUnIkyYY QG7g9itHXyF3OIygG2s2kud679ZWKqSFa9n3IHD6MeLv1lZ0XyduRhiDRtrNnKoyiFVLcBm0ba5Yy3fQkDh4XsFE34isVpOzpa9nR8iCpS4HoxG2rJpnRhf3YboVa1PcRouh5LIJv uQcPNd095ickTaiGBnWLKVWRc0OnYTSyex n2FofEPnDG8y3PztHrzOLK1xo6RAml2k,js
9owKajOC0Wr4D5x 3nA0UEhK2m198wuBHF3zlWWVKWLN1CHzLClUfuoYBcx4b1llpeBKmbayaR58njtE9onD66lUcsg0Spm2snsb 8HaJRn4dYcLbCuBuYwziB8 5U1C1DOOz2gZjSZtrLJk6vrLF3hwY4Io9xuT ruUFRSBkNtUzTOWhjh26irLEPx4jPZL3Fo3QrReoGTTM21xYTT9oFdhTUIvjqTkfkvt0bzgVUjq hOYY8j60IaO 0AzRBtqkTS6R5ellZd5uKdzzhb8BFlDdAcrwkE0rbXTOPB 7Y0FlZO96qFL4Ykg21StJs8qIW7h16H5hGiv8V2Cflau7QVDepTAHa6Lgt6feiEvJDM21StJsmOH hynURrKxvUpQ8BH0JF7BiyG2qZpnL 7AOU66gt reLEXY8pVOCQvSsBtqZTNM8bk9ohRcwD18o WVkbvrceVKRb9I59IEKysjBeTMmmbA21xu 6iHadLRxuIzkLpi8wZYmmbbWi32RVAUjruxWlJ iFxE38FI9hNKOoCdhwf5fDe4xZ81lgREhK2m1j78vW1CqkuMu AjBNK210kzRUX B 69cMMUG5bYrIeZxVSEZISmkzbXOi9yxwIfPgdsov7R71xuJ7rFcACjG 9PzApqFq7wEgzNJm2suWESPuwrQvejj7cbnQxMkxpm21lUYJL0fKmogPPqywn7e3FvB FCNxPJ85iVUkCE9 tLKx31G4CgNtWTTPFhMvlu8G4 TrgaZttTChljfNJGgOT2X6EqpETy2tYd9cCBI4lIXJ1 3uVUllZEJz4baqGF64yxaZ zPLYwde8Uqn1oKANtUrSaTOPHkhvuQP3bBlEJ LFe4pqQOHUI8T8q7AXx3fLVBgSCVpMba55YxN3rv8U1Dv51bAPSOLlZWebkL8vSMGI21lJmmeVxPRwFlZF1CpqCN8uLwymaZyjbXHCRytogPN3o n74CNykfT qqRv5AQlHcRxYrC5KvGmbbUwmZY 29BvF6C1 93x4W,js
VglXDLFpmbapmF89HKTogRwqqSlGbu oiAkcWFbklC6Zhf NtTLFpn8oWz HsNRVSgIxZWON yVyJlE5tq GWLTMutYX9ekTySEQPLVNQQ3OfycwJBM0zNtZcse7CvcKI0V zh16Dr9OSA21MpmmcrHC 6pTAPHPwoit3LHHqs7jhFNRD6W8 EBGoSEoaZttTCZljfduH fFisn dRBGAZYtMzbVMwvul T crK1NQh8gN0SRRa9cOux6clC0 mDLFpmbarmF8 e6CopeOLCNW6S IUUg3jJIYiAcDoMcGeRbOvuTPjXR tyo79LK3kqqkbxkkMRAOB0GODPItnX3Jnxro 25Ud llbyVVSN4ySGIgHA6DHBnkWzr7kz410f7cqO Syt5KqpFVJwn6gBEvBM0zNtZcpGOEPiysW8vvRd2R0f7gtjhqUvXL gWVwHm4XJDBiMpmmZtrLfPwd IugP5 fKVSysH1EXreFAcEhelGmbbUmZY4Xdo1vQWVnK19P4RuEnbf0gQnR lDCZlivNM22t1ESmopPIgfT0duOfQrsjgG4tPxli0zJmF5trdL1JDUIUT1ZXSqQDeR4B8mX3TrRro 2McGeUvLtwo6jIEKMkCUXWsLyZROd9P rFYNtXPBli0z398iVUlVKAjFlY437JXImUTm2r 4ZYtMy61hf16RPJIU9nZ1MABAwAAAAAAAAAZpwgEwIAAABhp658BScAAAAAAADnUFBQXIDGXLhwtttNHDhw5OcpQRMETBEwRPduylKVB0HRdF0A else if Modernizr video h264 elem src data video mp4 base64 AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAs1tZGF0AAACrgYF q3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjYwMSBhMGNkN2QzIC0gSC4,js
yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNSAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTEgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEwIHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAD2WIhAA3 728P4FNjuZQQAAAu5tb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAAZAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAA,js
CGHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAZAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAgAAAAIAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAGQAAAAAAAEAAAAAAZBtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAACgAAAAEAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAE7bWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAA 3N0YmwAAACXc3RzZAAAAAAAAAABAAAAh2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAgACAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY 8AAAAxYXZjQwFkAAr 4QAYZ2QACqzZX4iIhAAAAwAEAAADAFA8SJZYAQAGaOvjyyLAAAAAGHN0dHMAAAAAAAAAAQAAAAEAAAQAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAAsUAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjU2LjQwLjEwMQ else addTest videoautoplay false return catch e addTest videoautoplay false return ele,js
m setAttribute autoplay elem style cssText display none docElement appendChild elem wait for the next tick to add the listener otherwise the element may not have time to play in high load situations e g the test suite setTimeout function elem addEventListener playing testAutoplay false timeout setTimeout testAutoplay waitTime 0 ,js
 bin bash ex Acceptance Test for IBM Block Storage via SCBE Script prerequisites 1 SCBE server up and running with 1 service delegated to ubiquity interface 2 ubiqutiy server up and running with SCBE backend configured 3 ubiquity docker plugin up and running 4 setup connectivity between the docker node to the related storage system of the service Two nodes tests In case second node provided a migration tests will take place prerequisites for that is the second node should apply to 3 4 and has ssh keys from current node to the second node function basic_tests_on_one_node echo S Verify that no volume attached to the docker node df egrep ubiquity Filesystem multipath ll grep IBM lsblk egrep ubiquity NAME B 1 docker volume ls stepinc echo S Create volume ,sh
on SCBE profile service which is on IBM FlashSystem A9000R docker volume create driver ubiquity name vol opt size 5 opt profile profile echo S 1 Verify volume info docker volume ls docker volume inspect vol echo S 2 Verify storage side verify the volume was created on the relevant pool service ssh root gen4d 67a xcli py vol_list vol u_ubiquity_instance1_ vol stepinc echo S Run CName 1 with the new volume docker run t i d name CName 1 volume driver ubiquity volume vol data entrypoint bin sh alpine echo S 1 Verify the volume was attached to the docker node df egrep ubiquity Filesystem multipath ll grep IBM lsblk egrep ubiquity NAME B 1 mount grep ubiquity you should see its ext4 echo S 2 Verify volume exist inside the container docker exec CName 1 df egrep data Filesystem echo S 3 Verify container,sh
 up and with the mount point docker ps grep CName 1 docker inspect format index HostConfig Binds CName 1 docker inspect format index Mounts CName 1 echo S 3 Verity the storage side check volume has mapping to the host ssh root gen4d 67a xcli py vol_mapping_list vol u_ubiquity_instance1_ vol stepinc echo S Write DATA on the volume by create a file in data inside the container docker exec CName 1 touch data file_on_A9000_volume docker exec CName 1 ls l data file_on_A9000_volume stepinc echo S Stop the container docker stop CName 1 echo S 1 Verify the volume was detached from the docker node df egrep ubiquity Filesystem multipath ll grep IBM lsblk egrep ubiquity NAME B 1 mount grep ubiquity echo S 2 Verify container stoped but volume still exist docker ps grep CName 1 docker volume ls echo S 3 Verity t,sh
he storage side check volume is no longer mapped to the hos ssh root gen4d 67a xcli py vol_mapping_list vol u_ubiquity_instance1_ vol stepinc echo S Run another container CName 2 with the same volume and check the if the data remains docker run t i d name CName 2 volume driver ubiquity volume vol data entrypoint bin sh alpine echo S 1 Verify that the data remains file exist on the data inside the container docker exec CName 2 ls l data file_on_A9000_volume stepinc echo S Stop the container of cause will detach the volume from the host docker stop CName 2 docker rm CName 1 CName 2 so we can delete the docker volume stepinc echo S Remove the volume docker volume rm vol docker volume ls echo S 1 Verity the storage side check volume is no longer exist ssh root A9000 xcli py vol_list vol u_ubiquity_instance1_ vol stepinc echo S Run ,sh
container without creating vol in advance docker run t i d name CName 3 volume driver ubiquity volume vol data entrypoint bin sh alpine echo S 1 Verify volume was created for this container and you can touch a file inside the container docker volume ls grep vol docker exec CName 3 touch data file_on_A9000_volume docker exec CName 3 ls l data file_on_A9000_volume echo S 2 Verify that you stop the container and start the same container so the file still exist docker stop CName 3 docker start CName 3 docker exec CName 3 ls l data file_on_A9000_volume echo S 3 Stop the container and remove the volume docker stop CName 3 docker rm CName 3 docker volume rm vol docker volume ls grep v vol stepinc echo S Run container with 2 volumes docker run t i d name CName 4 volume driver ubiquity volume vol 1 data1 volume vol 2 data2 entrypoint bin sh alpine echo S 1 ,sh
Verify volume was created for this container and you can touch a file inside the container docker volume ls grep vol 1 docker volume ls grep vol 2 docker exec CName 4 df egrep data1 Filesystem docker exec CName 4 df egrep data2 Filesystem docker exec CName 4 touch data1 file1 docker exec CName 4 touch data2 file2 echo S 2 Stop container Verify unmount and remove volumes docker stop CName 4 mount grep ubiquity exit S docker rm CName 4 docker volume rm vol 1 docker volume rm vol 2 docker volume ls grep v vol function fstype_basic_check for fstype in ext4 xfs do stepinc echo S Create volume with xfs run container and make sure the volume is fstype docker volume create driver ubiquity name vol opt size 5 opt profile profile opt fstype fstype echo S 1 Verify volume info docker volume ls grep vol docker volume inspec,sh
t vol grep fstype grep fstype echo S 2 Run container with the volume and Verify it was mounted right docker run t i d name CName 4 volume driver ubiquity volume vol data entrypoint bin sh alpine df egrep ubiquity Filesystem mount grep ubiquity grep fstype docker stop CName 4 docker rm CName 4 docker volume rm vol done function one_node_negative_tests stepinc echo S some negative echo S 1 Should fail to create volume with long name long_vol_name for i in seq 1 63 do long_vol_name long_vol_name i done docker volume create driver ubiquity name long_vol_name opt size 5 opt profile profile exit 81 echo S 2 Should fail to create volume with wrong size docker volume create driver ubiquity name vol opt size 10XX opt profile profile exit 82 echo S 3 Should fail to create volume on w,sh
rong service docker volume create driver ubiquity name vol opt size 10 opt profile profile XX exit 83 function tests_with_second_node Assuming plugin runs on second node and with storage connectivity echo echo 2 nodes testing node1 hostname node2 node2 stepinc echo S Run stateful container should create and run the container docker run t i d name CName 4 volume driver ubiquity volume vol data entrypoint bin sh alpine echo S 1 Verify volume was created for this container and you can touch a file inside the container docker volume ls grep vol docker exec CName 4 touch data file_on_A9000_volume docker exec CName 4 ls l data file_on_A9000_volume echo S 2 node2 Verify volume is visible from second node ssh root node2 docker volume ls grep vol echo S 3 node2 Verify that you can NOT run container with vol on second node ssh roo,sh
t node2 docker run t i d name CName 5 volume driver ubiquity volume vol data entrypoint bin sh alpine exit 1 ssh root node2 docker stop CName 5 ssh root node2 docker rm CName 5 echo S 4 node2 Verify that you can NOT delete the volume vol from the second node because its already attached to first node ssh root node2 docker volume rm vol exit 1 ssh root node2 docker volume ls grep v vol volume should still be visible on the remote docker volume ls grep v vol and also visible on the local node so we sure the volume was deleted stepinc echo S Stop the container so next step can run it on second node docker stop CName 4 docker rm CName 4 sleep 2 echo finished sleep 2 seconds just waiting for detach to complite stepinc echo S node2 Start the container with the same vol on the second node ssh root node2 docker run t i d name CName 5 volume driver ubiq,sh
uity volume vol data entrypoint bin sh alpine echo S 1 node2 Verify data presiste after migration to second node ssh root node2 docker exec CName 5 ls l data file_on_A9000_volume echo S 2 node2 And add new file inside the volume ssh root node2 docker exec CName 5 touch data file_on_A9000_volume_from_node2 stepinc echo S node2 Stop the container on second node ssh root node2 docker stop CName 5 ssh root node2 docker rm CName 5 stepinc echo S node2 Start the container with the same vol on the first node docker run t i d name CName 6 volume driver ubiquity volume vol data entrypoint bin sh alpine echo S 1 Verify data presiste after migration back to first node check 2 files docker exec CName 6 ls l data file_on_A9000_volume docker exec CName 6 ls l data file_on_A9000_volume_from_node2 stepinc echo S Stop container and delet,sh
e vol vol docker stop CName 6 docker rm CName 6 docker volume rm vol echo S 1 node2 Verify volume is no longer visible on the second node ssh root node2 docker volume ls grep v vol function stepinc S expr S 1 function setup clean acceptance containers and volumes before start the test and also validate ssh connection to second node if needed conlist docker ps a grep CName if n conlist then echo Found CName on the host hostname try to stop and kill them before start the test docker ps a grep CName conlist2 docker ps a sed 1d grep CName awk print 1 docker stop conlist2 docker rm conlist2 fi volist docker volume ls q grep CName if n volist then echo Found CName on the host try to remove them docker volume rm volist fi if n node2 then ssh root node2 hostname echo Can,sh
not ssh to second host node2 Aborting exit 1 ssh root node2 docker ps aq grep CName echo need to clean CName containers on remote node node2 exit 2 ssh root node2 docker volume ls grep CName echo need to clean CName volumes on remote node node2 exit 3 fi 1 h echo 0 can get the following envs echo ACCEPTANCE_PROFILE ACCEPTANCE_WITH_NEGATIVE ACCEPTANCE_WITH_SECOND_NODE exit 0 S 0 steps counter n ACCEPTANCE_PROFILE profile ACCEPTANCE_PROFILE profile gold n ACCEPTANCE_WITH_NEGATIVE withnegative ACCEPTANCE_WITH_NEGATIVE withnegative n ACCEPTANCE_WITH_SECOND_NODE node2 ACCEPTANCE_WITH_SECOND_NODE node2 CName acceptance name of the containers in the script vol CName Vol echo Start Acceptance Test for IBM Block Storage setup Verifications and clean up before the test basic_tests_on_one_node fstype_basic_check n withnegative ,sh
 one_node_negative_tests n node2 tests_with_second_node echo echo echo Successfully Finish The Acceptance test S steps Running stateful container on IBM Block Storage ,sh
 define Modernizr function Modernizr Modernizr addTest webworkers Worker in window ,js
 package com ibm cloud objectstorage services s3 model import java io File import java io InputStream import java io Serializable p Uploads a new object to the specified Amazon S3 bucket The PutObjectRequest optionally uploads object metadata and applies a canned access control policy to the new object p p Amazon S3 never stores partial objects if during this call an exception wasn t thrown t,java
he entire object was stored p p Depending on whether a file or input stream is being uploaded this request has slightly different behavior p p When uploading a file p ul li The client automatically computes a checksum of the file Amazon S3 uses checksums to validate the data in each file li li Using the file extension Amazon S3 attempts to determine the correct content type and content disposition to use for the object li ul p When uploading directly from an input stream content length b must b be specified before data can be uploaded to Amazon S3 If not provided the library will b have to b buffer the contents of the input stream in order to calculate it Amazon S3 explicitly requires that the content length be sent in the request headers before any of the data is sent li p Amazon S3 is a distributed system If Amazon S3 receives multiple write requests for the same object nearly simul,java
taneously all of the objects might be stored However only one object will obtain the key p p Note Amazon S3 does not provide object locking if this is needed make sure to build it into the application layer p p If the caller specifies a location constraint when creating a bucket all objects added to the bucket are stored in the same region as the bucket For example if specifying a Europe EU region constraint for a bucket all of that bucket s objects are stored in the EU region p p The specified bucket must already exist and the caller must have link Permission Write permission to the bucket to upload an object p p If you are uploading or accessing a href http aws amazon com kms KMS a encrypted objects you need to specify the correct region of the bucket on your client and configure AWS Signature Version 4 for added security For more information on how to do this see http docs aws amazon com,java
 AmazonS3 latest dev UsingAWSSDK html specify signature version p see PutObjectRequest PutObjectRequest String String File see PutObjectRequest PutObjectRequest String String InputStream ObjectMetadata public class PutObjectRequest extends AbstractPutObjectRequest implements Serializable private boolean isRequesterPays Constructs a new link PutObjectRequest object to upload a file to the specified bucket and key After constructing the request users may optionally specify object metadata or a canned ACL as well param bucketName The name of an existing bucket to which the new object will be uploaded param key The key under which to store the new object param file The path of the file to upload t,java
o Amazon S3 public PutObjectRequest String bucketName String key File file super bucketName key file public PutObjectRequest String bucketName String key String redirectLocatio,java
n super bucketName key redirectLocation Constructs a new link PutObjectRequest object to upload a stream of data to the specified bucket and key After constructing the request users may optionally specify object metadata or a canned ACL as well p Content length for the data stream b must b be specified in the object metadata parameter Amazon S3 requires it be passed in before the data is uploaded Failure to specify a content length will cause the entire contents of the input stream to be buffered locally in memory so that the content length can be calculated which can result in negative performance problems p param bucketName The name of an existing bucket to which the new object will be uploaded param key The key under which to store the new object param input The stream of d,java
ata to upload to Amazon S3 param metadata The object metadata At minimum this specifies the content length for the stream of data being uploaded public PutObjectRequest String bucketName String key InputStream input ObjectMetadata metadata super bucketName key input metadata Override public PutObjectRequest clone PutObjectRequest request PutObjectRequest super clone return this copyPutObjectBaseTo request Override SuppressWarnings unchecked public PutObjectRequest withBucketName String bucketName return super withBucketName bucketName Override SuppressWarnings unchecked public PutObjectRequest withKey String key return super withKey key Override SuppressWarnings unchecked public PutObjectRequest ,java
withStorageClass String storageClass return super withStorageClass storageClass Override SuppressWarnings unchecked public PutObjectRequest withStorageClass StorageClass storageClass return super withStorageClass storageClass Override SuppressWarnings unchecked public PutObjectRequest withFile File file return super withFile file Override SuppressWarnings unchecked public PutObjectRequest withMetadata ObjectMetadata metadata return super withMetadata metadata Override SuppressWarnings unchecked public PutObjectRequest withCannedAcl CannedAccessControlList cannedAcl return super withCannedAcl cannedAcl Override SuppressWarnings unchecked public PutObjectRequest withAccessControlList AccessControlList accessControlList return super withAccessControlList accessControlList Override Suppr,java
essWarnings unchecked public PutObjectRequest withInputStream InputStream inputStream return super withInputStream inputStream Override SuppressWarnings unchecked public PutObjectRequest withRedirectLocation String redirectLocation return super withRedirectLocation redirectLocation Override SuppressWarnings unchecked public PutObjectRequest withSSECustomerKey SSECustomerKey sseKey return super withSSECustomerKey sseKey public PutObjectRequest withTagging ObjectTagging tagSet super setTagging tagSet return this Deprecated Override SuppressWarnings unchecked public PutObjectRequest withProgressListener com ibm cloud objectstorage services s3 model ProgressListener progressListener return super withProgressListener progressListener Override SuppressWarnings unchecked public PutObjectRequest withSSEAwsKeyManag,java
ementParams SSEAwsKeyManagementParams sseAwsKeyManagementParams return super withSSEAwsKeyManagementParams sseAwsKeyManagementParams public boolean isRequesterPays return isRequesterPays Used for conducting this operation from a Requester Pays Bucket If set the requeste,java
r is charged for requests from the bucket p If a bucket is enabled for Requester Pays then any attempt to upload or download an object from it without Requester Pays enabled will result in a 403 error and the bucket owner will be charged for the request p Enabling Requester Pays disables the ability to have anonymous access to this bucket param isRequesterPays Enable Requester Pays option for the operation public void setRequesterPays boolean isRequesterPays this isRequesterPays isRequesterPays Used for conducting this operation from a Requester Pays Bucket If set the requester is charged for requests from the bucket It returns this updated PutObjectRequest object so that additional method calls can be chained together p If a bucket is enabled for Requester Pays then any attempt to upload or download an o,java
bject from it without Requester Pays enabled will result in a 403 error and the bucket owner will be charged for the request p Enabling Requester Pays disables the ability to have anonymous access to this bucket param isRequesterPays Enable Requester Pays option for the operation return The updated PutObjectRequest object public PutObjectRequest withRequesterPays boolean isRequesterPays setRequesterPays isRequesterPays return this ,java
 package com ibm cloud objectstorage internal http import org apache commons logging Log import org apache commons logging LogFactory import com ibm cloud objectstorage SdkClientException import com ibm cloud objectstorage annotation SdkInternalApi import com ibm cloud objectstorage http HttpResponse import com ibm cloud objectstorage protocol json JsonContent import com ibm cloud objectstorage util IOUtils import software ,java
amazon ion IonReader import software amazon ion IonSystem import software amazon ion IonType SdkInternalApi public class IonErrorCodeParser implements ErrorCodeParser private static final Log log LogFactory getLog IonErrorCodeParser class private static final String TYPE_PREFIX aws type private static final String X_AMZN_REQUEST_ID_HEADER x amzn RequestId private final IonSystem ionSystem public IonErrorCodeParser IonSystem ionSystem this ionSystem ionSystem Override public String parseErrorCode HttpResponse response JsonContent jsonContents IonReader reader ionSystem newReader jsonContents getRawContent try IonType type reader next if type IonType STRUCT throw new SdkClientException String format Can only get error codes from structs saw s request id s type getRequestId response boolean errorCodeSeen false ,java
 String errorCode null String annotations reader getTypeAnnotations for String annotation annotations if annotation startsWith TYPE_PREFIX if errorCodeSeen throw new SdkClientException String format Multiple error code annotations found for request id s getRequestId response else errorCodeSeen true errorCode annotation substring TYPE_PREFIX length return errorCode finally IOUtils closeQuietly reader log private static String getRequestId HttpResponse response return response getHeaders get X_AMZN_REQUEST_ID_HEADER ,java
describe prefixed autobind function var rAFName quick sniff to find the local rAF prefixed name var vendors r msR mozR webkitR oR _ forEach vendors function vendor rAFName rAFName window vendor equestAnimationFrame vendor equestAnimationFrame if rAFName rAF returns a function it Modernizr prefixed requestAnimationFrame window returns a function function expect Modernizr prefixed requestAnimationFrame window to be a function unless we false it to a string it Modernizr prefixed requestAnimationFrame window false returns a string the prop name function expect Modernizr prefixed requestAnimationFrame window false to be rAFName if document body webkitMatchesSelector document body mozMatchesSelector var fn Modernizr prefixed matchesSelector HTMLElement prototype document body returns function it Modernizr ,js
prefixed matchesSelector HTMLElement prototype document body returns a function function expect fn to be a function fn scoping it Modernizr prefixed matchesSelector HTMLElement prototype document body is scoped to the body function expect fn body to be true Webkit only are there other objects that are prefixed if window webkitNotifications should be an object it Modernizr prefixed Notifications returns an object function expect Modernizr prefixed Notifications window to be an object Webkit only if _ isUndefined document webkitIsFullScreen boolean it Modernizr prefixed isFullScreen returns a boolean function expect Modernizr prefixed isFullScreen document to be a boolean Moz only if _ isUndefined document mozFullScreen boolean it Modernizr prefixed isFullScreen returns a boolea,js
n function expect Modernizr prefixed fullScreen document to be a boolean Webkit only takes advantage of Webkit s mixed case of prefixes if document body style WebkitAnimation string it Modernizr prefixed animation document body style returns value of that as a string function expect Modernizr prefixed animation document body style to be a string it Modernizr prefixed animation document body style false returns the name of the property webkitAnimation function expect Modernizr prefixed animation document body style false to equal webkitAnimation it Modernizr prefixed doSomethingAmazing window Gobbledygook with prefixed str obj returns false function expect Modernizr prefixed doSomethingAmazing window to be false it Modernizr prefixed doSomethingAmazing window Gobbledygook with prefixed str obj scope returns false fu,js
nction expect Modernizr prefixed doSomethingAmazing window document body to be false it Modernizr prefixed doSomethingAmazing window Gobbledygook with prefixed str obj false returns false function expect Modernizr prefixed doSomethingAmazing window false to be false ,js
 package com ibm cloud objectstorage oauth import static com ibm cloud objectstorage auth internal SignerConstants AUTHORIZATION import com ibm cloud objectstorage SignableRequest import com ibm cloud objectstorage auth AWSCredentials import com ibm cloud objectstorage auth AWSSessionCredentials import com ibm cloud objectstorage auth AbstractAWSSigner import com ibm cloud objectstorage log InternalLogApi impor,java
t com ibm cloud objectstorage log InternalLogFactory public class IBMOAuthSigner extends AbstractAWSSigner protected static final InternalLogApi log InternalLogFactory getLog IBMOAuthSigner class Override public void sign SignableRequest request AWSCredentials credentials log debug OAuth signer IBMOAuthCredentials oAuthCreds IBMOAuthCredentials credentials request addHeader AUTHORIZATION Bearer oAuthCreds getTokenManager getToken Override protected void addSessionCredentials SignableRequest request AWSSessionCredentials credentials TODO Auto generated method stub ,java
 package org bitpedia util public class Base32 private static final String base32Chars ABCDEFGHIJKLMNOPQRSTUVWXYZ234567 private static final int base32Lookup 0xFF 0xFF 0x1A 0x1B 0x1C 0x1D 0x1E 0x1F 0 1 2 3 4 5 6 7 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 8 9 0xFF 0x00 0x01 0x02 0x03 0x04 0x05 0x06 A B C D E F G 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D 0x0E H I J K L M N O 0x0F 0x10 0x11 0x12 0x13 0x14 0x15 0x16 P Q R S T U V W 0x17 0x,java
18 0x19 0xFF 0xFF 0xFF 0xFF 0xFF X Y Z _ 0xFF 0x00 0x01 0x02 0x03 0x04 0x05 0x06 a b c d e f g 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D 0x0E h i j k l m n o 0x0F 0x10 0x11 0x12 0x13 0x14 0x15 0x16 p q r s t u v w 0x17 0x18 0x19 0xFF 0xFF 0xFF 0xFF 0xFF x y z DEL static public String encode final byte bytes int i 0 index 0 digit 0 int currByte nextByte StringBuffer base32 new StringBuffer bytes length 7 8 5 while i bytes length currByte bytes i 0 bytes i bytes i 256 unsign if ,java
 index 3 if i 1 bytes length nextByte bytes i 1 0 bytes i 1 bytes i 1 256 else nextByte 0 digit currByte 0xFF index index index 5 8 digit index digit nextByte 8 index i else digit currByte 8 index 5 0x1F index index 5 8 if index 0 i base32 append base32Chars charAt digit return base32 toString static public byte decode final String base32 int i index lookup offset digi,java
t byte bytes new byte base32 length 5 8 for i 0 index 0 offset 0 i base32 length i lookup base32 charAt i 0 if lookup 0 lookup base32Lookup length continue digit base32Lookup lookup if digit 0xFF continue if index 3 index index 5 8 if index 0 bytes offset digit offset if offset bytes length break else bytes offset digit 8 index else index index 5 8 bytes offset digit index offset ,java
 if offset bytes length break bytes offset digit 8 index return bytes static public void main String args if args length 0 System out println Supply a Base32 encoded argument return System out println Original args 0 byte decoded Base32 decode args 0 System out print Hex for int i 0 i decoded length i int b decoded i if b 0 b 256 System out print Integer toHexString b 256 substring 1 System out println System out println Reencoded Base32 encode decoded ,java
 package main import flag fmt github com BurntSushi toml github com IBM ubiquity utils logs github com IBM ubiquity docker plugin web_server github com IBM ubiquity resources github com IBM ubiquity utils path var configFile flag String config ubiquity client conf config file with ubiquity client configuration params const PLUGIN_ADDRESS 127 0 0 1 func mai,go
n flag Parse var config resources UbiquityPluginConfig fmt Printf Starting ubiquity plugin with s config file n configFile if _ err toml DecodeFile configFile config err nil fmt Println err return defer logs InitFileLogger logs GetLogLevelFromString config LogLevel path Join config LogPath ubiquity docker plugin log logger logFile utils SetupLogger config LogPath ubiquity docker plugin defer utils CloseLogs logFile storageAPIURL fmt Sprintf http s d ubiquity_storage config UbiquityServer Address config UbiquityServer Port server err web_server NewServer logger storageAPIURL config if err nil panic Error initializing webserver err Error server Start PLUGIN_ADDRESS config DockerPlugin Port config DockerPlugin PluginsDirectory ,go
 package com ibm cloud objectstorage auth import org junit Test import org junit runner RunWith import org mockito InjectMocks import org mockito Mock import org mockito runners MockitoJUnitRunner import com ibm cloud objectstorage SignableRequest import com ibm cloud objectstorage auth AWSCredentials import com ibm cloud objectstorage auth AWSCredentialsProvider import com ibm cloud objectstorage auth Signer import com,java
 ibm cloud objectstorage auth SignerAsRequestSigner import static org mockito Mockito verify import static org mockito Mockito when RunWith MockitoJUnitRunner class public class SignerAsRequestSignerTest Mock Signer signer Mock AWSCredentialsProvider credentialsProvider Mock AWSCredentials credentials Mock SignableRequest request InjectMocks SignerAsRequestSigner sut Test public void callsDownToUnderlyingSignerWithCredentialsFromCredentialProvider when credentialsProvider getCredentials thenReturn credentials sut sign request verify signer sign request credentials ,java
 package server import net http GetHealth returns the health of the service func GetHealth w http ResponseWriter r http Request w WriteHeader 200 w Write byte OK ,go
 bin bash This script is intended to be run by Travis CI If running elsewhere invoke it with TRAVIS_PULL_REQUEST false path to script shellcheck disable SC1090 source dirname 0 scripts resources sh kubeclt_clean echo Cleaning cluster kubectl delete pv local volume 1 local volume 2 local volume 3 kubectl delete deployment service pvc replicaset l app gitlab kubectl_config echo Configuring kubectl shellcheck disable SC2091 bx cs cluster config CLUSTER_NAME grep export kubectl_deploy kubeclt_clean echo Running scripts quickstart sh dirname 0 scripts quickstart sh echo Waiting for pods to be running i 0 while kubectl get pods grep c Running ne 3 do if i lt 24 then echo Timeout waiting on pods to be ready test_failed 0 fi sleep 10 echo i 10 seconds elapsed i done echo All,sh
 pods are running echo Waiting for service to be available sleep 120 verify_deploy echo Verifying deployment was successful IPS bx cs workers CLUSTER_NAME awk print 2 grep 0 9 1 3 0 9 1 3 0 9 1 3 0 9 1 3 for IP in IPS do if curl sS IP 30080 then test_failed 0 fi echo done main is_pull_request 0 if kubectl_config then echo Config failed test_failed 0 elif kubectl_deploy then echo Deploy failed test_failed 0 elif verify_deploy then test_failed 0 else test_passed 0 fi main ,sh
 usr bin python import os import sys from apscheduler schedulers gevent import GeventScheduler import pprint from pyPodcastParser Podcast import Podcast import requests import json import urllib2 url_to_parse url_to_post data def parse response requests get url_to_parse podcast Podcast response content urls_to_download for item in podcast items pprint pprint item enclosure_url print type item enclosure_url urls_to_download append item enclosure_url data urls list urls_to_download return data def post print The url post to is s url_to_post req urllib2 Request url_to_post req add_header Content Type application json urllib2 urlopen req json dumps data def help print help message if __name__ __main__ if len sys argv 4 help sys exit 1 url_to_parse sys argv 1 url_to_post sys argv 2 interval int sys argv 3 dat,py
a parse scheduler GeventScheduler scheduler add_job post interval seconds 10 g scheduler start print Press Ctrl 0 to exit format Break if os name nt else C try g join except KeyboardInterrupt SystemExit pass ,py
define function function fnBind fn that return function return fn apply that arguments return fnBind ,js
define ModernizrProto Modernizr hasOwnProp setClasses function ModernizrProto Modernizr hasOwnProp setClasses _l tracks listeners for async tests as well as tests that execute after the initial run ModernizrProto _l ModernizrProto on function feature cb C,js
reate the list of listeners if it doesn t exist if this _l feature this _l feature Push this test on to the listener list this _l feature push cb If it s already been resolved trigger it on next tick if Modernizr hasOwnProperty feature Next Tick setTimeout function Modernizr _trigger feature Modernizr feature 0 ModernizrProto _trigger function feature res if this _l feature return var cbs this _l feature ,js
 Force async setTimeout function var i cb for i 0 i cbs length i cb cbs i cb res 0 Don t trigger these again delete this _l feature addTest allows you to define your own feature detects that are not currently included in Modernizr under the covers it s the exact same code Modernizr uses for its own feature detections https github com Modernizr Modernizr tree master feature detects Just like the offical detects the result will be added onto the Modernizr object as well as an appropriate className set on the html element when configured to do so memberof Modernizr name Modernizr addTest optionName Modernizr addTest optionProp addTest access public function addTest param string object feature The string name of the feature detect or an object of feature detect names and test param function boolean test Funct,js
ion returning true if feature is supported false if not Otherwise a boolean representing the results of a feature detection example The most common way of creating your own feature detects is by calling Modernizr addTest with a string preferably just lowercase without any punctuation and a function you want executed that will return a boolean result js Modernizr addTest itsTuesday function var d new Date return d getDay 2 When the above is run it will set Modernizr itstuesday to true when it is tuesday and to false every other day of the week One thing to notice is that the names of feature detect functions are always lowercased when added to the Modernizr object That means that Modernizr itsTuesday will not exist but Modernizr itstuesday will Since we only look at the returned value from any feature detection function you do not need to actual,js
ly use a function For simple detections just passing in a statement that will return a boolean value works just fine js Modernizr addTest hasJquery jQuery in window Just like before when the above runs Modernizr hasjquery will be true if jQuery has been included on the page Not using a function saves a small amount of overhead for the browser as well as making your code much more readable Finally you also have the ability to pass in an object of feature names and their tests This is handy if you want to add multiple detections in one go The keys should always be a string and the value can be either a boolean or function that returns a boolean js var detects hasjquery jQuery in window itstuesday function var d new Date return d getDay 2 Modernizr addTest detects There is really no difference be,js
tween the first methods and this one it is just a convenience to let you write more readable code function addTest feature test if typeof feature object for var key in feature if hasOwnProp feature key addTest key feature key else feature feature toLowerCase var featureNameSplit feature split var last Modernizr featureNameSplit 0 Again we don t check for parent test existence Get that right though if featureNameSplit length 2 last last featureNameSplit 1 if typeof last undefined we re going to quit if you re trying to overwrite an existing test if we were to allow it we d do this var re new RegExp b no feature b docElement className docElement className replace re but no rly stuff em return Modernizr ,js
 test typeof test function test test Set the value this is the magic right here if featureNameSplit length 1 Modernizr featureNameSplit 0 test else cast to a Boolean if not one already if Modernizr featureNameSplit 0 Modernizr featureNameSplit 0 instanceof Boolean Modernizr featureNameSplit 0 new Boolean Modernizr featureNameSplit 0 Modernizr featureNameSplit 0 featureNameSplit 1 test Set a single class either feature or no feature setClasses test test false no featureNameSplit join Trigger the event Modernizr _trigger feature test return Modernizr allow chaining After all the tests are run add self to the Modernizr prototype Modernizr _q push function ModernizrProto addTest ,js
 addTest return addTest ,js
 package com ibm cloud objectstorage http timers request import java util concurrent Future import java util concurrent ScheduledFuture import com ibm cloud objectstorage annotation SdkInternalApi import com ibm cloud objectstorage util ValidationUtils SdkInternalApi public class HttpRequestAbortTaskT,java
rackerImpl implements HttpRequestAbortTaskTracker private final HttpRequestAbortTask task private final ScheduledFuture future public HttpRequestAbortTaskTrackerImpl final HttpRequestAbortTask task final ScheduledFuture future this task ValidationUtils assertNotNull task task this future ValidationUtils assertNotNull future future Override public boolean httpRequestAborted return task httpRequestAborted Override public boolean isEnabled return task isEnabled Override public void cancelTask future cancel false ,java
 const parse require xml parser const log require pino log level debug function getChannelMetadata channel const md channel children forEach obj if obj name item obj name image md channel_ obj name obj content return md function ItemToMetadata item Some content providers will provide SEGMENTS in the item so multiple,js
 media files info per file How do we store it need to introspect the item log debug item item const md md segments let media let finalMetadata false item children forEach obj Special case if you get a enclosure attribute if obj name enclosure md enclosure length obj attributes length type obj attributes type url obj attributes url else if obj name search media 1 If it has title create push old object create new one if obj name search title 1 If current object has a title push it if media hasOwnProperty title Push old object md segments push media reset media media if obj name search license 1 If current object has a title push it if media hasOwnProperty title Push old,js
 object md segments push media media finalMetadata true const m obj name match media S if m key m 1 log debug Processing media Match for key m 1 if finalMetadata md m 1 obj content else if typeof obj content string media m 1 obj content else media m 1 obj attributes else md obj name obj content If we have a media title we should pusthi media to segemnts For the case of a single segment if media title md segments push media log debug log debug md log debug return md module exports function XMLtoMeta xmlFile const obj parse xmlFile let metaDataArray const mainObj obj root children 0 if mainO,js
bj name channel const baseMetadata getChannelMetadata mainObj this is disabled because it is a FILTER metaDataArray mainObj children filter a if a name item return a map a log debug After Filter a return ItemToMetadata a map a log debug After Conversion a const newObj Object assign newObj baseMetadata Object assign newObj a return newObj return metaDataArray ,js
 package com ibm cloud objectstorage util import static com ibm cloud objectstorage util CodecUtils sanityCheckLastPos class Base64Codec implements Codec private static final int OFFSET_OF_a a 26 private static final int OFFSET_OF_0 0 52 private static final int OFFSET_OF_PLUS 62 private static final int OFFSET_OF_SLASH ,java
 63 private static final int MASK_2BITS 1 2 1 private static final int MASK_4BITS 1 4 1 private static final int MASK_6BITS 1 6 1 Alphabet as defined at http www ietf org rfc rfc4648 txt private static final byte PAD private static class LazyHolder private static final byte DECODED decodeTable private static byte decodeTable final byte dest new byte z 1 for int i 0 i z i if i A i Z dest i byte i A else if i 0 i 9 dest i byte i OFFSET_OF_0 else if i dest i byte i OFFSET_OF_PLUS else if i dest i byte i OFFSET_OF_SLASH else if i a i z dest i byt,java
e i OFFSET_OF_a else dest i 1 return dest private final byte alphabets Base64Codec this alphabets CodecUtils toBytesDirect ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 protected Base64Codec byte alphabets this alphabets alphabets Override public byte encode byte src final int num3bytes src length 3 final int remainder src length 3 if remainder 0 byte dest new byte num3bytes 4 for int s 0 d 0 s src length s 3 d 4 encode3bytes src s dest d return dest byte dest new byte num3bytes 1 4 int s 0 d 0 for s src length remainder s 3 d 4 encode3bytes src s dest d switch remainder ,java
 case 1 encode1byte src s dest d break case 2 encode2bytes src s dest d break default throw new IllegalStateException return dest void encode3bytes byte src int s byte dest int d operator precedence in descending order or byte p dest d byte alphabets p src s 2 MASK_6BITS 6 dest d byte alphabets p MASK_2BITS 4 p src s 4 MASK_4BITS 2 4 dest d byte alphabets p MASK_4BITS 2 p src s 6 MASK_2BITS 4 2 dest d byte alphabets p MASK_6BITS 6 return void encode2bytes byte src int s byte dest int d operator precedence in descending order or byte p ,java
 dest d byte alphabets p src s 2 MASK_6BITS 6 dest d byte alphabets p MASK_2BITS 4 p src s 4 MASK_4BITS 2 4 dest d byte alphabets p MASK_4BITS 2 4 dest d PAD return void encode1byte byte src int s byte dest int d operator precedence in descending order or byte p dest d byte alphabets p src s 2 MASK_6BITS 6 dest d byte alphabets p MASK_2BITS 4 2 dest d PAD dest d PAD return void decode4bytes byte src int s byte dest int d int p 0 operator precedence in descending order or dest d byte pos src s 2 ,java
 p pos src s 4 MASK_2BITS 6 2 dest d byte p MASK_4BITS 4 p pos src s 2 MASK_4BITS 4 4 dest d byte p MASK_2BITS 6 pos src s 2 6 return void decode1to3bytes int n byte src int s byte dest int d int p 0 operator precedence in descending order or dest d byte pos src s ,java
2 p pos src s 4 MASK_2BITS 6 2 if n 1 sanityCheckLastPos p MASK_4BITS return dest d byte p MASK_4BITS 4 p pos src s 2 MASK_4BITS 4 4 if n 2 sanityCheckLastPos p MASK_2BITS return dest d byte p MASK_2BITS 6 pos src s 2 6 return Override public byte decode byte src final int length if length 4 0 throw new Illega,java
lArgumentException Input is expected to be encoded in multiple of 4 bytes but found length int pads 0 int last length 1 max possible padding in b64 encoding is 2 for pads 2 last 1 last pads if src last PAD break final int fq final quantum in unit of bytes switch pads case 0 fq 3 break final quantum of encoding input is an integral multiple of 24 bits case 1 fq 2 break final quantum of encoding input is exactly 16 bits case 2 fq 1 break final quantum of encoding input is exactly 8 bits default throw new Error Impossible final byte dest new byte length 4 3 3 fq int s 0 d 0 has a higher precedenc,java
e than than for d dest length fq 3 s 4 d 3 decode4bytes src s dest d if fq 3 decode1to3bytes fq src s dest d return dest protected int pos byte in int pos LazyHolder DECODED in if pos 1 return pos throw new IllegalArgumentException Invalid base 64 character char in ,java
module exports function grunt Project configuration grunt initConfig jshint options jshintrc jshintrc ignores node_modules js src Gruntfile js app js admin js jscs src Gruntfile js app js admin js options config jscsrc default in 3 x esnext true If you use ES6 http jscs info overview html esnext default in 3 x verbose true If you need output with rule names http jscs info overview html verbose requireCurlyBraces if grunt loadNpmTasks grunt contrib jshint grunt registerTask default lint jscs grunt loadNpmTasks grunt jscs grunt registerTask lint Check for common code problems jshint ,js
 package com ibm cloud objectstorage services s3 model import com ibm cloud objectstorage AmazonWebServiceRequest import com ibm cloud objectstorage services s3 model analytics AnalyticsConfiguration import java io Serializable public class SetBucketAnalyticsConfigurationRequest extends AmazonWebServiceRequest implements Serializable private String bucketName private AnalyticsConfiguration ,java
analyticsConfiguration public SetBucketAnalyticsConfigurationRequest public SetBucketAnalyticsConfigurationRequest String bucketName AnalyticsConfiguration analyticsConfiguration this bucketName bucketName this analyticsConfiguration analyticsConfiguration public String getBucketName return bucketName public void setBucketName String bucketName this bucketName bucketName public SetBucketAnalyticsConfigurationRequest withBucketName String bucketName setBucketName bucketName return this Returns the link AnalyticsConfigurati,java
on object public AnalyticsConfiguration getAnalyticsConfiguration return analyticsConfiguration public void setAnalyticsConfiguration AnalyticsConfiguration analyticsConfiguration this analyticsConfiguration analyticsConfiguration public SetBucketAnalyticsConfigurationRequest withAnalyticsConfiguration AnalyticsConfiguration analyticsConfiguration setAnalyticsConfiguration analyticsConfiguration return this ,java
package com accantosystems stratoss driver ucd service import java util HashSet import java util List import java util Optional import java util Set import org springframework beans factory annotation Autowired import org springframework stereotype Service import org springframework util StringUtils import com accantosystems stratoss driver ucd client DriverExecutionException import com accantosystems stratoss driver ucd client UrbanCodeDeployClient import com accantosystems stratoss driver ucd config Constants import com accantosystems stratoss driver ucd config UCDProperties import com accantosystems stratoss driver ucd config UCDProperties UrbanCodeDeployEnvironment import com accantosystems stratoss driver ucd model heat HeatTemplate import com accantosystems stratoss driver ucd model heat Resource import com accantosystems stratoss driver ucd model stratoss OperationDescriptor import com accantosystems stratoss driver ucd model stratoss PropertyDescriptor import co,java
m accantosystems stratoss driver ucd model stratoss PropertyType import com accantosystems stratoss driver ucd model stratoss ResourceDescriptor import com accantosystems stratoss driver ucd model ucd ApplicationProcessDetails import com accantosystems stratoss driver ucd model ucd ApplicationProcessInfo import com accantosystems stratoss driver ucd model ucd Blueprint import com accantosystems stratoss driver ucd model ucd ProcessActivity import com accantosystems stratoss driver ucd utils HeatTemplateUtils import com accantosystems stratoss driver ucd utils UCDUtils import com accantosystems stratoss driver ucd web rest ResourceTypeNotFoundException import com fasterxml jackson core JsonProcessingException import com fasterxml jackson databind ObjectMapper import com fasterxml jackson dataformat yaml YAMLFactory import com fasterxml jackson dataformat yaml YAMLGenerator Service public class DefinitionService private final UCDProperties ucdProperties private final Urba,java
nCodeDeployClient urbanCodeDeployClient Autowired public DefinitionService UCDProperties ucdProperties UrbanCodeDeployClient urbanCodeDeployClient this ucdProperties ucdProperties this urbanCodeDeployClient urbanCodeDeployClient public String getDefinition final UrbanCodeDeployEnvironment ucdEnvironment final String blueprintName final String blueprintLocation throws DriverExecutionException ResourceTypeNotFoundException Blueprint blueprint urbanCodeDeployClient getBlueprint ucdEnvironment blueprintName HeatTemplate heatTemplate HeatTemplateUtils getHeatTemplateFromBlueprint blueprint ResourceDescriptor resourceDescriptor new ResourceDescriptor resourceDescriptor setName UCDUtils createResourceTypeName blueprintName resourceDescriptor setDescription heatTemplate getDescription resourceDescriptor setResourceManagerType ucdProperties getResourceManagerName heatTemplate getParameters entrySet stream filter,java
 entry entry getKey null entry getKey startsWith Constants UCD_PARAMETER_PREFIX forEach entry PropertyDescriptor propertyDescriptor new PropertyDescriptor propertyDescriptor setType PropertyType STRING Only support Strings now should convert entry getValue getType propertyDescriptor setDescription entry getValue getDescription propertyDescriptor setDefault entry getValue getDefault propertyDescriptor setRequired StringUtils isEmpty entry getValue getDefault resourceDescriptor getProperties put entry getKey propertyDescriptor heatTemplate getOutputs entrySet stream filter entry Constants PARAM_BLUEPRINT_URL equals entry getKey forEach entry PropertyDescriptor propertyDescriptor new PropertyDescriptor propertyDescriptor setType PropertyType STRING propertyDescriptor setReadOnly true propertyDescriptor setDescription entry getV,java
alue getDescription Object non String values here are internal UCD mapping attributes which we don t want to expose if entry getValue getValue instanceof String propertyDescriptor setDefault entry getValue getValue toString resourceDescriptor getProperties put entry getKey propertyDescriptor Set String componentNames new HashSet heatTemplate getResources forEach name resource Get a list of the UCD Components used within the template if Blueprint RESOURCE_TYPE_UCD_SOFTWARE_DEPLOY equals resource getType componentNames add name For now we re only interesting in the name For the definition we really also need the version typically LATEST Set default processes resourceDescriptor getLifecycle add Constants TRANSITION_NAME_INSTALL resourceDescriptor getLifecycle add Constants TRANSITION_NAME_UNINSTALL Retrieve the applica,java
tion name stored in the resource tree Optional Resource resourceTree heatTemplate getResources values stream filter resource Blueprint RESOURCE_TYPE_UCD_RESOURCE_TREE equals resource getType findFirst if resourceTree isPresent String applicationName String resourceTree get getProperties get application Get all the processes for this application List ApplicationProcessInfo applicationProcesses urbanCodeDeployClient getProcessesForApplication ucdEnvironment applicationName For each process retrieve the details including process description and then search the activities to find matching component names applicationProcesses stream filter process applicationProcess equals process getMetadataType forEach process ApplicationProcessDetails applicationProcessDetails urbanCodeDeployClient getApplicationProcessDetails ucdEnvironment process getId process getVersion if applicationProces,java
sDetails getRootActivity null findMatchingComponent componentNames applicationProcessDetails getRootActivity getChildren if Constants VALID_TRANSITION_NAMES contains process getName resourceDescriptor getLifecycle add process getName else If this process references one of the components used in the template add it to the list of possible processes OperationDescriptor operationDescriptor new OperationDescriptor operationDescriptor setDescription process getDescription if applicationProcessDetails getPropDefs null applicationProcessDetails getPropDefs forEach property operationDescriptor getProperties put property getName new PropertyDescriptor PropertyType STRING property getDescription false null property getValue StringUtils isEmpty property getValue resourceDescriptor getOperations put process getName operationDescr,java
iptor try YAMLFactory yamlFactory new YAMLFactory yamlFactory enable YAMLGenerator Feature MINIMIZE_QUOTES yamlFactory disable YAMLGenerator Feature SPLIT_LINES yamlFactory disable YAMLGenerator Feature WRITE_DOC_START_MARKER ObjectMapper mapper new ObjectMapper yamlFactory return mapper writeValueAsString resourceDescriptor catch JsonProcessingException e throw new DriverExecutionException Exception creating component package YAML e private boolean findMatchingComponent final Set String componentNames final List ProcessActivity activities for ProcessActivity processActivity activities if processActivity getComponentName null componentNames contains processActivity getComponentName return true else if processActivity getChildren null processActivity getChildren isEmpty findMatchingComponent component,java
Names processActivity getChildren return true return false ,java
 define Modernizr testAllProps function Modernizr testAllProps,js
 Modernizr addTest flexwrap testAllProps flexWrap wrap true ,js
 Copyright 2015 Amazon com Inc or its affiliates All Rights Reserved Licensed under the Apache License Version 2 0 the License You may not use this file except in compliance with the License A copy of the License is located at http aws amazon com apache2 0 or in the license file accompanying this file This file is distributed on an AS IS BASIS WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND either express or implied See the License for the specific language governing permissions and limitations under the License from tests import unittest import ibm_botocore stub from ibm_botocore stub import Stubber from ibm_botocore compat import six import ibm_boto3 session from ibm_boto3 s3 transfer import TransferConfig class TestS3MethodInjection unittest TestCase def test_transfer_methods_injected_to_client self session ibm_boto3 session Session region_name us west 2 client session client s3 self assertTrue hasattr client upload_,py
file upload_file was not injected onto S3 client self assertTrue hasattr client download_file download_file was not injected onto S3 client self assertTrue hasattr client copy copy was not injected onto S3 client def test_bucket_resource_has_load_method self session ibm_boto3 session Session region_name us west 2 bucket session resource s3 Bucket fakebucket self assertTrue hasattr bucket load load was not injected onto S3 Bucket resource def test_transfer_methods_injected_to_bucket self bucket ibm_boto3 resource s3 Bucket my_bucket self assertTrue hasattr bucket upload_file upload_file was not injected onto S3 bucket self assertTrue hasattr bucket download_file download_file was not injected onto S3 bucket self ass,py
ertTrue hasattr bucket copy copy was not injected onto S3 bucket def test_transfer_methods_injected_to_object self obj ibm_boto3 resource s3 Object my_bucket my_key self assertTrue hasattr obj upload_file upload_file was not injected onto S3 object self assertTrue hasattr obj download_file download_file was not injected onto S3 object self assertTrue hasattr obj copy copy was not injected onto S3 object class BaseTransferTest unittest TestCase def setUp self self session ibm_boto3 session Session aws_access_key_id foo aws_secret_access_key bar region_name us west 2 self s3 self session resource s3 self stubber Stubber self s3 meta client self bucket mybucket self key mykey self upload_id uploadid self etag exam,py
ple0etag self progress 0 self progress_times_called 0 def stub_head self content_length 4 expected_params None head_response AcceptRanges bytes ContentLength content_length ContentType binary octet stream ETag self etag Metadata ResponseMetadata HTTPStatusCode 200 if expected_params is None expected_params Bucket self bucket Key self key self stubber add_response method head_object service_response head_response expected_params expected_params def stub_create_multipart_upload self Add the response and assert params for CreateMultipartUpload create_upload_response Bucket self bucket Key self key UploadId self upload_id ,py
 expected_params Bucket self bucket Key self key self stubber add_response method create_multipart_upload service_response create_upload_response expected_params expected_params def stub_complete_multipart_upload self parts complete_upload_response Location us west 2 Bucket self bucket Key self key ETag self etag expected_params Bucket self bucket Key self key MultipartUpload Parts parts UploadId self upload_id self stubber add_response method complete_multipart_upload service_response complete_upload_response expected_params expected_params class TestCopy BaseTransferTest def setUp self super TestCopy self setUp self co,py
py_source Bucket foo Key bar def stub_single_part_copy self self stub_head expected_params self copy_source self stub_copy_object def stub_multipart_copy self part_size num_parts Set the HEAD to return the total size total_size part_size num_parts self stub_head content_length total_size expected_params self copy_source self stub_create_multipart_upload Add the responses for each UploadPartCopy parts for i in range num_parts Fill in the parts part_number i 1 copy_range bytes s s i part_size i part_size part_size 1 self stub_copy_part part_number part_number copy_range copy_range parts append ETag self etag PartNumber part_number self stub_complete_multipart_upload parts def stub_copy_object self copy_resp,py
onse CopyObjectResult ETag self etag ResponseMetadata HTTPStatusCode 200 expected_params Bucket self bucket Key self key CopySource self copy_source self stubber add_response method copy_object service_response copy_response expected_params expected_params def stub_copy_part self part_number copy_range copy_part_response CopyPartResult ETag self etag ResponseMetadata HTTPStatusCode 200 expected_params Bucket self bucket Key self key CopySource self copy_source UploadId self upload_id PartNumber part_number CopySourceRange copy_range self s,py
tubber add_response method upload_part_copy service_response copy_part_response expected_params expected_params def test_client_copy self self stub_single_part_copy with self stubber response self s3 meta client copy self copy_source self bucket self key The response will be none on a successful transfer self assertIsNone response def test_bucket_copy self self stub_single_part_copy bucket self s3 Bucket self bucket with self stubber response bucket copy self copy_source self key The response will be none on a successful transfer self assertIsNone response def test_object_copy self self stub_single_part_copy obj self s3 Object self bucket self key with self stubber response obj copy self copy_source self assertIsNone response def test_copy_progress self ,py
chunksize 8 1024 2 self stub_multipart_copy chunksize 3 transfer_config TransferConfig multipart_chunksize chunksize multipart_threshold 1 max_concurrency 1 def progress_callback amount self progress amount self progress_times_called 1 with self stubber self s3 meta client copy Bucket self bucket Key self key CopySource self copy_source Config transfer_config Callback progress_callback Assert that the progress callback was called the correct number of times with the correct amounts self assertEqual self progress_times_called 3 self assertEqual self progress chunksize 3 class TestUploadFileobj BaseTransferTest def setUp self super TestUploadFileobj self setUp self contents six BytesIO b foo n def stub_put_object self put_object_response ETag sel,py
f etag ResponseMetadata HTTPStatusCode 200 expected_params Bucket self bucket Key self key Body ibm_botocore stub ANY self stubber add_response method put_object service_response put_object_response expected_params expected_params def stub_upload_part self part_number upload_part_response ETag self etag ResponseMetadata HTTPStatusCode 200 expected_params Bucket self bucket Key self key Body ibm_botocore stub ANY PartNumber part_number UploadId self upload_id self stubber add_response method upload_part service_response upload_part_response expected_params expected_params def stub_multipart_upload self num_pa,py
rts self stub_create_multipart_upload Add the responses for each UploadPartCopy parts for i in range num_parts Fill in the parts part_number i 1 self stub_upload_part part_number part_number parts append ETag self etag PartNumber part_number self stub_complete_multipart_upload parts def test_client_upload self self stub_put_object with self stubber The stubber will assert that all the right parameters are called self s3 meta client upload_fileobj Fileobj self contents Bucket self bucket Key self key self stubber assert_no_pending_responses def test_raises_value_error_on_invalid_fileobj self with self stubber with self assertRaises ValueError self s3 meta client upload_fileobj Fileobj foo Bucket self bucket Key self key def test_buck,py
et_upload self self stub_put_object bucket self s3 Bucket self bucket with self stubber The stubber will assert that all the right parameters are called bucket upload_fileobj Fileobj self contents Key self key self stubber assert_no_pending_responses def test_object_upload self self stub_put_object obj self s3 Object self bucket self key with self stubber The stubber will assert that all the right parameters are called obj upload_fileobj Fileobj self contents self stubber assert_no_pending_responses def test_multipart_upload self chunksize 8 1024 2 contents six BytesIO b 0 chunksize 3 self stub_multipart_upload num_parts 3 transfer_config TransferConfig multipart_chunksize chunksize multipart_threshold 1 max_concurrency 1 with self stubber The stubber ,py
will assert that all the right parameters are called self s3 meta client upload_fileobj Fileobj contents Bucket self bucket Key self key Config transfer_config self stubber assert_no_pending_responses class TestDownloadFileobj BaseTransferTest def setUp self super TestDownloadFileobj self setUp self contents b foo self fileobj six BytesIO def stub_single_part_download self self stub_head content_length len self contents self stub_get_object self contents def stub_get_object self full_contents start_byte 0 end_byte None Stubs out the get_object operation param full_contents The FULL contents of the object param start_byte The first byte to grab param end_byte The last byte to grab get_object_response expected_params contents full_contents end_byte_range end_byt,py
e If the start byte is set and the end byte is not the end byte is the last byte if start_byte 0 and end_byte is None end_byte len full_contents 1 The range on get object where the the end byte is the last byte should set the input range as e g Range bytes 3 if end_byte len full_contents 1 end_byte_range If this is a ranged get ContentRange needs to be returned contents needs to be pruned and Range needs to be an expected param if end_byte is not None contents full_contents start_byte end_byte 1 part_range bytes s s start_byte end_byte_range content_range bytes s s s start_byte end_byte len full_contents get_object_response ContentRange content_range expected_params Range part_range get_object_response update AcceptRanges bytes ,py
 ETag self etag ContentLength len contents ContentType binary octet stream Body six BytesIO contents ResponseMetadata HTTPStatusCode 200 expected_params update Bucket self bucket Key self key self stubber add_response method get_object service_response get_object_response expected_params expected_params def stub_multipart_download self contents part_size num_parts self stub_head content_length len contents for i in range num_parts start_byte i part_size end_byte i 1 part_size 1 self stub_get_object full_contents contents start_byte start_byte end_byte end_byte def test_client_download self self stub_single_part_download with self stubber sel,py
f s3 meta client download_fileobj Bucket self bucket Key self key Fileobj self fileobj self assertEqual self fileobj getvalue self contents self stubber assert_no_pending_responses def test_raises_value_error_on_invalid_fileobj self with self stubber with self assertRaises ValueError self s3 meta client download_fileobj Bucket self bucket Key self key Fileobj foo def test_bucket_download self self stub_single_part_download bucket self s3 Bucket self bucket with self stubber bucket download_fileobj Key self key Fileobj self fileobj self assertEqual self fileobj getvalue self contents self stubber assert_no_pending_responses def test_object_download self self stub_single_part_download obj self s3 Object self bucket self key with self stubber obj download_fileobj Fileobj self f,py
ileobj self assertEqual self fileobj getvalue self contents self stubber assert_no_pending_responses def test_multipart_download self self contents b A 55 self stub_multipart_download contents self contents part_size 5 num_parts 11 transfer_config TransferConfig multipart_chunksize 5 multipart_threshold 1 max_concurrency 1 with self stubber self s3 meta client download_fileobj Bucket self bucket Key self key Fileobj self fileobj Config transfer_config self assertEqual self fileobj getvalue self contents self stubber assert_no_pending_responses def test_download_progress self self contents b A 55 self stub_multipart_download contents self contents part_size 5 num_parts 11 transfer_config TransferConfig multipart_chunksize 5 multipart_threshold 1 ,py
max_concurrency 1 def progress_callback amount self progress amount self progress_times_called 1 with self stubber self s3 meta client download_fileobj Bucket self bucket Key self key Fileobj self fileobj Config transfer_config Callback progress_callback Assert that the progress callback was called the correct number of times with the correct amounts self assertEqual self progress_times_called 11 self assertEqual self progress 55 self stubber assert_no_pending_responses class TestS3ObjectSummary unittest TestCase def setUp self self session ibm_boto3 session Session aws_access_key_id foo aws_secret_access_key bar region_name us west 2 self s3 self session resource s3 self obj_summary self s3 ObjectSummary my_bucket my_key self obj_summary_size 12 self stubber,py
 Stubber self s3 meta client self stubber activate self stubber add_response method head_object service_response ContentLength self obj_summary_size ETag my etag ContentType binary expected_params Bucket my_bucket Key my_key def tearDown self self stubber deactivate def test_has_load self self assertTrue hasattr self obj_summary load load was not injected onto ObjectSummary resource def test_autoloads_correctly self In HeadObject the parameter returned is ContentLength this should get mapped to Size of ListObject since the resource uses the shape returned to by ListObjects self assertEqual self obj_summary size self obj_summary_size def test_cannot_access_other_non_related_parameters self ,py
 Even though an HeadObject was used to load this it should only expose the attributes from its shape defined in ListObjects self assertFalse hasattr self obj_summary content_length ,py
package com accantosystems stratoss driver ucd model heat public class ParameterConstraint private String allowed_pattern private String description public String getAllowed_pattern return allowed_pattern public void setAllowed_pattern String allowed_pattern this allowed_pattern allowed_pattern public String getDescription return description public void setDescription String description this description description Override public String toString return String format _class ParameterConstraint allowedPattern s description s allowed_pattern description ,java
 bin bash set e CORE_PEER_MSPCONFIGPATH peers ordererOrganizations orderer org orderers orderer0 msp CORE_PEER_LOCALMSPID OrdererMSP peer channel create o orderer0 7050 c default f peers orderer channel tx tls true cafile peers orderer localMspConfig cacerts ordererOrg pem CORE_PEER_MSPCONFIGPATH peers insurancePeer localMspConfig CORE_PEER_ADDRESS insurance peer 7051 CORE_PEER_LOCALMSPID InsuranceOrgMSP CORE_PEER_TLS_ROOTCERT_FILE peers insurancePeer localMspConfig cacerts insuranceOrg pem peer channel join b default block CORE_PEER_MSPCONFIGPATH peers shopPeer localMspConfig CORE_PEER_ADDRESS shop peer 7051 CORE_PEER_LOCALMSPID ShopOrgMSP CORE_PEER_TLS_ROOTCERT_FILE peers shopPeer localMspConfig cacerts shopOrg pem peer channel join b default block CORE_PEER_MSPCONFIGPATH peers repairShopPeer localMspConfig CORE_PEER_ADDRESS repairservice peer 7051 CORE_PEER_LOCALMSPID RepairShopOrgMSP CORE_PEER_TLS_ROOTCERT_FILE peers repairShopPeer localMspConfig cacerts repairShopOrg pem peer c,sh
hannel join b default block Don t use TLS CORE_PEER_MSPCONFIGPATH peers orderer localMspConfig CORE_PEER_LOCALMSPID OrdererMSP peer channel create o orderer0 7050 c default f peers orderer channel tx CORE_PEER_MSPCONFIGPATH peers insurancePeer localMspConfig CORE_PEER_ADDRESS insurance peer 7051 CORE_PEER_LOCALMSPID InsuranceOrgMSP peer channel join b default block CORE_PEER_MSPCONFIGPATH peers shopPeer localMspConfig CORE_PEER_ADDRESS shop peer 7051 CORE_PEER_LOCALMSPID ShopOrgMSP peer channel join b default block CORE_PEER_MSPCONFIGPATH peers repairShopPeer localMspConfig CORE_PEER_ADDRESS repairservice peer 7051 CORE_PEER_LOCALMSPID RepairShopOrgMSP peer channel join b default block ,sh
 package com ibm cloud objectstorage services s3 internal import java io File import com ibm cloud objectstorage services s3 OnFileDelete public class PartCreationEvent private final File part private final int partNumber private final boolean isLastPart private final OnFileDelete fileDeleteObserver PartCreationEvent File part int partNumber boolean isLastPart OnFileDelete fileDeleteObserv,java
er if part null throw new IllegalArgumentException part must not be specified this part part this partNumber partNumber this isLastPart isLastPart this fileDeleteObserver fileDeleteObserver public File getPart return part public int getPartNumber return partNumber public boolean isLastPart return isLastPart public OnFileDelete getFileDeleteObserver return fileDeleteObserver ,java
 package com ibm cloud objectstorage protocol json import static org junit Assert assertEquals import static org junit Assert assertFalse import static org junit Assert assertNull import static org junit Assert assertTrue import java io ByteArrayOutputStream import java io IOException import java math BigDecimal import java math BigInteger import java nio ByteBuffer import java util ArrayList import java util Collection ,java
import java util List import org junit Rule import org junit Test import org junit rules ExpectedException import org junit runner RunWith import org junit runners Parameterized import org junit runners Parameterized Parameters import com fasterxml jackson core JsonToken import com ibm cloud objectstorage AmazonClientException import com ibm cloud objectstorage protocol json IonParser import com ibm cloud objectstorage protocol json SdkIonGenerator import com ibm cloud objectstorage util StringUtils import software amazon ion IonReader import software amazon ion IonSystem import software amazon ion IonWriter import software amazon ion system IonBinaryWriterBuilder import software amazon ion system IonSystemBuilder import software amazon ion system IonTextWriterBuilder Tests the link IonParser for conformity with the link JsonParser API Also tests that the IonParser correctly converts Ion only value types to the correct link JsonToken s For testing of additional val,java
ue types and roundtrip testing with the link SdkIonGenerator see link IonRoundtripTest RunWith Parameterized class public class IonParserTest private enum WriteFormat TEXT Override public byte write String data throws IOException ByteArrayOutputStream out new ByteArrayOutputStream write data IonTextWriterBuilder standard build out return out toByteArray BINARY Override public byte write String data throws IOException ByteArrayOutputStream out new ByteArrayOutputStream write data IonBinaryWriterBuilder standard build out return out toByteArray public static void write String data IonWriter writer throws IOException IonReader reader SYSTEM newReader data writer writeValues reader ,java
 writer close public abstract byte write String data throws IOException Parameters public static Collection Object data List Object parameters new ArrayList Object for WriteFormat format WriteFormat values parameters add new Object format return parameters private static IonSystem SYSTEM IonSystemBuilder standard build private WriteFormat format public IonParserTest WriteFormat format this format format private IonParser parse String data throws IOException byte ion format write data return new IonParser SYSTEM newReader ion false Test public void testEmptySexp throws IOException IonParser parser parse assertEquals JsonToken START_ARRAY parser nextToken assertEquals JsonToken END_ARRAY parser nextToken ,java
 assertNull parser nextToken Test public void testSexp throws IOException IonParser parser parse a b assertEquals JsonToken START_ARRAY parser nextToken assertEquals JsonToken VALUE_STRING parser nextToken assertEquals a parser getText assertEquals JsonToken VALUE_STRING parser nextToken assertEquals parser getText assertEquals JsonToken VALUE_STRING parser nextToken assertEquals b parser getText assertEquals JsonToken END_ARRAY parser nextToken assertNull parser nextToken Test public void testNestedSexp throws IOException IonParser parser parse a b assertEquals JsonToken START_ARRAY parser nextToken assertEquals JsonToken START_ARRAY parser nextToken assertEquals JsonToken VALUE_STRING parser nextToken assertEquals a parser getText ass,java
ertEquals JsonToken END_ARRAY parser nextToken assertEquals JsonToken VALUE_STRING parser nextToken assertEquals parser getText assertEquals JsonToken START_ARRAY parser nextToken assertEquals JsonToken VALUE_STRING parser nextToken assertEquals b parser getText assertEquals JsonToken END_ARRAY parser nextToken assertEquals JsonToken END_ARRAY parser nextToken assertNull parser nextToken Test public void testSexpSkip throws IOException IonParser parser parse a b assertEquals JsonToken START_ARRAY parser nextToken parser skipChildren assertEquals JsonToken END_ARRAY parser getCurrentToken assertNull parser nextToken Test public void testNestedSexpSkip throws IOException IonParser parser parse a b assertEquals JsonToken START_ARRAY parser nextToken ,java
 assertEquals JsonToken START_ARRAY parser nextToken parser skipChildren assertEquals JsonToken END_ARRAY parser getCurrentToken assertEquals JsonToken VALUE_STRING parser nextToken assertEquals parser getText assertEquals JsonToken START_ARRAY parser nextToken parser skipChildren assertEquals JsonToken END_ARRAY parser getCurrentToken assertEquals JsonToken END_ARRAY parser nextToken assertNull parser nextToken Test public void testEmptyClob throws IOException IonParser parser parse assertEquals JsonToken VALUE_EMBEDDED_OBJECT parser nextToken assertEquals ByteBuffer wrap new byte 0 parser getEmbeddedObject assertNull parser nextToken Test public void testClob throws IOException IonParser parser parse abc123 assertEquals JsonToken VALUE_EMBEDDED_OBJECT p,java
arser nextToken assertEquals ByteBuffer wrap abc123 getBytes StringUtils UTF8 parser getEmbeddedObject assertNull parser nextToken Test public void testSymbolValue throws IOException IonParser parser parse a1 _1 foo 123 sp ace assertEquals JsonToken VALUE_STRING parser nextToken assertEquals a1 parser getText assertEquals JsonToken VALUE_STRING parser nextToken assertEquals _1 parser getText assertEquals JsonToken VALUE_STRING parser nextToken assertEquals foo parser getText assertEquals JsonToken VALUE_STRING parser nextToken assertEquals 123 parser getText assertEquals JsonToken VALUE_STRING parser nextToken assertEquals sp ace parser getText assertNull parser nextToken Test public void testSkipChildrenNotAtContainerStartDoesNothing throws IOException ,java
 IonParser parser parse 123 a b assertEquals JsonToken VALUE_NUMBER_INT parser nextToken parser skipChildren should do nothing assertEquals JsonToken VALUE_NUMBER_INT parser getCurrentToken assertEquals 123 parser getIntValue assertEquals JsonToken START_ARRAY parser nextToken assertEquals JsonToken VALUE_STRING parser nextToken parser skipChildren should do nothing assertEquals JsonToken VALUE_STRING parser getCurrentToken assertEquals a parser getText Test public void testGetEmbeddedObjectOnBasicValueReturnsNull throws IOException IonParser parser parse 123 a b abc assertEquals JsonToken VALUE_NUMBER_INT parser nextToken assertNull parser getEmbeddedObject assertEquals 123 parser getIntValue assertEquals JsonToken START_ARRAY parser nextToken assertNull parser getEmbeddedObject ,java
 parser skipChildren assertEquals JsonToken VALUE_STRING parser nextToken assertNull parser getEmbeddedObject assertEquals abc parser getText assertNull parser nextToken Test public void testNulls throws IOException IonParser parser parse null null null null bool null int null float null decimal null timestamp null string null symbol null blob null clob null struct null list null sexp ,java
 JsonToken token null int count 0 while token parser nextToken null assertEquals JsonToken VALUE_NULL token count assertEquals 14 count Test public void testNextValue throws IOException IonParser parser parse foo bar abc baz 123 42 0 assertEquals JsonToken START_OBJECT parser nextValue assertEquals JsonToken START_OBJECT parser nextValue assertEquals foo parser getCurrentName assertEquals JsonToken VALUE_STRING parser nextValue assertEquals abc parser getText assertEquals bar parser getCurrentName assertEquals JsonToken END_OBJECT parser nextValue assertEquals JsonToken VALUE_NUMBER_INT parser nextValue assertEquals 123 parser getIntValue assertEquals baz parser getCurrentName assertEquals JsonToken END_OBJECT parser nex,java
tValue assertEquals JsonToken VALUE_NUMBER_FLOAT parser nextValue assertEquals 42 0 parser getFloatValue 1e 9 assertNull parser nextValue Test public void testGetCurrentNameNotAtFieldReturnsNull throws IOException IonParser parser parse foo abc a b bar assertEquals JsonToken START_OBJECT parser nextToken assertNull parser getCurrentName assertEquals JsonToken VALUE_STRING parser nextValue assertEquals JsonToken END_OBJECT parser nextToken assertNull parser getCurrentName assertEquals JsonToken START_ARRAY parser nextToken assertEquals JsonToken VALUE_STRING parser nextToken assertNull parser getCurrentName assertEquals JsonToken VALUE_STRING parser nextToken assertNull parser getCurrentName assertEquals JsonToken END_ARRAY parser nextToken assertNull parser getCurrent,java
Name assertEquals JsonToken VALUE_EMBEDDED_OBJECT parser nextToken assertNull parser getCurrentName assertEquals JsonToken VALUE_STRING parser nextToken assertNull parser getCurrentName assertNull parser nextToken assertNull parser getCurrentName Test public void testClearCurrentToken throws IOException IonParser parser parse assertEquals JsonToken START_OBJECT parser nextToken parser clearCurrentToken assertNull parser getCurrentToken assertFalse parser hasCurrentToken assertEquals JsonToken START_OBJECT parser getLastClearedToken Test public void testGetText throws IOException String defaultText default String integer String valueOf 123 String flt String valueOf 42 0 IonParser parser parse foo integer bar flt abc null true false ,java
 assertNull parser getText assertEquals defaultText parser getValueAsString defaultText assertEquals JsonToken START_OBJECT parser nextToken assertEquals JsonToken START_OBJECT asString parser getText assertEquals defaultText parser getValueAsString defaultText assertEquals JsonToken FIELD_NAME parser nextToken assertEquals foo parser getText assertEquals defaultText parser getValueAsString defaultText assertEquals foo parser getCurrentName assertEquals JsonToken VALUE_NUMBER_INT parser nextToken assertEquals integer parser getText assertEquals integer parser getValueAsString defaultText assertEquals 123 parser getIntValue assertEquals JsonToken VALUE_NUMBER_FLOAT parser nextValue assertEquals flt parser getText assertEquals flt parser getValueAsString defaultText assertEquals 42 0 parser ge,java
tFloatValue 1e 9 assertEquals bar parser getCurrentName assertEquals JsonToken END_OBJECT parser nextToken assertEquals JsonToken END_OBJECT asString parser getText assertEquals defaultText parser getValueAsString defaultText assertEquals JsonToken VALUE_EMBEDDED_OBJECT parser nextToken assertNull parser getText embedded objects have undefined text assertEquals JsonToken VALUE_NULL parser nextToken assertEquals JsonToken VALUE_NULL asString parser getText null assertEquals defaultText parser getValueAsString defaultText assertEquals JsonToken VALUE_TRUE parser nextToken assertEquals JsonToken VALUE_TRUE asString parser getText true assertEquals JsonToken VALUE_TRUE asString parser getValueAsString defaultText assertEquals JsonToken VALUE_FALSE parser nextToken assertEquals JsonToken VALUE_FALSE asString ,java
 parser getText false assertEquals JsonToken VALUE_FALSE asString parser getValueAsString defaultText assertNull parser nextToken assertNull parser getText assertEquals defaultText parser getValueAsString defaultText Test public void testGetNumberValue throws IOException String integer String valueOf Integer MAX_VALUE String lng String valueOf Long MAX_VALUE String bigInteger BigInteger valueOf Long MAX_VALUE add BigInteger ONE toString String flt String valueOf Float MAX_VALUE String dbl String valueOf Double MAX_VALUE String inf 1 7976931348623157E309 Double MAX_VALUE 10 String bigDecimal new BigDecimal inf toString IonParser parser parse integer lng bigInteger flt ,java
 dbl inf bigDecimal toLowerCase replace e D assertEquals JsonToken VALUE_NUMBER_INT parser nextToken assertEquals integer parser getNumberValue toString assertEquals JsonToken VALUE_NUMBER_INT parser nextToken assertEquals lng parser getNumberValue toString assertEquals JsonToken VALUE_NUMBER_INT parser nextToken assertEquals bigInteger parser getNumberValue toString assertEquals JsonToken VALUE_NUMBER_FLOAT parser nextToken assertEquals flt parser getNumberValue toString assertEquals JsonToken VALUE_NUMBER_FLOAT parser nextToken assertEquals dbl parser getNumberValue toString assertEquals JsonToken VALUE_NUMBER_FLOAT parser nextToken assertTrue Double isInfinite parser getDoubleValue assertTrue Doub,java
le isInfinite parser getFloatValue assertEquals JsonToken VALUE_NUMBER_FLOAT parser nextToken assertEquals bigDecimal parser getNumberValue toString Rule public ExpectedException thrown ExpectedException none Test public void testGetNumberValueNotOnNumberFails throws IOException IonParser parser parse foo abc 123 assertEquals JsonToken VALUE_STRING parser nextToken assertNull parser getNumberType thrown expect AmazonClientException class parser getNumberValue Test public void testSpecialFloatValues throws IOException IonParser parser parse 1 7976931348623157E309 Double MAX_VALUE 10 1 7976931348623157E309 inf inf nan assertEqua,java
ls JsonToken VALUE_NUMBER_FLOAT parser nextToken assertTrue Double isInfinite parser getDoubleValue assertTrue Double isInfinite parser getFloatValue assertEquals JsonToken VALUE_NUMBER_FLOAT parser nextToken assertTrue Double isInfinite parser getDoubleValue assertTrue Double isInfinite parser getFloatValue assertEquals JsonToken VALUE_NUMBER_FLOAT parser nextToken assertTrue Double isInfinite parser getDoubleValue assertTrue Double isInfinite parser getFloatValue assertEquals JsonToken VALUE_NUMBER_FLOAT parser nextToken assertTrue Double isInfinite parser getDoubleValue assertTrue Double isInfinite parser getFloatValue assertEquals JsonToken VALUE_NUMBER_FLOAT parser nextToken assertTrue Double isNaN parser getDoubleValue assertTrue Double isNaN parser getFloatValue ,java
 package com ibm cloud objectstorage internal http import static org junit Assert assertEquals import static org junit Assert assertNull import org junit Test import com fasterxml jackson databind ObjectMapper import com fasterxml jackson databind node ObjectNode import com ibm cloud objectstorage http HttpResponse import com ibm cloud objectstorage internal http JsonErrorCodeParser import com ibm cloud objectstorage protocol,java
 json JsonContent public class JsonErrorCodeParserTest private static final String HEADER_ERROR_TYPE headerErrorType private static final String JSON_ERROR_TYPE jsonErrorType private static final String ERROR_FIELD_NAME testErrorCode private static final ObjectMapper MAPPER new ObjectMapper private final JsonErrorCodeParser parser new JsonErrorCodeParser ERROR_FIELD_NAME Test public void parseErrorType_ErrorTypeInHeadersTakesPrecedence_NoSuffix String actualErrorType parser parseErrorCode httpResponseWithHeaders JsonErrorCodeParser X_AMZN_ERROR_TYPE HEADER_ERROR_TYPE toJsonContent JSON_ERROR_TYPE assertEquals HEADER_ERROR_TYPE actualErrorType Test public void parseErrorType_ErrorTypeInHeadersTakesPrecedence_Suff,java
ixIgnored String actualErrorType parser parseErrorCode httpResponseWithHeaders JsonErrorCodeParser X_AMZN_ERROR_TYPE String format s s HEADER_ERROR_TYPE someSuffix toJsonContent JSON_ERROR_TYPE assertEquals HEADER_ERROR_TYPE actualErrorType Test public void parseErrorType_ErrorTypeInContent_NoPrefix String actualErrorType parser parseErrorCode httpResponseWithoutHeaders toJsonContent JSON_ERROR_TYPE assertEquals JSON_ERROR_TYPE actualErrorType Test public void parseErrorType_ErrorTypeInContent_PrefixIgnored String actualErrorType parser parseErrorCode httpResponseWithoutHeaders toJsonContent String format s s somePrefix JSON_ERROR_TYPE assertEquals JSON_ERROR_TYPE actualErrorType Test public void parseErrorType_NotPresentInHeadersAndNullContent_ReturnsNull assertNull parser parseErrorC,java
ode httpResponseWithoutHeaders null Test public void parseErrorType_NotPresentInHeadersAndEmptyContent_ReturnsNull assertNull parser parseErrorCode httpResponseWithoutHeaders new JsonContent null new ObjectMapper createObjectNode private static JsonContent toJsonContent String errorType ObjectNode node MAPPER createObjectNode node put ERROR_FIELD_NAME errorType return new JsonContent null node private static HttpResponse httpResponseWithoutHeaders return new HttpResponse null null private static HttpResponse httpResponseWithHeaders String header String value HttpResponse response new HttpResponse null null response addHeader header value return response ,java
 project xmlns http maven apache org POM 4 0 0 xmlns xsi http www w3 org 2001 XMLSchema instance xsi schemaLocation http maven apache org POM 4 0 0 http maven apache org xsd maven 4 0 0 xsd modelVersion 4 0 0 modelVersion parent groupId com lightbend lagom sample chirper groupId artifactId lagom java chirper artifactId version 1 0 SNAPSHOT version parent artifactId front end artifactId packaging jar packaging dependencies dependency groupId com lightbend lagom groupId artifactId lagom javadsl client_2 11 artifactId dependency dependency groupId org webjars groupId artifactId webjars play_2 11 artifactId dependency dependency groupId org webjars groupId artifactId foundation artifactId dependency dependency g,xml
roupId org webjars groupId artifactId react artifactId dependency dependency groupId org webjars groupId artifactId react router artifactId dependency dependency groupId org webjars groupId artifactId jquery artifactId dependency dependency groupId com lightbend lagom groupId artifactId lagom logback_2 11 artifactId dependency dependency groupId com typesafe play groupId artifactId play netty server_2 11 artifactId dependency Service Locator Provider dependency groupId serviceLocator provider groupName groupId artifactId serviceLocator provider artifactName artifactId dependency dependencies build plugins plugin artifactId maven assembly plugin artifactI,xml
d configuration descriptors descriptor src assembly conductr bundle xml descriptor descriptors configuration executions execution id conductr bundle id phase package phase goals goal single goal goals execution executions plugin plugin groupId com lightbend lagom groupId artifactId lagom maven plugin artifactId configuration playService true playService configuration executions execution goals goal renameConductRBundle goal goals ,xml
 execution executions plugin plugin groupId com jakewharton twirl groupId artifactId twirl maven plugin artifactId version 1 0 5 version configuration This is what the PlayJava sbt plugin adds as imports imports Play default imports import models _ import import controllers _ import import play api i18n _ import import views format _ import import play api templates PlayMagic _ import Minimal Java imports excluding the ones already added by twirl maven plugin import play core j PlayMagicForJava _ import import play mvc _ import import play api data,xml
 Field import import play mvc Http Context Implicit _ import Default Java imports import play data _ import import play core j PlayMagicForJava _ import imports configuration executions execution phase generate sources phase goals goal compile goal goals execution executions plugin plugin groupId net alchim31 maven groupId artifactId scala maven plugin artifactId version 3 2 1 version configuration recompileMode incremental recompileMode configuration executions execution id,xml
 scala compile id phase process resources phase goals goal add source goal goal compile goal goals execution execution id scala test compile id phase process test resources phase goals goal testCompile goal goals execution executions plugin plugin groupId com github eirslett groupId artifactId frontend maven plugin artifactId version 1 4 version configuration installDirectory pom basedir target node installDirectory environmentVariables BUILD_SYSTEM maven BUILD_SYSTEM ,xml
 environmentVariables configuration executions execution id install node and npm id phase initialize phase goals goal install node and npm goal goals configuration nodeVersion v6 10 2 nodeVersion configuration execution execution id npm install id phase initialize phase goals goal npm goal goals configuration arguments install arguments configuration execution execution id webpack build,xml
 id goals goal webpack goal goals execution executions plugin plugin groupId io fabric8 groupId artifactId docker maven plugin artifactId configuration skip false skip images image build entryPoint java cp maven Dplay crypto secret APPLICATION_SECRET none Dhttp address WEB_BIND_IP Dhttp port WEB_BIND_PORT play core server ProdServerStart entryPoint build image images configuration plugin plugins build project ,xml
 package com ibm cloud objectstorage retry v2 public interface RetryPolicy extends RetryCondition BackoffStrategy ,java
 package ibm public class Cleanup public static void main String args throws Exception ZFileProcess cleanupPSFiles args 0 ,java
 Code generated by counterfeiter DO NOT EDIT package fakes import sync github com IBM ubiquity remote mounter block_device_mounter_utils type FakeBlockDeviceMounterUtils struct RescanAllStub func withISCSI bool wwn string rescanForCleanUp bool error rescanAllMutex sync RWMutex rescanAllArgsForCall struct withISCSI bool wwn string rescanForCleanUp bool rescanAllReturns struct result1 error rescanAllReturnsOnCall map int struct result1 error MountDeviceFlowStub func devicePath string fsType string mountPoint string error mountDeviceFlowMutex sync RWMutex mountDeviceFlowArgsForCall struct devicePath string fsType string mountPoint string mountDeviceFlowReturns struct result1 error mountDeviceFlowReturnsOnCall map int struct result1 error DiscoverStub func volumeWwn string deepDiscovery bool string error discoverMutex sync RWMutex discoverArgsForCall str,go
uct volumeWwn string deepDiscovery bool discoverReturns struct result1 string result2 error discoverReturnsOnCall map int struct result1 string result2 error UnmountDeviceFlowStub func devicePath string error unmountDeviceFlowMutex sync RWMutex unmountDeviceFlowArgsForCall struct devicePath string unmountDeviceFlowReturns struct result1 error unmountDeviceFlowReturnsOnCall map int struct result1 error invocations map string interface invocationsMutex sync RWMutex func fake FakeBlockDeviceMounterUtils RescanAll withISCSI bool wwn string rescanForCleanUp bool error fake rescanAllMutex Lock ret specificReturn fake rescanAllReturnsOnCall len fake rescanAllArgsForCall fake rescanAllArgsForCall append fake rescanAllArgsForCall struct withISCSI bool wwn string rescanForCleanUp bool withISCSI wwn rescanForCleanUp fake recordInvocation RescanAll interface withISCSI,go
 wwn rescanForCleanUp fake rescanAllMutex Unlock if fake RescanAllStub nil return fake RescanAllStub withISCSI wwn rescanForCleanUp if specificReturn return ret result1 return fake rescanAllReturns result1 func fake FakeBlockDeviceMounterUtils RescanAllCallCount int fake rescanAllMutex RLock defer fake rescanAllMutex RUnlock return len fake rescanAllArgsForCall func fake FakeBlockDeviceMounterUtils RescanAllArgsForCall i int bool string bool fake rescanAllMutex RLock defer fake rescanAllMutex RUnlock return fake rescanAllArgsForCall i withISCSI fake rescanAllArgsForCall i wwn fake rescanAllArgsForCall i rescanForCleanUp func fake FakeBlockDeviceMounterUtils RescanAllReturns result1 error fake RescanAllStub nil fake rescanAllReturns struct result1 error result1 func fake FakeBlockDeviceMounterUtils RescanAllReturnsOnCall i int result1 error fake RescanAllStub nil if fake rescanAllReturnsOnCall nil ,go
 fake rescanAllReturnsOnCall make map int struct result1 error fake rescanAllReturnsOnCall i struct result1 error result1 func fake FakeBlockDeviceMounterUtils MountDeviceFlow devicePath string fsType string mountPoint string error fake mountDeviceFlowMutex Lock ret specificReturn fake mountDeviceFlowReturnsOnCall len fake mountDeviceFlowArgsForCall fake mountDeviceFlowArgsForCall append fake mountDeviceFlowArgsForCall struct devicePath string fsType string mountPoint string devicePath fsType mountPoint fake recordInvocation MountDeviceFlow interface devicePath fsType mountPoint fake mountDeviceFlowMutex Unlock if fake MountDeviceFlowStub nil return fake MountDeviceFlowStub devicePath fsType mountPoint if specificReturn return ret result1 return fake mountDeviceFlowReturns result1 func fake FakeBlockDeviceMounterUtils MountDeviceFlowCallCount int fake mountDeviceFlowMutex RLock defer fa,go
ke mountDeviceFlowMutex RUnlock return len fake mountDeviceFlowArgsForCall func fake FakeBlockDeviceMounterUtils MountDeviceFlowArgsForCall i int string string string fake mountDeviceFlowMutex RLock defer fake mountDeviceFlowMutex RUnlock return fake mountDeviceFlowArgsForCall i devicePath fake mountDeviceFlowArgsForCall i fsType fake mountDeviceFlowArgsForCall i mountPoint func fake FakeBlockDeviceMounterUtils MountDeviceFlowReturns result1 error fake MountDeviceFlowStub nil fake mountDeviceFlowReturns struct result1 error result1 func fake FakeBlockDeviceMounterUtils MountDeviceFlowReturnsOnCall i int result1 error fake MountDeviceFlowStub nil if fake mountDeviceFlowReturnsOnCall nil fake mountDeviceFlowReturnsOnCall make map int struct result1 error fake mountDeviceFlowReturnsOnCall i struct result1 error result1 func fake FakeBlockDeviceMounterUtils Discover volumeWwn string deepDiscovery bool stri,go
ng error fake discoverMutex Lock ret specificReturn fake discoverReturnsOnCall len fake discoverArgsForCall fake discoverArgsForCall append fake discoverArgsForCall struct volumeWwn string deepDiscovery bool volumeWwn deepDiscovery fake recordInvocation Discover interface volumeWwn deepDiscovery fake discoverMutex Unlock if fake DiscoverStub nil return fake DiscoverStub volumeWwn deepDiscovery if specificReturn return ret result1 ret result2 return fake discoverReturns result1 fake discoverReturns result2 func fake FakeBlockDeviceMounterUtils DiscoverCallCount int fake discoverMutex RLock defer fake discoverMutex RUnlock return len fake discoverArgsForCall func fake FakeBlockDeviceMounterUtils DiscoverArgsForCall i int string bool fake discoverMutex RLock defer fake discoverMutex RUnlock return fake discoverArgsForCall i volumeWwn fake discoverArgsForCall i deepDiscovery func fake FakeBlockDevi,go
ceMounterUtils DiscoverReturns result1 string result2 error fake DiscoverStub nil fake discoverReturns struct result1 string result2 error result1 result2 func fake FakeBlockDeviceMounterUtils DiscoverReturnsOnCall i int result1 string result2 error fake DiscoverStub nil if fake discoverReturnsOnCall nil fake discoverReturnsOnCall make map int struct result1 string result2 error fake discoverReturnsOnCall i struct result1 string result2 error result1 result2 func fake FakeBlockDeviceMounterUtils UnmountDeviceFlow devicePath string error fake unmountDeviceFlowMutex Lock ret specificReturn fake unmountDeviceFlowReturnsOnCall len fake unmountDeviceFlowArgsForCall fake unmountDeviceFlowArgsForCall append fake unmountDeviceFlowArgsForCall struct devicePath string devicePath fake recordInvocation UnmountDeviceFlow interface devicePath fake unmountDeviceFlowMutex Unlock if fake UnmountDeviceFlow,go
Stub nil return fake UnmountDeviceFlowStub devicePath if specificReturn return ret result1 return fake unmountDeviceFlowReturns result1 func fake FakeBlockDeviceMounterUtils UnmountDeviceFlowCallCount int fake unmountDeviceFlowMutex RLock defer fake unmountDeviceFlowMutex RUnlock return len fake unmountDeviceFlowArgsForCall func fake FakeBlockDeviceMounterUtils UnmountDeviceFlowArgsForCall i int string fake unmountDeviceFlowMutex RLock defer fake unmountDeviceFlowMutex RUnlock return fake unmountDeviceFlowArgsForCall i devicePath func fake FakeBlockDeviceMounterUtils UnmountDeviceFlowReturns result1 error fake UnmountDeviceFlowStub nil fake unmountDeviceFlowReturns struct result1 error result1 func fake FakeBlockDeviceMounterUtils UnmountDeviceFlowReturnsOnCall i int result1 error fake UnmountDeviceFlowStub nil if fake unmountDeviceFlowReturnsOnCall nil fake unmountDeviceFlowReturnsOnCall make map int struct ,go
 result1 error fake unmountDeviceFlowReturnsOnCall i struct result1 error result1 func fake FakeBlockDeviceMounterUtils Invocations map string interface fake invocationsMutex RLock defer fake invocationsMutex RUnlock fake rescanAllMutex RLock defer fake rescanAllMutex RUnlock fake mountDeviceFlowMutex RLock defer fake mountDeviceFlowMutex RUnlock fake discoverMutex RLock defer fake discoverMutex RUnlock fake unmountDeviceFlowMutex RLock defer fake unmountDeviceFlowMutex RUnlock copiedInvocations map string interface for key value range fake invocations copiedInvocations key value return copiedInvocations func fake FakeBlockDeviceMounterUtils recordInvocation key string args interface fake invocationsMutex Lock defer fake invocationsMutex Unlock if fake invocations nil fake invocations map string interface if fake invocations key nil fake invocations key inte,go
rface fake invocations key append fake invocations key args var _ block_device_mounter_utils BlockDeviceMounterUtils new FakeBlockDeviceMounterUtils ,go
 package psdi app bim parser cobie import java util Enumeration import java util Hashtable public class ItemCompany extends ItemBase private boolean isManufacturue false private final Hashtable String ItemCONTACT _contacts new Hashtable String ItemCONTACT ItemCompany ItemCONTACT contact super setName contact getCompany addContact contact setManu,java
facturer contact isManufacture setExtSystem contact getExtSystem setExtObject contact getExtObject setExtIdentifier contact getExtIdentifier setCreatedOn contact getCreatedOn setCreatedBy contact getCreatedBy setDescription contact getDescription setCategory contact getCategory Override public String getPageId return Parser SHEET_COMPANY public void addContact ItemCONTACT contact _contacts put contact getKey contact public Enumeration ItemCONTACT contacts return _contacts elements Override public String getKey return getName toUpperCase public boolean isManufacture return isManufacturue public void setManufacturer boolean manufacture Once true stays true if manufacture isManufacturue manufacture Override public String toString StringBuffer sb new StringBuffer sb append super toString if isMa,java
nufacturue sb append tManufacture n Enumeration ItemCONTACT el _contacts elements while el hasMoreElements ItemCONTACT contact el nextElement sb append contact getName sb append n return sb toString ,java
 package connectors import fmt github com IBM ubiquity resources github com IBM ubiquity utils log net url path strings type spectrum_mmcli struct logger log Logger executor utils Executor isMounted bool func NewSpectrumMMCLI logger log Logger SpectrumScaleConnector error return spectrum_mmcli logger logger executor utils NewExecutor nil func NewSpectrumMMCLIWithExecut,go
or logger log Logger executor utils Executor SpectrumScaleConnector error return spectrum_mmcli logger logger executor executor nil func s spectrum_mmcli GetClusterId string error spectrumCommand usr lpp mmfs bin mmlscluster args string spectrumCommand return GetClusterIdInternal s logger s executor spectrumCommand nil func GetClusterIdInternal logger log Logger executor utils Executor command string args string string error var clusterId string outputBytes err executor Execute command args if err nil logger Printf Error running command v err return err spectrumOutput string outputBytes lines strings Split spectrumOutput n if len lines 4 logger Println Error determining cluster id return fmt Errorf Error determining cluster id tokens strings Split lines 4 if len tokens 2 if strings TrimSpace tokens 0 GPFS cluster id clusterId strings TrimSpace ,go
tokens 1 return clusterId nil func s spectrum_mmcli IsFilesystemMounted filesystemName string bool error s logger Println spectrumLocalClient isMounted start defer s logger Println spectrumLocalClient isMounted end if s isMounted true s isMounted true return s isMounted nil spectrumCommand usr lpp mmfs bin mmlsmount args string filesystemName L Y isMounted err IsFilesystemMountedInternal s logger s executor filesystemName spectrumCommand args s isMounted isMounted return s isMounted err func IsFilesystemMountedInternal logger log Logger executor utils Executor filesystemName string command string args string bool error outputBytes err executor Execute command args if err nil logger Printf Error running command v n err return false err mountedNodes extractMountedNodes string outputBytes if len mountedNodes 0 not mounted anywhere return false nil else che,go
ckif mounted on current node compare node name currentNode err executor Hostname if err nil logger Printf error in getting hostname v err return false err logger Printf spectrumLocalClient node name s n currentNode for _ node range mountedNodes if node currentNode return true nil return false nil func extractMountedNodes spectrumOutput string string var nodes string lines strings Split spectrumOutput n if len lines 1 return nodes for _ line range lines 1 tokens strings Split line if len tokens 10 if tokens 11 nodes append nodes tokens 11 return nodes func s spectrum_mmcli MountFileSystem filesystemName string error s logger Println spectrumLocalClient mount start defer s logger Println spectrumLocalClient mount end if s isMounted true return nil spectrumCommand usr lpp mmfs bin mmmount args strin,go
g filesystemName a err MountFileSystemInternal s logger s executor filesystemName spectrumCommand args if err nil s logger Printf error mounting filesystem v err return err s isMounted true return nil func MountFileSystemInternal logger log Logger executor utils Executor filesystemName string command string args string error output err executor Execute command args if err nil logger Printf Failed to mount filesystem v err return err logger Println output return nil func s spectrum_mmcli ListFilesystems string error TODO not yet implemented return nil nil func s spectrum_mmcli GetFilesystemMountpoint filesystemName string string error spectrumCommand usr lpp mmfs bin mmlsfs args string filesystemName T Y return GetFilesystemMountpointInternal s logger s executor filesystemName spectrumCommand args func GetFilesystemMountpointInternal logger log Logger executor utils Ex,go
ecutor filesystemName string command string args string string error outputBytes err executor Execute command args if err nil logger Printf Error running command s err Error return err spectrumOutput string outputBytes lines strings Split spectrumOutput n if len lines 2 return fmt Errorf Cannot determine filesystem mountpoint tokens strings Split lines 1 if len tokens 8 if strings TrimSpace tokens 6 filesystemName mountpoint strings TrimSpace tokens 8 Todo this should be changed to url PathUnescape when available mountpoint err url PathUnescape mountpoint if err nil logger Printf Error decoding mountpoint s n err else logger Printf Returning mountpoint s n mountpoint return mountpoint nil return fmt Errorf Cannot determine filesystem mountpoint func s spectrum_mmcli CreateFileset filesystemName string filesetName string ,go
 opts map string interface error s logger Println spectrumLocalClient createFileset start defer s logger Println spectrumLocalClient createFileset end s logger Printf creating a new fileset s n filesetName create fileset spectrumCommand usr lpp mmfs bin mmcrfileset args string filesystemName filesetName t fileset for container volume filesetType filesetTypeSpecified opts UserSpecifiedFilesetType inodeLimit inodeLimitSpecified opts UserSpecifiedInodeLimit if filesetTypeSpecified filesetType string independent args append args inode space new if inodeLimitSpecified args append args inode limit inodeLimit string return CreateFilesetInternal s logger s executor filesystemName filesetName spectrumCommand args func CreateFilesetInternal logger log Logger executor utils Executor filesystemName string filesetName string command string args string error output err executor Exec,go
ute command args if err nil logger Printf Error creating fileset v v n output err return fmt Errorf Failed to create fileset s on filesystem s Please check that filesystem specified is correct and healthy filesetName filesystemName logger Printf Createfileset output s n string output return nil func s spectrum_mmcli DeleteFileset filesystemName string filesetName string error s logger Println spectrumLocalClient deleteFileset start defer s logger Println spectrumLocalClient deleteFileset end spectrumCommand usr lpp mmfs bin mmdelfileset args string filesystemName filesetName f return DeleteFilesetInternal s logger s executor filesystemName filesetName spectrumCommand args func DeleteFilesetInternal logger log Logger executor utils Executor filesystemName string filesetName string command string args string error output err executor Execute command args if err nil logger Printf Failed to remo,go
ve fileset s s filesetName err Error return fmt Errorf Failed to remove fileset s s filesetName err Error logger Printf spectrumLocalClient deleteFileset output s n string output return nil func s spectrum_mmcli IsFilesetLinked filesystemName string filesetName string bool error s logger Println spectrumLocalClient isFilesetLinked start defer s logger Println spectrumLocalClient isFilesetLinked end spectrumCommand usr lpp mmfs bin mmlsfileset args string filesystemName filesetName Y s logger Printf v n args return IsFilesetLinkedInternal s logger s executor filesystemName filesetName spectrumCommand args func IsFilesetLinkedInternal logger log Logger executor utils Executor filesystemName string filesetName string command string args string bool error outputBytes err executor Execute command args if err nil logger Printf Error in mmlsfileset invocation n return false err spect,go
rumOutput string outputBytes lines strings Split spectrumOutput n if len lines 1 logger Printf Error in listing fileset n return false fmt Errorf Error listing fileset s filesetName tokens strings Split lines 1 if len tokens 11 if tokens 10 Linked return true nil else return false nil logger Printf Error listing fileset s after parsing filesetName return false fmt Errorf Error listing fileset s after parsing filesetName func s spectrum_mmcli LinkFileset filesystemName string filesetName string error s logger Println spectrumLocalClient linkFileset start defer s logger Println spectrumLocalClient linkFileset end s logger Printf Trying to link s s filesystemName filesetName mountpoint err s GetFilesystemMountpoint filesystemName if err nil s logger Println err Error return err spectrumCommand usr lpp mmfs bin mmlinkfileset filesetPath path Join mou,go
ntpoint filesetName args string filesystemName filesetName J filesetPath s logger Printf Args for link fileset v args err LinkFilesetInternal s logger s executor filesystemName filesetName spectrumCommand args if err nil s logger Printf error linking fileset v err return err return nil func LinkFilesetInternal logger log Logger executor utils Executor filesystemName string filesetName string command string args string error _ err executor Execute command args if err nil logger Println Failed to link fileset v n err return fmt Errorf Failed to link fileset s err Error return nil func s spectrum_mmcli UnlinkFileset filesystemName string filesetName string error s logger Println spectrumLocalClient unlinkFileset start defer s logger Println spectrumLocalClient unlinkFileset end spectrumCommand usr lpp mmfs bin mmunlinkfileset args string filesystemName filesetName return UnlinkFil,go
esetInternal s logger s executor filesystemName filesetName spectrumCommand args func UnlinkFilesetInternal logger log Logger executor utils Executor filesystemName string filesetName string command string args string error output err executor Execute command args if err nil return fmt Errorf Failed to unlink fileset s s filesetName err Error logger Printf spectrumLocalClient unLinkfileset output s n string output return nil func s spectrum_mmcli ListFilesets filesystemName string resources Volume error return nil nil func s spectrum_mmcli ListFileset filesystemName string filesetName string resources Volume error s logger Println spectrumLocalClient ListFileset start defer s logger Println spectrumLocalClient ListFileset end spectrumCommand usr lpp mmfs bin mmlsfileset args string filesystemName filesetName Y return ListFilesetInternal s logger s executor filesystemName filesetName spectru,go
mCommand args func ListFilesetInternal logger log Logger executor utils Executor filesystemName string filesetName string command string args string resources Volume error _ err executor Execute command args if err nil logger Println err return resources Volume err TODO check what we need to return return resources Volume Name filesetName err TODO modify quota from string to Capacity see kubernetes func s spectrum_mmcli ListFilesetQuota filesystemName string filesetName string string error s logger Println spectrumLocalClient verifyFilesetQuota start defer s logger Println spectrumLocalClient verifyFilesetQuota end spectrumCommand usr lpp mmfs bin mmlsquota args string j filesetName filesystemName block size auto return ListFilesetQuotaInternal s logger s executor filesystemName filesetName spectrumCommand args func ListFilesetQuotaInternal logger log Logger executor utils Executor filesystemNa,go
me string filesetName string command string args string string error outputBytes err executor Execute command args if err nil logger Printf failed to list quota for fileset s v filesetName err return fmt Errorf Failed to list quota for fileset s s filesetName err Error spectrumOutput string outputBytes lines strings Split spectrumOutput n if len lines 2 tokens strings Fields lines 2 if len tokens 3 if tokens 3 return tokens 3 nil else logger Printf error parsing tokens while listing quota for fileset s v filesetName err return fmt Errorf Error parsing tokens while listing quota for fileset s filesetName return fmt Errorf Error listing quota for fileset s filesetName func s spectrum_mmcli SetFilesetQuota filesystemName string filesetName string quota string error s logger Println spectrumLocalClient setFilesetQuota start defer s logger,go
 Println spectrumLocalClient setFilesetQuota end s logger Printf setting quota to s for fileset s n quota filesetName spectrumCommand usr lpp mmfs bin mmsetquota args string filesystemName filesetName block quota quota return SetFilesetQuotaInternal s logger s executor filesystemName filesetName quota spectrumCommand args func SetFilesetQuotaInternal logger log Logger executor utils Executor filesystemName string filesetName string quota string command string args string error output err executor Execute command args if err nil logger Printf Failed to set quota s for fileset s s quota filesetName err Error return fmt Errorf Failed to set quota s for fileset s s quota filesetName err Error logger Printf setFilesetQuota output s n string output return nil func s spectrum_mmcli ExportNfs volumeMountpoint string clientConfig string error s logger Println spectrumLocal,go
Client ExportNfs start defer s logger Println spectrumLocalClient ExportNfs end spectrumCommand usr lpp mmfs bin mmnfs args string export add volumeMountpoint client clientConfig return ExportNfsInternal s logger s executor spectrumCommand args func ExportNfsInternal logger log Logger executor utils Executor command string args string error output err executor Execute command args if err nil logger Printf Failed to export fileset via Nfs error v ExportNfs output v n err output return fmt Errorf Failed to export fileset via Nfs s err Error logger Printf ExportNfs output s n string output return nil func s spectrum_mmcli UnexportNfs volumeMountpoint string error s logger Println spectrumLocalClient UnexportNfs start defer s logger Println spectrumLocalClient UnexportNfs end spectrumCommand usr lpp mmfs bin mmnfs args string export remove volumeMountpoint force re,go
turn UnexportNfsInternal s logger s executor spectrumCommand args func UnexportNfsInternal logger log Logger executor utils Executor command string args string error output err executor Execute command args if err nil logger Printf Failed to unexport fileset via Nfs error v UnexportNfs output v n err output return fmt Errorf Failed to unexport fileset via Nfs s err Error logger Printf UnexportNfs output s n string output return nil ,go
 use strict The cloudant js is the central point used to save and retrieve content from the DB var extend require extend var dbname customers var botdb null var cloudant If unspecified here the Cloudant_URL env properties will be checked After that the SDK will fall back to the bluemix provided VCAP_SERVICES environment property var vcapServices require vcap_services ,js
 var cloudantCredentials vcapServices getCredentials cloudantNoSQLDB var cloudantUrl null if cloudantCredentials cloudantUrl cloudantCredentials url cloudantUrl cloudantUrl process env CLOUDANT_URL cloudant_url cloudant require cloudant cloudantUrl try botdb cloudant db create dbname if botdb null botdb cloudant db use dbname catch e botdb cloudant db use dbname module exports get function params callback botdb get params function err response if err if err error not_found return callback err else return callback null else return callback null response Inserts an element in the database ,js
 param type params _id The user id param Function callback The callback return void put function params callback botdb insert params callback ,js